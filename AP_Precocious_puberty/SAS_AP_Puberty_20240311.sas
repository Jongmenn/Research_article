
/*
※ 진료 테이블(20t, 30t, 40t, 60t 등)에서 자료 추출 시 조건절에 
요양개시년월 ( MDCARE_STRT_YYYYMM ) 을 반드시 기본 조건 으로 하며, 
1개월 단위로 추출함(연도별 실인원 수 카운트의 경우, 조인 없이 최장 1년 단위 카운트 가능)
MDCARE_STRT_YYYYMM=‘01501’O)
SUBSTR(MDCARE_STRT_YYYYMM,1,4)=‘015’X)
MDCARE_STRT_YYYYMM LIKE ‘015%’X)
MDCARE_STRT_YYYYMM BETWEEN ‘01501’AND ‘01512’X)	 
*/

/* 2023년_전문위원_전체테이블레이아웃_권한목록_220417.xlsx 이 자료 참고해서
DB랑 테이블 목록 검토해서 이용하기*/

/*hana 용량체크*/
PROC SQL; 
&CONNECT.;
SELECT * FROM CONNECTION TO X1(CALL SP_USER_SIZE('NHIS_Z23013')); DISCONNECT FROM X1; QUIT;

/*데이터 지우기*/
PROC SQL;DROP TABLE SAPTMP.파일명; QUIT;

LIBNAME A '/AMDATA05/EXPERT23/HA_EUNHEE/OJM' COMPRESS=YES;;

/*사망 테이블 조회*/
PROC SQL;
&CONNECT.;
CREATE TABLE DTH AS SELECT * FROM CONNECTION TO X1(
SELECT TOP 10* FROM NHISBDA.HHDV_DEATH);
DISCONNECT FROM X1; QUIT;

/*연구 대상자 정의*/
/*
스키마: NHISBDA 테이블: HHDV_DSES_YY(인구사회경제수준(연별)) 
소아 대상자 추출하기 (산모 & 연계 자료 이용하는건 추후 고려하기 )
테이블: HHDV_MOTHER_CHILD_LINK(산모신생아연결)
성조숙중: 남아 만 9세 이전  / 여아 만 8세 이전 발생하는 경우 (정의상 이렇지만 이후 연령에도 발생하는 경우 존재)
enroll시점은 동일하게 하고 (노출시점도 맞추고 event 발생만 고려하면 될듯) 

2007~2009년 0세인 아이들로 수정 / 3개년 대상자 관찰
2013: 6세 2014: 6세 2015: 6세
*/
PROC SQL; &CONNECT.; CREATE TABLE POP13 AS SELECT * FROM CONNECTION TO X1 (SELECT * FROM NHISBDA.HHDV_DSES_YY WHERE STD_YYYY=2013 and YEND_STD_AGE=6); DISCONNECT FROM X1; QUIT;
PROC SQL; &CONNECT.; CREATE TABLE POP14 AS SELECT * FROM CONNECTION TO X1 (SELECT * FROM NHISBDA.HHDV_DSES_YY WHERE STD_YYYY=2014 and YEND_STD_AGE=6); DISCONNECT FROM X1; QUIT;
PROC SQL; &CONNECT.; CREATE TABLE POP15 AS SELECT * FROM CONNECTION TO X1 (SELECT * FROM NHISBDA.HHDV_DSES_YY WHERE STD_YYYY=2015 and YEND_STD_AGE=6); DISCONNECT FROM X1; QUIT;

%macro pop(data);
data a.&data.; set &data.;  
SIDO=SUBSTR(RVSN_ADDR_CD,1,2);
SGG =SUBSTR(RVSN_ADDR_CD,1,5);
keep STD_YYYY INDI_DSCM_NO SEX_TYPE BYEAR YEND_STD_AGE GAIBJA_TYPE RVSN_ADDR_CD SES05 SIDO SGG FOREIGNER_Y; run;
DATA saptmp.&data.; set a.&data; run;
%mend;
%pop(pop13);%pop(pop14);%pop(pop15)
/********************************************************************************************************************************************/

/* 2009년 0세인 아이 (2015년 6세(baseline) 시점) 추출한 대상자 타겟 */
DATA TG; SET saptmp.pop13-saptmp.pop15; keep indi_dscm_no; RUN;
proc sort data=TG nodupkey out=TG; by indi_dscm_no; run;
DATA SAPTMP.TG; SET TG; RUN;

DATA POP13; SET SAPTMP.pop13;run;
DATA POP14; SET SAPTMP.pop14;run;
DATA POP15; SET SAPTMP.pop15;run;

data pop; set pop13-pop15; run;
data saptmp.pop; set pop; run;

/*연도별 성별*/
proc freq ddata=pop; tables std_yyyy*sex_type/list; run;

/*외국인 빈도*/
proc freq data=pop; tables FOREIGNER_Y; run; /*6,162*/

PROC SQL;
&CONNECT.;
CREATE TABLE WORK AS SELECT * FROM CONNECTION TO X1(
SELECT TOP 10* FROM NHISBASE.HBMV_TBGJME60);
DISCONNECT FROM X1; QUIT;

data z; set saptmp.PP_T20; year=substr(mdcare_strt_yyyymm,1,4); run;
proc freq data=z; tables year; run;

/********************************************************************************************************************************************/
/*상병 자료에서 Precocious puberty 추출 하기 */
PROC SQL; 
&CONNECT.;
CREATE TABLE PP_T20 AS SELECT * FROM CONNECTION TO X1(
SELECT * FROM NHISBASE.HBMV_TBGJME20
WHERE INDI_DSCM_NO IN (SELECT INDI_DSCM_NO FROM TG) AND HIRA_EXM_YYYYMM<='202301'
AND PAY_YN='1'
AND FORM_CD IN ('02','03')
AND MDCARE_STRT_YYYYMM IN 
('200701','200702','200703','200704','200705','200706','200707','200708','200709','200710','200711','200712',
'200801','200802','200803','200804','200805','200806','200807','200808','200809','200810','200811','200812',
'200901','200902','200903','200904','200905','200906','200907','200908','200909','200910','200911','200912',
'201001','201002','201003','201004','201005','201006','201007','201008','201009','201010','201011','201012',
'201101','201102','201103','201104','201105','201106','201107','201108','201109','201110','201111','201112',
'201201','201202','201203','201204','201205','201206','201207','201208','201209','201210','201211','201212',
'201301','201302','201303','201304','201305','201306','201307','201308','201309','201310','201311','201312',
'201401','201402','201403','201404','201405','201406','201407','201408','201409','201410','201411','201412',
'201501','201502','201503','201504','201505','201506','201507','201508','201509','201510','201511','201512',
'201601','201602','201603','201604','201605','201606','201607','201608','201609','201610','201611','201612',
'201701','201702','201703','201704','201705','201706','201707','201708','201709','201710','201711','201712',
'201801','201802','201803','201804','201805','201806','201807','201808','201809','201810','201811','201812',
'201901','201902','201903','201904','201905','201906','201907','201908','201909','201910','201911','201912',
'202001','202002','202003','202004','202005','202006','202007','202008','202009','202010','202011','202012',
'202101','202102','202103','202104','202105','202106','202107','202108','202109','202110','202111','202112',
'202201','202202','202203','202204','202205','202206','202207','202208','202209','202210','202211','202212')
 AND INDI_DSCM_NO <>0
 AND INDI_DSCM_NO IS NOT NULL
 AND INDI_DSCM_NO <90000000 AND

 /*주, 부1-4 상병*/
(LEFT(SICK_SYM1,4)='E228' OR LEFT(SICK_SYM1,4)='E301' OR LEFT(SICK_SYM1,4)='E309') OR
(LEFT(SICK_SYM2,4)='E228' OR LEFT(SICK_SYM2,4)='E301' OR LEFT(SICK_SYM2,4)='E309') OR
(LEFT(SICK_SYM3,4)='E228' OR LEFT(SICK_SYM3,4)='E301' OR LEFT(SICK_SYM3,4)='E309') OR
(LEFT(SICK_SYM4,4)='E228' OR LEFT(SICK_SYM4,4)='E301' OR LEFT(SICK_SYM4,4)='E309') OR
(LEFT(SICK_SYM5,4)='E228' OR LEFT(SICK_SYM5,4)='E301' OR LEFT(SICK_SYM5,4)='E309'))
;
DISCONNECT FROM X1; QUIT;


/*T20 테이블 대상자 검토; 아이디 무효 제거 연구기간 2009~2019 해당 의과 외래, 입원만 고려 주, 부1상병만 고려 */
DATA PP_T20_REVISE; SET PP_T20; 
IF INDI_DSCM_NO^="." & INDI_DSCM_NO^=0;
YYYY=SUBSTR(MDCARE_STRT_DT,1,4);
IF YYYY>=2007 & YYYY<=2022;
IF FORM_CD IN ("02","03");
IF SUBSTR(LEFT(SICK_SYM1),1,4) IN ("E228","E301","E309") OR 
   SUBSTR(LEFT(SICK_SYM2),1,4) IN ("E228","E301","E309") ;
RUN;
PROC SQL; CREATE TABLE PP_T20_TG AS SELECT * FROM PP_T20_REVISE WHERE INDI_DSCM_NO IN (SELECT INDI_DSCM_NO FROM TG); QUIT;


PROC FREQ DATA=PP_T20_TG; TABLES YYYY; RUN;
PROC FREQ DATA=PP_T20_TG; TABLES FORM_CD; RUN;
/*T20에서 식별되는 고유 대상자 (Precocious puberty)*/
PROC SORT DATA=PP_T20_TG NODUPKEY OUT=PP_T20_INDI ; BY INDI_DSCM_NO; RUN;
DATA PP_T20_INDI; SET PP_T20_INDI; KEEP INDI_DSCM_NO; RUN;

/*PP_T20 자료 SAPTMP 옮김*/
DATA SAPTMP.PP_T20; SET PP_T20_TG; RUN;
DATA PP_T20; SET SAPTMP.PP_T20;RUN;

/*PP_T20_INDI 자료 SAPTMP 옮김: PP 식별되는 고유 대상자*/
data saptmp.PP_T20_INDI; set PP_T20_INDI; run;

data a.pp_t20; set SAPTMP.PP_T20; RUN;
data a.pp_t20_indi; set SAPTMP.PP_T20_INDI; RUN;
data a.TG; set SAPTMP.TG; RUN;

/********************************************************************************************************************************************/
/*T30테이블이랑 연구기간 동안 PP(성조숙증) 코드 존재하는 대상 연계 */
/*T30에서 약제 추리기 PP대상자에 대한 모든 처치 내역 식별*/
%MACRO MONTHLY(STRT, STP);
%DO YYYYMM=&STRT. %TO &STP.;
	%IF %SUBSTR(&YYYYMM, 5)=13 %THEN 
           %LET YYYYMM=%EVAL(%SUBSTR(&YYYYMM,1,4)+1)01;
PROC SQL; &CONNECT.;
CREATE TABLE A.T30_&YYYYMM. AS
SELECT 
CMN_KEY, MDCARE_STRT_YYYYMM, HIRA_EXM_YYYYMM, SICK_SYM1,SICK_SYM2, FORM_CD, PAY_YN, INDI_DSCM_NO, MCARE_DIV_CD_NM, MCARE_DIV_CD
FROM CONNECTION TO X1
(SELECT * FROM NHISBASE.HBMV_TBGJME30 AS A INNER JOIN PP_T20_INDI AS B ON A.INDI_DSCM_NO=B.INDI_DSCM_NO
	WHERE A.MDCARE_STRT_YYYYMM = %nrbquote('&YYYYMM.') 
	AND A.PAY_YN='1' 
    AND A.FORM_CD IN ('02','03')
	AND A.INDI_DSCM_NO <> 0  
    AND A.INDI_DSCM_NO IS NOT NULL 
    AND A.INDI_DSCM_NO < 90000000 ); 
DISCONNECT FROM X1; QUIT;
%END; %MEND MONTHLY;
%MONTHLY(STRT=200701, STP=202212);

/*연구기간 동안 PP 상병코드 존재하는 대상 중 T30 연계한 대상 연도별 MERGE=> SAPTMP 옮김*/
DATA SAPTMP.PP_T30_2007; SET A.T30_200701-A.T30_200712; RUN; DATA SAPTMP.PP_T30_2008; SET A.T30_200801-A.T30_200812; RUN;
DATA SAPTMP.PP_T30_2009; SET A.T30_200901-A.T30_200912; RUN; DATA SAPTMP.PP_T30_2010; SET A.T30_201001-A.T30_201012; RUN;
DATA SAPTMP.PP_T30_2011; SET A.T30_201101-A.T30_201112; RUN; DATA SAPTMP.PP_T30_2012; SET A.T30_201201-A.T30_201212; RUN;
DATA SAPTMP.PP_T30_2013; SET A.T30_201301-A.T30_201312; RUN; DATA SAPTMP.PP_T30_2014; SET A.T30_201401-A.T30_201412; RUN;
DATA SAPTMP.PP_T30_2015; SET A.T30_201501-A.T30_201512; RUN; DATA SAPTMP.PP_T30_2016; SET A.T30_201601-A.T30_201612; RUN;
DATA SAPTMP.PP_T30_2017; SET A.T30_201701-A.T30_201712; RUN; DATA SAPTMP.PP_T30_2018; SET A.T30_201801-A.T30_201812; RUN;
DATA SAPTMP.PP_T30_2019; SET A.T30_201901-A.T30_201912; RUN; DATA SAPTMP.PP_T30_2020; SET A.T30_202001-A.T30_202012; RUN;
DATA SAPTMP.PP_T30_2021; SET A.T30_202101-A.T30_202112; RUN; DATA SAPTMP.PP_T30_2022; SET A.T30_202201-A.T30_202212; RUN;

/********************************************************************************************************************************************/
/********************************************************************************************************************************************/
/*T30: 약제코드 존재하는 대상 식별*/
DATA A.PP_T30_DRUG_2007; SET SAPTMP.PP_T30_2007; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN;
DATA A.PP_T30_DRUG_2008; SET SAPTMP.PP_T30_2008; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN;
DATA A.PP_T30_DRUG_2009; SET SAPTMP.PP_T30_2009; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T30_DRUG_2010; SET SAPTMP.PP_T30_2010; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN;
DATA A.PP_T30_DRUG_2011; SET SAPTMP.PP_T30_2011; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN;
DATA A.PP_T30_DRUG_2012; SET SAPTMP.PP_T30_2012; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T30_DRUG_2013; SET SAPTMP.PP_T30_2013; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T30_DRUG_2014; SET SAPTMP.PP_T30_2014; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T30_DRUG_2015; SET SAPTMP.PP_T30_2015; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T30_DRUG_2016; SET SAPTMP.PP_T30_2016; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T30_DRUG_2017; SET SAPTMP.PP_T30_2017; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T30_DRUG_2018; SET SAPTMP.PP_T30_2018; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T30_DRUG_2019; SET SAPTMP.PP_T30_2019; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN;
DATA A.PP_T30_DRUG_2020; SET SAPTMP.PP_T30_2020; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T30_DRUG_2021; SET SAPTMP.PP_T30_2021; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T30_DRUG_2022; SET SAPTMP.PP_T30_2022; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 

/*2007~2022년간 T30에서 연구 대상자 (3년치) PP약제 사용 MERGE*/
DATA A.PP_T30_DRUG; SET A.PP_T30_DRUG_2007-A.PP_T30_DRUG_2022; RUN; 
PROC SORT DATA=A.PP_T30_DRUG; BY INDI_DSCM_NO MDCARE_STRT_YYYYMM; RUN;
PROC SORT DATA=A.PP_T30_DRUG NODUPKEY OUT=A.PP_T30_DRUG_INDI; BY INDI_DSCM_NO; RUN;  /*43,026*/


PROC FREQ DATA=A.PP_T30_DRUG; TABLES MCARE_DIV_CD FORM_CD; RUN;

/*해당 약제에 어떤 상병이 주로 많은지 검토 E301(1순위) E228 (2순위)*/
PROC FREQ DATA=A.PP_T30_DRUG      ; TABLES SICK_SYM1; RUN;
PROC FREQ DATA=A.PP_T30_DRUG_INDI; TABLES SICK_SYM1; RUN;

/********************************************************************************************************************************************/
/*약제코드 존재하는 대상 식별*/
%MACRO MONTHLY_T60(STRT, STP);
%DO YYYYMM=&STRT. %TO &STP.;
	%IF %SUBSTR(&YYYYMM, 5)=13 %THEN 
           %LET YYYYMM=%EVAL(%SUBSTR(&YYYYMM,1,4)+1)01;
PROC SQL; &CONNECT.;
CREATE TABLE A.T60_&YYYYMM. AS
SELECT 
CMN_KEY,INDI_DSCM_NO, SICK_SYM1,SICK_SYM2,MDCARE_STRT_YYYYMM,MDCARE_STRT_DT,MCARE_DESC_LN_NO, CLSF_PTTN_CD,GNL_NM_CD,MCARE_DIV_CD,MCARE_DIV_CD_NM
FROM CONNECTION TO X1
(SELECT * FROM NHISBASE.HBMV_TBGJME60 AS A INNER JOIN PP_T20_INDI AS B ON A.INDI_DSCM_NO=B.INDI_DSCM_NO
	WHERE A.MDCARE_STRT_YYYYMM = %nrbquote('&YYYYMM.') 
	AND A.PAY_YN='1' 
    AND A.FORM_CD IN ('02','03')
	AND A.INDI_DSCM_NO <> 0  
    AND A.INDI_DSCM_NO IS NOT NULL 
    AND A.INDI_DSCM_NO < 90000000 ); 
DISCONNECT FROM X1; QUIT;
%END; %MEND MONTHLY;
%MONTHLY_T60(STRT=200701, STP=202212);

/*연구기간 동안 PP 상병코드 존재하는 대상 중 T30 연계한 대상 연도별 MERGE=> SAPTMP 옮김*/
DATA SAPTMP.PP_T60_2007; SET A.T60_200701-A.T60_200712; RUN; DATA SAPTMP.PP_T60_2008; SET A.T60_200801-A.T60_200812; RUN;
DATA SAPTMP.PP_T60_2009; SET A.T60_200901-A.T60_200912; RUN; DATA SAPTMP.PP_T60_2010; SET A.T60_201001-A.T60_201012; RUN;
DATA SAPTMP.PP_T60_2011; SET A.T60_201101-A.T60_201112; RUN; DATA SAPTMP.PP_T60_2012; SET A.T60_201201-A.T60_201212; RUN;
DATA SAPTMP.PP_T60_2013; SET A.T60_201301-A.T60_201312; RUN; DATA SAPTMP.PP_T60_2014; SET A.T60_201401-A.T60_201412; RUN;
DATA SAPTMP.PP_T60_2015; SET A.T60_201501-A.T60_201512; RUN; DATA SAPTMP.PP_T60_2016; SET A.T60_201601-A.T60_201612; RUN;
DATA SAPTMP.PP_T60_2017; SET A.T60_201701-A.T60_201712; RUN; DATA SAPTMP.PP_T60_2018; SET A.T60_201801-A.T60_201812; RUN;
DATA SAPTMP.PP_T60_2019; SET A.T60_201901-A.T60_201912; RUN; DATA SAPTMP.PP_T60_2020; SET A.T60_202001-A.T60_202012; RUN;
DATA SAPTMP.PP_T60_2021; SET A.T60_202101-A.T60_202112; RUN; DATA SAPTMP.PP_T60_2022; SET A.T60_202201-A.T60_202212; RUN;

/*T60: 약제코드 존재하는 대상 식별*/
/*PP대상자중 0~10세까지 고려했으니 저 연령에서 약제 0건인건 이해감, 주로 6세 이후 많을 듯
  그 이전에 해당 약제사용은 다른 기질적인 원인의 PP이거나, 다른 질환에서 약제가 고려되었을것으로 보임 */
DATA A.PP_T60_DRUG_2007; SET SAPTMP.PP_T60_2007; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T60_DRUG_2008; SET SAPTMP.PP_T60_2008; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T60_DRUG_2009; SET SAPTMP.PP_T60_2009; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T60_DRUG_2010; SET SAPTMP.PP_T60_2010; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T60_DRUG_2011; SET SAPTMP.PP_T60_2011; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN;
DATA A.PP_T60_DRUG_2012; SET SAPTMP.PP_T60_2012; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T60_DRUG_2013; SET SAPTMP.PP_T60_2013; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T60_DRUG_2014; SET SAPTMP.PP_T60_2014; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T60_DRUG_2015; SET SAPTMP.PP_T60_2015; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T60_DRUG_2016; SET SAPTMP.PP_T60_2016; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T60_DRUG_2017; SET SAPTMP.PP_T60_2017; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T60_DRUG_2018; SET SAPTMP.PP_T60_2018; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T60_DRUG_2019; SET SAPTMP.PP_T60_2019; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T60_DRUG_2020; SET SAPTMP.PP_T60_2020; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T60_DRUG_2021; SET SAPTMP.PP_T60_2021; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 
DATA A.PP_T60_DRUG_2022; SET SAPTMP.PP_T60_2022; IF MCARE_DIV_CD IN ("182602BIJ","182604BIJ","182611BIJ","244902BIJ","467501BIJ","467502BIJ"); RUN; 

DATA A.PP_T60_DRUG; SET A.PP_T60_DRUG_2007-A.PP_T60_DRUG_2022; RUN;  /*2,583*/
PROC SORT DATA=A.PP_T60_DRUG; BY INDI_DSCM_NO MDCARE_STRT_YYYYMM; RUN;
PROC SORT DATA=A.PP_T60_DRUG NODUPKEY OUT=A.PP_T60_DRUG_INDI; BY INDI_DSCM_NO; RUN; /*350명*/

/*T30, T60대상자 중 PP 약제 식별되는 사람 => SAPTMP 옮김*/
DATA SAPTMP.PP_T30_DRUG; SET A.PP_T30_DRUG; RUN;
DATA SAPTMP.PP_T60_DRUG; SET A.PP_T60_DRUG; RUN;

PROC FREQ DATA=SAPTMP.PP_T60_DRUG; TABLES MCARE_DIV_CD ; RUN; 

/********************************************************************************************************************************************/
/********************************************************************************************************************************************/
/*기저 질환자 추출해서 제외, 우선 넓게 뽑고 뒤에가서 정리*/
%MACRO MONTHLY_T40(STRT, STP);
%DO YYYYMM=&STRT. %TO &STP.;
	%IF %SUBSTR(&YYYYMM, 5)=13 %THEN 
           %LET YYYYMM=%EVAL(%SUBSTR(&YYYYMM,1,4)+1)01;
PROC SQL; &CONNECT.;
CREATE TABLE A.T40_&YYYYMM. AS
SELECT * 
FROM CONNECTION TO X1
(SELECT * FROM NHISBASE.HBMV_TBGJME40 AS A INNER JOIN PP_T20_INDI AS B ON A.INDI_DSCM_NO=B.INDI_DSCM_NO
	WHERE A.MDCARE_STRT_YYYYMM = %nrbquote('&YYYYMM.') 
   AND A.PAY_YN='1' 
   AND A.FORM_CD IN ('02', '03', '07', '08', '09', '10', '11', '15')
   AND A.INDI_DSCM_NO <> 0 
   AND A.INDI_DSCM_NO IS NOT NULL 
   AND A.INDI_DSCM_NO < 90000000 
); DISCONNECT FROM X1; QUIT;
%END; %MEND ;
%MONTHLY_T40(STRT=200701, STP=201512);

DATA A.T40_2007; SET A.T40_200701-A.T40_200712; KEEP MDCARE_STRT_YYYYMM MCEX_SICK_SYM INDI_DSCM_NO;RUN;
DATA A.T40_2008; SET A.T40_200801-A.T40_200812; KEEP MDCARE_STRT_YYYYMM MCEX_SICK_SYM INDI_DSCM_NO;RUN;
DATA A.T40_2009; SET A.T40_200901-A.T40_200912; KEEP MDCARE_STRT_YYYYMM MCEX_SICK_SYM INDI_DSCM_NO;RUN;
DATA A.T40_2010; SET A.T40_201001-A.T40_201012; KEEP MDCARE_STRT_YYYYMM MCEX_SICK_SYM INDI_DSCM_NO;RUN;
DATA A.T40_2011; SET A.T40_201101-A.T40_201112; KEEP MDCARE_STRT_YYYYMM MCEX_SICK_SYM INDI_DSCM_NO;RUN;
DATA A.T40_2012; SET A.T40_201201-A.T40_201212; KEEP MDCARE_STRT_YYYYMM MCEX_SICK_SYM INDI_DSCM_NO;RUN;
DATA A.T40_2013; SET A.T40_201301-A.T40_201312; KEEP MDCARE_STRT_YYYYMM MCEX_SICK_SYM INDI_DSCM_NO;RUN;
DATA A.T40_2014; SET A.T40_201401-A.T40_201412; KEEP MDCARE_STRT_YYYYMM MCEX_SICK_SYM INDI_DSCM_NO;RUN;

/*기저 질환자 식별: 신생아 감염, 뇌혈관질환, 수막염, 외상송 뇌손상, 수두증*/
DATA POP_DIS_EX; SET A.t40_2007-A.T40_2014;
IF SUBSTR(MCEX_SICK_SYM,1,4) IN ('P350','D332') OR 
   SUBSTR(MCEX_SICK_SYM,1,3) IN ('P91','I60','I61','I62','I63','I64','G00','G03','G91','S06') OR
   SUBSTR(MCEX_SICK_SYM,1,1) IN ('C');
DIS_YEAR=SUBSTR(MDCARE_STRT_YYYYMM,1,4);
DROP MDCARE_STRT_YYYYMM;
RUN;
PROC SORT DATA=POP_DIS_EX; BY INDI_DSCM_NO DIS_YEAR; RUN;
PROC SORT DATA=POP_DIS_EX NODUPKEY; BY INDI_DSCM_NO; RUN; /*24,642인데, 각 기저시점에 맞게 고려 */

DATA A.POP_DIS_EX; SET POP_DIS_EX; RUN;
DATA SAPTMP.POP_DIS_EX; SET POP_DIS_EX; RUN;

/********************************************************************************************************************************************/
/********************************************************************************************************************************************/
/*정리한 대상자중 자료 가져오기 */
/*T20, T30, T60 먼저 연계하고 정리 후에 자격 자료 붙이기*/

DATA PP_T20;  RETAIN REMAIN YYYY;SET SAPTMP.PP_T20; 
KEEP YYYY CMN_KEY INDI_DSCM_NO MDCARE_STRT_YYYYMM MDCARE_STRT_DT ; RUN;
PROC SORT DATA= PP_T20; BY INDI_DSCM_NO MDCARE_STRT_DT; RUN;

/*EVENT1: 상병코드만 고려시 event 발생 대상자 (N=47,568)*/
PROC SORT DATA=PP_T20 NODUPKEY OUT=PP_EVENT1 ; BY INDI_DSCM_NO; RUN;

DATA PP_T30_DRUG_CMN_KEY; SET A.PP_T30_DRUG; T30_DRUG=1; KEEP CMN_KEY T30_DRUG; RUN;
DATA PP_T60_DRUG_CMN_KEY; SET A.PP_T60_DRUG; T60_DRUG=1; KEEP CMN_KEY T60_DRUG; RUN;

PROC SORT DATA=PP_T30_DRUG_CMN_KEY NODUPKEY; BY CMN_KEY; RUN;
PROC SORT DATA=PP_T60_DRUG_CMN_KEY NODUPKEY; BY CMN_KEY; RUN;

PROC SQL; CREATE TABLE PP_T20_T30 AS SELECT * FROM PP_T20 AS A LEFT JOIN PP_T30_DRUG_CMN_KEY AS B ON A.CMN_KEY=B.CMN_KEY; QUIT;
PROC SQL; CREATE TABLE PP_T20_T30_T60 AS SELECT * FROM PP_T20_T30 AS A LEFT JOIN PP_T60_DRUG_CMN_KEY AS B ON A.CMN_KEY=B.CMN_KEY; QUIT;

PROC SORT DATA=PP_T20_T30_T60; BY INDI_DSCM_NO MDCARE_STRT_DT; RUN;

/*EVENT2: 상병코드+약제 */
DATA PP_T20_T30_T60; SET PP_T20_T30_T60;
IF T30_DRUG="." THEN T30_DRUG=0; 
IF T60_DRUG="." THEN T60_DRUG=0;
IF T30_DRUG+T60_DRUG>=1 THEN DRUG=1 ; ELSE DRUG=0;
IF DRUG=1; 
RUN;

/*EVENT1: 상병코드만 고려시 event 발생 대상자 (N=5,353)*/
PROC SORT DATA= PP_T20_T30_T60 NODUPKEY OUT=PP_EVENT2; BY INDI_DSCM_NO; RUN;


DATA PP_EVENT1_REV; SET PP_EVENT1;
RENAME MDCARE_STRT_DT=EVENT1_DATE;
KEEP INDI_DSCM_NO MDCARE_STRT_DT; RUN;

DATA PP_EVENT2_REV; SET PP_EVENT2;
RENAME MDCARE_STRT_DT=EVENT2_DATE;
KEEP INDI_DSCM_NO MDCARE_STRT_DT; RUN;

/*연구대상자 자격이랑 연계 */
PROC SQL; CREATE TABLE A.DAT AS SELECT * FROM A.POP AS A LEFT JOIN PP_EVENT1_REV AS B ON A.INDI_DSCM_NO=B.INDI_DSCM_NO; QUIT;
PROC SQL; CREATE TABLE A.DAT AS SELECT * FROM A.DAT AS A LEFT JOIN PP_EVENT2_REV AS B ON A.INDI_DSCM_NO=B.INDI_DSCM_NO; QUIT;

DATA DAT; SET A.DAT; RUN;

/********************************************************************************************************************************************/
/********************************************************************************************************************************************/
/*사망자료 (5,024)*/
PROC SQL;&CONNECT.; CREATE TABLE DTH AS SELECT * FROM CONNECTION TO X1(SELECT * FROM NHISBDA.HHDV_DEATH where byear BETWEEN 2007 AND 2009); DISCONNECT FROM X1; QUIT;

/*2007~2009년 출생자 중 2013~2019년 사이 사망한 대상 (n=902); 식별; time 계산시 고려해주기 */
data dth; set dth;
dth_year=substr(dth_assmd_dt,1,4);
dth_age=dth_year-byear;
if dth_year>=2013 & dth_year<=2019;
drop byear sex_type; run;
DATA SAPTMP.DTH; SET DTH; RUN;

DATA DTH; SET SAPTMP.DTH; RUN;

/********************************************************************************************************************************************/
/********************************************************************************************************************************************/
/*영유아 검진1-7차 조회*/
PROC SQL; &CONNECT.;CREATE TABLE A.GQ1 AS SELECT EXMD_BZ_YYYY, INDI_DSCM_NO, HME_DT, I1Q_BTH_DATE, I1Q_BTH_WGHT
FROM CONNECTION TO X1 (SELECT * FROM NHISBDA.HMDV_I1Q_RST WHERE EXMD_BZ_YYYY>=2007); DISCONNECT FROM X1; QUIT;
PROC SQL; &CONNECT.;CREATE TABLE A.GQ2 AS SELECT EXMD_BZ_YYYY, INDI_DSCM_NO, HME_DT, I2Q_BTH_DATE, I2Q_BTH_WGHT
FROM CONNECTION TO X1 (SELECT * FROM NHISBDA.HMDV_I2Q_RST WHERE EXMD_BZ_YYYY>=2007); DISCONNECT FROM X1; QUIT;
PROC SQL; &CONNECT.;CREATE TABLE A.GQ3 AS SELECT EXMD_BZ_YYYY, INDI_DSCM_NO, HME_DT, I3Q_BTH_DATE, I3Q_BTH_WGHT
FROM CONNECTION TO X1 (SELECT * FROM NHISBDA.HMDV_I3Q_RST WHERE EXMD_BZ_YYYY>=2007); DISCONNECT FROM X1; QUIT;
PROC SQL; &CONNECT.;CREATE TABLE A.GQ4 AS SELECT EXMD_BZ_YYYY, INDI_DSCM_NO, HME_DT, I4Q_BTH_DATE, I4Q_BTH_WGHT
FROM CONNECTION TO X1 (SELECT * FROM NHISBDA.HMDV_I4Q_RST WHERE EXMD_BZ_YYYY>=2007); DISCONNECT FROM X1; QUIT;
PROC SQL; &CONNECT.;CREATE TABLE A.GQ5 AS SELECT EXMD_BZ_YYYY, INDI_DSCM_NO, HME_DT, I5Q_BTH_DATE, I5Q_BTH_WGHT
FROM CONNECTION TO X1 (SELECT * FROM NHISBDA.HMDV_I5Q_RST WHERE EXMD_BZ_YYYY>=2007); DISCONNECT FROM X1; QUIT;
PROC SQL; &CONNECT.;CREATE TABLE A.GQ6 AS SELECT EXMD_BZ_YYYY, INDI_DSCM_NO, HME_DT, I6Q_BTH_DATE, I6Q_BTH_WGHT
FROM CONNECTION TO X1 (SELECT * FROM NHISBDA.HMDV_I6Q_RST WHERE EXMD_BZ_YYYY>=2007); DISCONNECT FROM X1; QUIT;
PROC SQL; &CONNECT.;CREATE TABLE A.GQ7 AS SELECT EXMD_BZ_YYYY, INDI_DSCM_NO, HME_DT, I7Q_BTH_DATE, I7Q_BTH_WGHT
FROM CONNECTION TO X1 (SELECT * FROM NHISBDA.HMDV_I7Q_RST WHERE EXMD_BZ_YYYY>=2007); DISCONNECT FROM X1; QUIT;

/*출생시 체중 응답체크한 기록 이용하여 출생시 체중변수 이용*/
DATA A.GQ1; SET A.GQ1; KEEP INDI_DSCM_NO I1Q_BTH_WGHT; RUN;
DATA A.GQ2; SET A.GQ2; KEEP INDI_DSCM_NO I2Q_BTH_WGHT; RUN;
DATA A.GQ3; SET A.GQ3; KEEP INDI_DSCM_NO I3Q_BTH_WGHT; RUN;
DATA A.GQ4; SET A.GQ4; KEEP INDI_DSCM_NO I4Q_BTH_WGHT; RUN;
DATA A.GQ5; SET A.GQ5; KEEP INDI_DSCM_NO I5Q_BTH_WGHT; RUN;
DATA A.GQ6; SET A.GQ6; KEEP INDI_DSCM_NO I6Q_BTH_WGHT; RUN;
DATA A.GQ7; SET A.GQ7; KEEP INDI_DSCM_NO I7Q_BTH_WGHT; RUN;

DATA SAPTMP.GQ1; SET A.GQ1; RUN;
DATA SAPTMP.GQ2; SET A.GQ2; RUN;
DATA SAPTMP.GQ3; SET A.GQ3; RUN;
DATA SAPTMP.GQ4; SET A.GQ4; RUN;
DATA SAPTMP.GQ5; SET A.GQ5; RUN;
DATA SAPTMP.GQ6; SET A.GQ6; RUN;
DATA SAPTMP.GQ7; SET A.GQ7; RUN;

DATA POP; SET a.pop; KEEP INDI_DSCM_NO; RUN;
PROC SQL; CREATE TABLE POP_GQ AS SELECT * FROM POP AS A LEFT JOIN A.GQ1 AS B ON A.INDI_DSCM_NO = B.INDI_DSCM_NO; QUIT;
PROC SQL; CREATE TABLE POP_GQ AS SELECT * FROM POP_GQ AS A LEFT JOIN A.GQ2 AS B ON A.INDI_DSCM_NO = B.INDI_DSCM_NO; QUIT;
PROC SQL; CREATE TABLE POP_GQ AS SELECT * FROM POP_GQ AS A LEFT JOIN A.GQ3 AS B ON A.INDI_DSCM_NO = B.INDI_DSCM_NO; QUIT;
PROC SQL; CREATE TABLE POP_GQ AS SELECT * FROM POP_GQ AS A LEFT JOIN A.GQ4 AS B ON A.INDI_DSCM_NO = B.INDI_DSCM_NO; QUIT;
PROC SQL; CREATE TABLE POP_GQ AS SELECT * FROM POP_GQ AS A LEFT JOIN A.GQ5 AS B ON A.INDI_DSCM_NO = B.INDI_DSCM_NO; QUIT;
PROC SQL; CREATE TABLE POP_GQ AS SELECT * FROM POP_GQ AS A LEFT JOIN A.GQ6 AS B ON A.INDI_DSCM_NO = B.INDI_DSCM_NO; QUIT;
PROC SQL; CREATE TABLE POP_GQ AS SELECT * FROM POP_GQ AS A LEFT JOIN A.GQ7 AS B ON A.INDI_DSCM_NO = B.INDI_DSCM_NO; QUIT;

data POP_GQ; SET POP_GQ;
/*1-7차 검진 응답시 평균치 쓰기 (이상값 제외 후)*/
IF I1Q_BTH_WGHT=0  OR I1Q_BTH_WGHT>6 THEN I1Q_BTH_WGHT=.;
IF I2Q_BTH_WGHT=0  OR I2Q_BTH_WGHT>6 THEN I2Q_BTH_WGHT=.;
IF I3Q_BTH_WGHT=0  OR I3Q_BTH_WGHT>6 THEN I3Q_BTH_WGHT=.;
IF I4Q_BTH_WGHT=0  OR I4Q_BTH_WGHT>6 THEN I4Q_BTH_WGHT=.;
IF I5Q_BTH_WGHT=0  OR I5Q_BTH_WGHT>6 THEN I5Q_BTH_WGHT=.;
IF I6Q_BTH_WGHT=0  OR I6Q_BTH_WGHT>6 THEN I6Q_BTH_WGHT=.;
IF I7Q_BTH_WGHT=0  OR I7Q_BTH_WGHT>6 THEN I7Q_BTH_WGHT=.;
BW=MEAN(I1Q_BTH_WGHT,I2Q_BTH_WGHT,I3Q_BTH_WGHT,I4Q_BTH_WGHT,I5Q_BTH_WGHT,I6Q_BTH_WGHT,I7Q_BTH_WGHT);
IF BW^=".";
KEEP INDI_DSCM_NO BW LBW; 
RUN;

PROC SQL; CREATE TABLE POP_GQ_REV AS SELECT INDI_DSCM_NO, AVG(BW) AS BW FROM POP_GQ GROUP BY INDI_DSCM_NO; QUIT;
DATA POP_GQ_REV ; SET POP_GQ_REV ; IF BW<2.5 THEN LBW=1; ELSE LBW=0; RUN;
DATA A.POP_GQ_REV; SET POP_GQ_REV; RUN;
DATA SAPTMP.POP_GQ_REV; SET POP_GQ_REV; RUN;

PROC SQL; CREATE TABLE A.DAT AS SELECT * FROM A.DAT AS A LEFT JOIN DTH AS B ON A.INDI_DSCM_NO=B.INDI_DSCM_NO; QUIT;
PROC SQL; CREATE TABLE A.DAT AS SELECT * FROM A.DAT AS A LEFT JOIN A.POP_GQ_REV AS B ON A.INDI_DSCM_NO=B.INDI_DSCM_NO; QUIT;

/********************************************************************************************************************************************/
/********************************************************************************************************************************************/

/*거주지, 출생시 체중, 결측 제외, 외국인인 경우 제외*/
DATA A.DAT; SET A.DAT;
IF EVENT1_DATE^="." & EVENT1_DATE^="" THEN EVENT1=1; ELSE EVENT1=0; /*상병코드 기준 first onset*/
IF EVENT2_DATE^="." & EVENT2_DATE^="" THEN EVENT2=1; ELSE EVENT2=0; /*상병코드+약제 기준 first onset*/
EVENT1_AGE=SUBSTR(EVENT1_DATE,1,4)-BYEAR;
EVENT2_AGE=SUBSTR(EVENT2_DATE,1,4)-BYEAR;
IF EVENT1=1 THEN EVENT1_Year=SUBSTR(EVENT1_DATE,1,4);
IF EVENT1=1 THEN EVENT1_Mon=SUBSTR(EVENT1_DATE,5,2);
IF EVENT2=1 THEN EVENT2_Year=SUBSTR(EVENT2_DATE,1,4);
IF EVENT2=1 THEN EVENT2_Mon=SUBSTR(EVENT2_DATE,5,2);

/*TIME은 연월별로 고려*/
IF EVENT1=1 THEN EVENT1_TIME=(EVENT1_YEAR-STD_YYYY)*12+EVENT1_MON; ELSE EVENT1_TIME=60;
IF EVENT2=1 THEN EVENT2_TIME=(EVENT2_YEAR-STD_YYYY)*12+EVENT2_MON; ELSE EVENT2_TIME=60;

/*중간에 사망하는 경우 고려해줌*/
IF EVENT1=0 & DTH_YEAR^="" THEN EVENT1_TIME=(dth_year-STD_YYYY)*12+SUBSTR(DTH_ASSMD_DT,5,2);
IF EVENT2=0 & DTH_YEAR^="" THEN EVENT2_TIME=(dth_year-STD_YYYY)*12+SUBSTR(DTH_ASSMD_DT,5,2);

/*41195, 41197, 41199 => 41190 경기 부천시 */
/*48123, 48125, 48127 => 48121 창원시 */
/*
41730: 여주군 -> 41670
43710: 청원군 -> 43114

41463 -> 41461 (용인시)
41171 -> 41173 (안양시)
45190 -> 45180
*/
IF SGG=41195 THEN SGG=41190;
IF SGG=41197 THEN SGG=41190;
IF SGG=41199 THEN SGG=41190;
IF SGG=48123 THEN SGG=48121;
IF SGG=48125 THEN SGG=48121;
IF SGG=48127 THEN SGG=48121;

IF SGG=41730 THEN SGG=41670;
IF SGG=43710 THEN SGG=43114;
IF SGG=41463 THEN SGG=41461;
IF SGG=41171 THEN SGG=41173;
IF SGG=45190 THEN SGG=45180;

if FOREIGNER_Y^="Y"; /*외국인 제외*/
IF BW^=".";
IF STD_YYYY=2013 THEN KEY=COMPRESS("201301")||("-")||COMPRESS(SGG); 
IF STD_YYYY=2014 THEN KEY=COMPRESS("201401")||("-")||COMPRESS(SGG); 
IF STD_YYYY=2015 THEN KEY=COMPRESS("201501")||("-")||COMPRESS(SGG); 
RUN;

/*자료 복사*/
DATA SAPTMP.DAT; SET A.DAT; RUN;
Data DAT; SET A.DAT; RUN;

PROC FREQ DATA=DAT; TABLES STD_YYYY*SEX_TYPE/LIST; RUN;

DATA DAT_M; SET DAT; IF SEX_TYPE=1; RUN;
DATA DAT_F; SET DAT; IF SEX_TYPE=2; RUN;

DATA D13; SET DAT; IF STD_YYYY=2013; RUN;
DATA D14; SET DAT; IF STD_YYYY=2014; RUN;
DATA D15; SET DAT; IF STD_YYYY=2015; RUN;

PROC FREQ DATA=D13; TABLES EVENT1_AGE*EVENT1/LIST; RUN;
PROC FREQ DATA=D13; TABLES EVENT2_AGE*EVENT2/LIST; RUN;
PROC FREQ DATA=D14; TABLES EVENT1_AGE*EVENT1/LIST; RUN;
PROC FREQ DATA=D14; TABLES EVENT2_AGE*EVENT2/LIST; RUN;
PROC FREQ DATA=D15; TABLES EVENT1_AGE*EVENT1/LIST; RUN;
PROC FREQ DATA=D15; TABLES EVENT2_AGE*EVENT2/LIST; RUN;

PROC FREQ DATA=DAT; TABLES EVENT1_AGE*EVENT1/LIST; RUN;
PROC FREQ DATA=DAT; TABLES EVENT2_AGE*EVENT2/LIST; RUN;


DATA D13_F; SET D13; IF SEX_TYPE=2; RUN;
DATA D14_F; SET D14; IF SEX_TYPE=2; RUN;
DATA D15_F; SET D15; IF SEX_TYPE=2; RUN;

PROC FREQ DATA=D13_F; TABLES EVENT1_AGE*EVENT1/LIST; RUN;
PROC FREQ DATA=D13_F; TABLES EVENT2_AGE*EVENT2/LIST; RUN;
PROC FREQ DATA=D14_F; TABLES EVENT1_AGE*EVENT1/LIST; RUN;
PROC FREQ DATA=D14_F; TABLES EVENT2_AGE*EVENT2/LIST; RUN;
PROC FREQ DATA=D15_F; TABLES EVENT1_AGE*EVENT1/LIST; RUN;
PROC FREQ DATA=D15_F; TABLES EVENT2_AGE*EVENT2/LIST; RUN;
/*****************************************************************************************************************************************/
/*****************************************************************************************************************************************/
/*정리한 자료 & 기저질환 자료 검토 */
PROC SQL; CREATE TABLE DAT2 AS SELECT * FROM DAT AS A LEFT JOIN A.POP_DIS_EX AS B ON A.INDI_DSCM_NO=B.INDI_DSCM_NO; QUIT;


DATA DAT2; SET DAT2; IF SES05^="" & SES05^="";IF SGG^=""; RUN;          /*거주지 정보 없는경우 제외*/
DATA DAT3; SET DAT2; IF DIS_YEAR=""  OR DIS_YEAR>=STD_YYYY ; RUN; /*기저시점 이전에 기저질환자 제외*/

/*6세 이전 성조숙증 발생 제외*/
DATA DAT3_1; SET DAT3; IF EVENT1=1 & EVENT1_AGE<6 THEN DELETE; RUN;
DATA DAT3_2; SET DAT3; IF EVENT2=1 & EVENT1_AGE<6 THEN DELETE; RUN;

PROC FREQ DATA=DAT2; TABLES STD_YYYY*SEX_TYPE/LIST; RUN;
PROC FREQ DATA=DAT3; TABLES STD_YYYY*SEX_TYPE/LIST; RUN;
PROC FREQ DATA=DAT3_1; TABLES STD_YYYY*SEX_TYPE/LIST; RUN;
PROC FREQ DATA=DAT3_2; TABLES STD_YYYY*SEX_TYPE/LIST; RUN;

PROC FREQ DATA=DAT3_1; TABLES EVENT1_AGE; RUN;
PROC FREQ DATA=DAT3_2; TABLES EVENT2_AGE; RUN;

PROC FREQ DATA=DAT3_1; TABLES EVENT1_TIME;RUN;
PROC FREQ DATA=DAT3_1; TABLES STD_YYYY ;RUN;

/*****************************************************************************************************************************************/
/*****************************************************************************************************************************************/
/*상병코드만 고려한 대상자 */
DATA D13_M_EVENT1; SET DAT3_1;
IF STD_YYYY=2013; IF SEX_TYPE=1;
IF EVENT1_YEAR>2017 THEN EVENT1=0;
IF EVENT1_YEAR>2017 THEN EVENT1_TIME=60;
IF EVENT1=1 THEN EVENT1_TIME=(EVENT1_YEAR-STD_YYYY)*12+EVENT1_MON; ELSE EVENT1_TIME=60;
IF EVENT1=0 & DTH_YEAR^="" THEN EVENT1_TIME=(dth_year-STD_YYYY)*12+SUBSTR(DTH_ASSMD_DT,5,2);
IF EVENT1=0 & DTH_YEAR^="" & EVENT1_TIME>60 THEN EVENT1_TIME=60;
RUN;
DATA D13_F_EVENT1; SET DAT3_1;
IF STD_YYYY=2013; IF SEX_TYPE=2;
IF EVENT1_YEAR>2016 THEN EVENT1=0;
IF EVENT1_YEAR>2016 THEN EVENT1_TIME=48;
IF EVENT1=1 THEN EVENT1_TIME=(EVENT1_YEAR-STD_YYYY)*12+EVENT1_MON; ELSE EVENT1_TIME=48; 
IF EVENT1=0 & DTH_YEAR^="" THEN EVENT1_TIME=(dth_year-STD_YYYY)*12+SUBSTR(DTH_ASSMD_DT,5,2);
IF EVENT1=0 & DTH_YEAR^="" & EVENT1_TIME>48 THEN EVENT1_TIME=48;
RUN;
DATA D14_M_EVENT1; SET DAT3_1;
IF STD_YYYY=2014; IF SEX_TYPE=1;
IF EVENT1_YEAR>2018 THEN EVENT1=0;
IF EVENT1_YEAR>2018 THEN EVENT1_TIME=60;
IF EVENT1=1 THEN EVENT1_TIME=(EVENT1_YEAR-STD_YYYY)*12+EVENT1_MON; ELSE EVENT1_TIME=60; 
IF EVENT1=0 & DTH_YEAR^="" THEN EVENT1_TIME=(dth_year-STD_YYYY)*12+SUBSTR(DTH_ASSMD_DT,5,2);
IF EVENT1=0 & DTH_YEAR^="" & EVENT1_TIME>60 THEN EVENT1_TIME=60;
RUN;
DATA D14_F_EVENT1; SET DAT3_1;
IF STD_YYYY=2014; IF SEX_TYPE=2;
IF EVENT1_YEAR>2017 THEN EVENT1=0;
IF EVENT1_YEAR>2017 THEN EVENT1_TIME=48;
IF EVENT1=1 THEN EVENT1_TIME=(EVENT1_YEAR-STD_YYYY)*12+EVENT1_MON; ELSE EVENT1_TIME=48;
IF EVENT1=0 & DTH_YEAR^="" THEN EVENT1_TIME=(dth_year-STD_YYYY)*12+SUBSTR(DTH_ASSMD_DT,5,2);
IF EVENT1=0 & DTH_YEAR^="" & EVENT1_TIME>48 THEN EVENT1_TIME=48;
RUN;
DATA D15_M_EVENT1; SET DAT3_1;
IF STD_YYYY=2015; IF SEX_TYPE=1;
IF EVENT1_YEAR>2019 THEN EVENT1=0;
IF EVENT1_YEAR>2019 THEN EVENT1_TIME=60;
IF EVENT1=1 THEN EVENT1_TIME=(EVENT1_YEAR-STD_YYYY)*12+EVENT1_MON; ELSE EVENT1_TIME=60; 
IF EVENT1=0 & DTH_YEAR^="" THEN EVENT1_TIME=(dth_year-STD_YYYY)*12+SUBSTR(DTH_ASSMD_DT,5,2);
IF EVENT1=0 & DTH_YEAR^="" & EVENT1_TIME>60 THEN EVENT1_TIME=60;
RUN;
DATA D15_F_EVENT1; SET DAT3_1;
IF STD_YYYY=2015; IF SEX_TYPE=2;
IF EVENT1_YEAR>2018 THEN EVENT1=0;
IF EVENT1_YEAR>2018 THEN EVENT1_TIME=48;
IF EVENT1=1 THEN EVENT1_TIME=(EVENT1_YEAR-STD_YYYY)*12+EVENT1_MON; ELSE EVENT1_TIME=48; 
IF EVENT1=0 & DTH_YEAR^="" THEN EVENT1_TIME=(dth_year-STD_YYYY)*12+SUBSTR(DTH_ASSMD_DT,5,2);
IF EVENT1=0 & DTH_YEAR^="" & EVENT1_TIME>48 THEN EVENT1_TIME=48;
RUN;

/*상병+약제 고려한 대상자 */
DATA D13_M_EVENT2; SET DAT3_2;
IF STD_YYYY=2013; IF SEX_TYPE=1;
IF EVENT2_YEAR>2017 THEN EVENT2=0;
IF EVENT2_YEAR>2017 THEN EVENT2_TIME=60;
IF EVENT2=1 THEN EVENT2_TIME=(EVENT2_YEAR-STD_YYYY)*12+EVENT2_MON; ELSE EVENT2_TIME=60; 
IF EVENT2=0 & DTH_YEAR^="" THEN EVENT2_TIME=(dth_year-STD_YYYY)*12+SUBSTR(DTH_ASSMD_DT,5,2);
IF EVENT2=0 & DTH_YEAR^="" & EVENT2_TIME>60 THEN EVENT2_TIME=60;
RUN;
DATA D13_F_EVENT2; SET DAT3_2;
IF STD_YYYY=2013; IF SEX_TYPE=2;
IF EVENT2_YEAR>2016 THEN EVENT2=0;
IF EVENT2_YEAR>2016 THEN EVENT2_TIME=48;
IF EVENT2=1 THEN EVENT2_TIME=(EVENT2_YEAR-STD_YYYY)*12+EVENT2_MON; ELSE EVENT2_TIME=48; 
IF EVENT2=0 & DTH_YEAR^="" THEN EVENT2_TIME=(dth_year-STD_YYYY)*12+SUBSTR(DTH_ASSMD_DT,5,2);
IF EVENT2=0 & DTH_YEAR^="" & EVENT2_TIME>48 THEN EVENT2_TIME=48;
RUN;
DATA D14_M_EVENT2; SET DAT3_2;
IF STD_YYYY=2014; IF SEX_TYPE=1;
IF EVENT2_YEAR>2018 THEN EVENT2=0;
IF EVENT2_YEAR>2018 THEN EVENT2_TIME=60;
IF EVENT2=1 THEN EVENT2_TIME=(EVENT2_YEAR-STD_YYYY)*12+EVENT2_MON; ELSE EVENT2_TIME=60;
IF EVENT2=0 & DTH_YEAR^="" THEN EVENT2_TIME=(dth_year-STD_YYYY)*12+SUBSTR(DTH_ASSMD_DT,5,2);
IF EVENT2=0 & DTH_YEAR^="" & EVENT2_TIME>60 THEN EVENT2_TIME=60;
RUN;
DATA D14_F_EVENT2; SET DAT3_2;
IF STD_YYYY=2014; IF SEX_TYPE=2;
IF EVENT2_YEAR>2017 THEN EVENT2=0;
IF EVENT2_YEAR>2017 THEN EVENT2_TIME=48;
IF EVENT2=1 THEN EVENT2_TIME=(EVENT2_YEAR-STD_YYYY)*12+EVENT2_MON; ELSE EVENT2_TIME=48;
IF EVENT2=0 & DTH_YEAR^="" THEN EVENT2_TIME=(dth_year-STD_YYYY)*12+SUBSTR(DTH_ASSMD_DT,5,2);
IF EVENT2=0 & DTH_YEAR^="" & EVENT2_TIME>48 THEN EVENT2_TIME=48;
RUN;
DATA D15_M_EVENT2; SET DAT3_2;
IF STD_YYYY=2015; IF SEX_TYPE=1;
IF EVENT2_YEAR>2019 THEN EVENT2=0;
IF EVENT2_YEAR>2019 THEN EVENT2_TIME=60;
IF EVENT2=1 THEN EVENT2_TIME=(EVENT2_YEAR-STD_YYYY)*12+EVENT2_MON; ELSE EVENT2_TIME=60;
IF EVENT2=0 & DTH_YEAR^="" THEN EVENT2_TIME=(dth_year-STD_YYYY)*12+SUBSTR(DTH_ASSMD_DT,5,2);
IF EVENT2=0 & DTH_YEAR^="" & EVENT2_TIME>60 THEN EVENT2_TIME=60;
RUN;
DATA D15_F_EVENT2; SET DAT3_2;
IF STD_YYYY=2015; IF SEX_TYPE=2;
IF EVENT2_YEAR>2018 THEN EVENT2=0;
IF EVENT2_YEAR>2018 THEN EVENT2_TIME=48;
IF EVENT2=1 THEN EVENT2_TIME=(EVENT2_YEAR-STD_YYYY)*12+EVENT2_MON; ELSE EVENT2_TIME=48;
IF EVENT2=0 & DTH_YEAR^="" THEN EVENT2_TIME=(dth_year-STD_YYYY)*12+SUBSTR(DTH_ASSMD_DT,5,2);
IF EVENT2=0 & DTH_YEAR^="" & EVENT2_TIME>48 THEN EVENT2_TIME=48;
RUN;

DATA M_EVENT1; SET D13_M_EVENT1 D14_M_EVENT1 D15_M_EVENT1; RUN;
DATA F_EVENT1; SET D13_F_EVENT1 D14_F_EVENT1 D15_F_EVENT1; RUN;
DATA M_EVENT2; SET D13_M_EVENT2 D14_M_EVENT2 D15_M_EVENT2; RUN;
DATA F_EVENT2; SET D13_F_EVENT2 D14_F_EVENT2 D15_F_EVENT2; RUN;

PROC FREQ DATA=M_EVENT1; TABLES EVENT1_TIME EVENT1; RUN;
PROC FREQ DATA=M_EVENT2; TABLES EVENT2_TIME EVENT2; RUN;
PROC FREQ DATA=F_EVENT1; TABLES EVENT1_TIME EVENT1; RUN;
PROC FREQ DATA=F_EVENT2; TABLES EVENT2_TIME EVENT2; RUN;

DATA FINAL_DAT1; SET M_EVENT1 F_EVENT1; RUN;
DATA FINAL_DAT2; SET M_EVENT2 F_EVENT2; RUN;

/*DATA A.FINAL_DAT1; SET FINAL_DAT1; RUN; */
/*DATA A.FINAL_DAT2; SET FINAL_DAT2; RUN; */

data final_dat1; set a.final_dat1; run;
data final_dat2; set a.final_dat2; run;

data d1; set a.final_dat1;if sex_type=1; 
IF SGG=41730 THEN SGG=41670;
IF SGG=43710 THEN SGG=43114;
IF SGG=41463 THEN SGG=41461;
IF SGG=41171 THEN SGG=41173;
IF SGG=45190 THEN SGG=45180;
IF STD_YYYY=2013 THEN KEY=COMPRESS("201301")||("-")||COMPRESS(SGG); 
IF STD_YYYY=2014 THEN KEY=COMPRESS("201401")||("-")||COMPRESS(SGG); 
IF STD_YYYY=2015 THEN KEY=COMPRESS("201501")||("-")||COMPRESS(SGG); 
run;
data d2; set a.final_dat1;if sex_type=2; 
IF SGG=41730 THEN SGG=41670;
IF SGG=43710 THEN SGG=43114;
IF SGG=41463 THEN SGG=41461;
IF SGG=41171 THEN SGG=41173;
IF SGG=45190 THEN SGG=45180;
IF STD_YYYY=2013 THEN KEY=COMPRESS("201301")||("-")||COMPRESS(SGG); 
IF STD_YYYY=2014 THEN KEY=COMPRESS("201401")||("-")||COMPRESS(SGG); 
IF STD_YYYY=2015 THEN KEY=COMPRESS("201501")||("-")||COMPRESS(SGG); 
run;
data d3; set a.final_dat2;if sex_type=1; 
IF SGG=41730 THEN SGG=41670;
IF SGG=43710 THEN SGG=43114;
IF SGG=41463 THEN SGG=41461;
IF SGG=41171 THEN SGG=41173;
IF SGG=45190 THEN SGG=45180;
IF STD_YYYY=2013 THEN KEY=COMPRESS("201301")||("-")||COMPRESS(SGG); 
IF STD_YYYY=2014 THEN KEY=COMPRESS("201401")||("-")||COMPRESS(SGG); 
IF STD_YYYY=2015 THEN KEY=COMPRESS("201501")||("-")||COMPRESS(SGG); 
run;
data d4; set a.final_dat2;if sex_type=2; 
IF SGG=41730 THEN SGG=41670;
IF SGG=43710 THEN SGG=43114;
IF SGG=41463 THEN SGG=41461;
IF SGG=41171 THEN SGG=41173;
IF SGG=45190 THEN SGG=45180;
IF STD_YYYY=2013 THEN KEY=COMPRESS("201301")||("-")||COMPRESS(SGG); 
IF STD_YYYY=2014 THEN KEY=COMPRESS("201401")||("-")||COMPRESS(SGG); 
IF STD_YYYY=2015 THEN KEY=COMPRESS("201501")||("-")||COMPRESS(SGG); 
run;

/*연령별로 event 탐색 */
PROC FREQ DATA=d1; TABLES std_yyyy*event1/LIST; RUN;
PROC FREQ DATA=d2; TABLES std_yyyy*event1/LIST; RUN;
PROC FREQ DATA=d3; TABLES std_yyyy*event2/LIST; RUN;
PROC FREQ DATA=d4; TABLES std_yyyy*event2/LIST; RUN;

/*****************************************************************************************************************************************/
/*****************************************************************************************************************************************/
/*성별 event 발생 시간 요약통계*/
PROC MEANS DATA=D1 N MEAN STD MIN P1 P5 P10 P25 P50 P75 P90 P95 MAX ; VAR EVENT1_TIME; CLASS EVENT1; RUN;
PROC MEANS DATA=D2 N MEAN STD MIN P1 P5 P10 P25 P50 P75 P90 P95 MAX ; VAR EVENT1_TIME; CLASS EVENT1; RUN;
PROC MEANS DATA=D3 N MEAN STD MIN P1 P5 P10 P25 P50 P75 P90 P95 MAX ; VAR EVENT2_TIME; CLASS EVENT2; RUN;
PROC MEANS DATA=D4 N MEAN STD MIN P1 P5 P10 P25 P50 P75 P90 P95 MAX ; VAR EVENT2_TIME; CLASS EVENT2; RUN;

data zz; set d1; if DTH_ASSMD_DT^=""; if event1_time <60 ;run;

/*기상, 대기오염 노출 자료*/
DATA TEMP_1019; SET NHIS_SGG_TEMP;
KEEP NHIS_SGG YYYYMM YEAR MONTH mtemp_s0-mtemp_s48; RUN;

DATA TEMP_1019; SET TEMP_1019;
mtemp_m1=mean(of mtemp_s0-mtemp_s1);    mtemp_m2=mean(of mtemp_s0-mtemp_s2); 
mtemp_m3=mean(of mtemp_s0-mtemp_s3);    mtemp_m4=mean(of mtemp_s0-mtemp_s4); 
mtemp_m5=mean(of mtemp_s0-mtemp_s5);    mtemp_m6=mean(of mtemp_s0-mtemp_s6); 
mtemp_m7=mean(of mtemp_s0-mtemp_s7);    mtemp_m8=mean(of mtemp_s0-mtemp_s8); 
mtemp_m9=mean(of mtemp_s0-mtemp_s9);    mtemp_m10=mean(of mtemp_s0-mtemp_s10); 
mtemp_m11=mean(of mtemp_s0-mtemp_s11); mtemp_m12=mean(of mtemp_s0-mtemp_s12); 

mtemp_m13=mean(of mtemp_s0-mtemp_s13); mtemp_m14=mean(of mtemp_s0-mtemp_s14); 
mtemp_m15=mean(of mtemp_s0-mtemp_s15); mtemp_m16=mean(of mtemp_s0-mtemp_s16); 
mtemp_m17=mean(of mtemp_s0-mtemp_s17); mtemp_m18=mean(of mtemp_s0-mtemp_s18); 
mtemp_m19=mean(of mtemp_s0-mtemp_s19); mtemp_m20=mean(of mtemp_s0-mtemp_s20); 
mtemp_m21=mean(of mtemp_s0-mtemp_s21); mtemp_m22=mean(of mtemp_s0-mtemp_s22); 
mtemp_m23=mean(of mtemp_s0-mtemp_s23); mtemp_m24=mean(of mtemp_s0-mtemp_s24); 

mtemp_m25=mean(of mtemp_s0-mtemp_s25); mtemp_m26=mean(of mtemp_s0-mtemp_s26); 
mtemp_m27=mean(of mtemp_s0-mtemp_s27); mtemp_m28=mean(of mtemp_s0-mtemp_s28); 
mtemp_m29=mean(of mtemp_s0-mtemp_s29); mtemp_m30=mean(of mtemp_s0-mtemp_s30); 
mtemp_m31=mean(of mtemp_s0-mtemp_s31); mtemp_m32=mean(of mtemp_s0-mtemp_s32); 
mtemp_m33=mean(of mtemp_s0-mtemp_s33); mtemp_m34=mean(of mtemp_s0-mtemp_s34); 
mtemp_m35=mean(of mtemp_s0-mtemp_s35); mtemp_m36=mean(of mtemp_s0-mtemp_s36); 

mtemp_m37=mean(of mtemp_s0-mtemp_s37); mtemp_m38=mean(of mtemp_s0-mtemp_s38); 
mtemp_m39=mean(of mtemp_s0-mtemp_s39); mtemp_m40=mean(of mtemp_s0-mtemp_s40); 
mtemp_m41=mean(of mtemp_s0-mtemp_s41); mtemp_m42=mean(of mtemp_s0-mtemp_s42); 
mtemp_m43=mean(of mtemp_s0-mtemp_s43); mtemp_m44=mean(of mtemp_s0-mtemp_s44); 
mtemp_m45=mean(of mtemp_s0-mtemp_s45); mtemp_m46=mean(of mtemp_s0-mtemp_s46); 
mtemp_m47=mean(of mtemp_s0-mtemp_s47); mtemp_m48=mean(of mtemp_s0-mtemp_s48); 
run;

data a.temp_1019; set temp_1019; run;
data saptmp.temp_1019; set temp_1019; run;

DATA Z1; SET PM10_CMAQ_0619; SGG=SUBSTR(KEY,8,12); keep sgg; run;
DATA Z2; SET PM10_CMAQ_0619; SGG=SUBSTR(KEY,8,12); keep sgg; run;

proc sort data=z1 nodupkey; by sgg; run;
proc sort data=z2 nodupkey; by sgg; run;

/*인천 미추홀구  시군구 코드 안맞는거 찾아서 맞춰줌*/
DATA PM25_CMAQ_0619; SET SAPTMP.PM25_CMAQ_0619;RUN;
DATA PM10_CMAQ_0619; SET SAPTMP.PM10_CMAQ_0619; IF SUBSTR(KEY,8,12)=28177 THEN KEY=COMPRESS(SUBSTR(KEY,1,7))||COMPRESS(28170);RUN;
DATA SO2_CMAQ_0619; SET SAPTMP.SO2_CMAQ_0619; IF SUBSTR(KEY,8,12)=28177 THEN KEY=COMPRESS(SUBSTR(KEY,1,7))||COMPRESS(28170);RUN;
DATA NO2_CMAQ_0619; SET SAPTMP.NO2_CMAQ_0619;  IF SUBSTR(KEY,8,12)=28177 THEN KEY=COMPRESS(SUBSTR(KEY,1,7))||COMPRESS(28170);RUN;
DATA O3_CMAQ_0619; SET SAPTMP.O3_CMAQ_0619;  IF SUBSTR(KEY,8,12)=28177 THEN KEY=COMPRESS(SUBSTR(KEY,1,7))||COMPRESS(28170);RUN;


DATA PM25_CMAQ_0619; RETAIN KEY;SET PM25_CMAQ_0619;
IF NHIS_SGG=28177 THEN NHIS_SGG=28170;
KEY=COMPRESS(LEFT(YYYYMM))||("-")||COMPRESS(LEFT(NHIS_SGG)); 
DROP YYYYMM REF SGG NHIS_SGG LEVEL1 LEVEL2 LEVEL3; RUN;

/*Air pollution 자료 불러오기함 (파일-> 데이터 가져오기) CMAQ PM2.5 자료 (06~19)*/
/*DATA SAPTMP.PM25_CMAQ_0619; SET PM25_CMAQ_0619; RUN;*/

/*DATA SAPTMP.PM10_CMAQ_0619; SET PM10_CMAQ_0619; RUN;*/
/*DATA SAPTMP.SO2_CMAQ_0619; SET SO2_CMAQ_0619; RUN;*/
/*DATA SAPTMP.NO2_CMAQ_0619; SET NO2_CMAQ_0619; RUN;*/
/*DATA SAPTMP.O3_CMAQ_0619; SET O3_CMAQ_0619; RUN;*/

DATA TEMP_1019; RETAIN KEY; SET SAPTMP.temp_1019; 
IF NHIS_SGG=28177 THEN NHIS_SGG=28170;
IF MONTH <10 THEN MTH=COMPRESS(0)||COMPRESS(MONTH); ELSE MTH=COMPRESS(MONTH);
KEY=COMPRESS(LEFT(YEAR))||COMPRESS(MTH)||("-")||COMPRESS(LEFT(NHIS_SGG)); 
DROP YYYYMM YEAR MONTH NHIS_SGG MTH;
RUN;

/*노출자료 다 연계 해두기 */
PROC SQL; CREATE TABLE Exposure AS SELECT * FROM PM25_CMAQ_0619 AS A LEFT JOIN PM10_CMAQ_0619 AS B ON A.KEY=B.KEY; QUIT;
PROC SQL; CREATE TABLE Exposure AS SELECT * FROM Exposure AS A LEFT JOIN SO2_CMAQ_0619 AS B ON A.KEY=B.KEY; QUIT;
PROC SQL; CREATE TABLE Exposure AS SELECT * FROM Exposure AS A LEFT JOIN NO2_CMAQ_0619 AS B ON A.KEY=B.KEY; QUIT;
PROC SQL; CREATE TABLE Exposure AS SELECT * FROM Exposure AS A LEFT JOIN O3_CMAQ_0619 AS B ON A.KEY=B.KEY; QUIT;
PROC SQL; CREATE TABLE Exposure AS SELECT * FROM Exposure AS A LEFT JOIN TEMP_1019 AS B ON A.KEY=B.KEY; QUIT;

/*DATA SAPTMP.exposure; SET EXPOSURE; RUN;*/
/*DATA a.exposure; set exposure; run;*/

PROC SQL; CREATE TABLE A.D1 AS SELECT * FROM D1 AS A LEFT JOIN A.Exposure as B on a.key=b.key; quit;
PROC SQL; CREATE TABLE A.D2 AS SELECT * FROM D2 AS A LEFT JOIN A.Exposure as B on a.key=b.key; quit;
PROC SQL; CREATE TABLE A.D3 AS SELECT * FROM D3 AS A LEFT JOIN A.Exposure as B on a.key=b.key; quit;
PROC SQL; CREATE TABLE A.D4 AS SELECT * FROM D4 AS A LEFT JOIN A.Exposure as B on a.key=b.key; quit;

Proc means data=A.D1 N MEAN STD MIN P1 P5 P10 P25 P50 P75 P90 P95 MAX ; VAR bw; CLASS EVENt1; RUN;
Proc means data=A.D2 N MEAN STD MIN P1 P5 P10 P25 P50 P75 P90 P95 MAX ; VAR bw; CLASS EVENt1; RUN;
Proc means data=A.D3 N MEAN STD MIN P1 P5 P10 P25 P50 P75 P90 P95 MAX ; VAR bw; CLASS EVENt2; RUN;
Proc means data=A.D4 N MEAN STD MIN P1 P5 P10 P25 P50 P75 P90 P95 MAX ; VAR bw; CLASS EVENt2; RUN;

Proc means data=A.D1 N MEAN STD MIN P1 P5 P10 P25 P50 P75 P90 P95 MAX ; VAR PM25_M12 PM10_M12 SO2_M12 NO2_M12 O3_M12  mtemp_M12; CLASS EVENt1; RUN;
Proc means data=A.D2 N MEAN STD MIN P1 P5 P10 P25 P50 P75 P90 P95 MAX ; VAR PM25_M12 PM10_M12 SO2_M12 NO2_M12 O3_M12  mtemp_M12; CLASS EVENt1; RUN;
Proc means data=A.D3 N MEAN STD MIN P1 P5 P10 P25 P50 P75 P90 P95 MAX ; VAR PM25_M12 PM10_M12 SO2_M12 NO2_M12 O3_M12  mtemp_M12; CLASS EVENt2; RUN;
Proc means data=A.D4 N MEAN STD MIN P1 P5 P10 P25 P50 P75 P90 P95 MAX ; VAR PM25_M12 PM10_M12 SO2_M12 NO2_M12 O3_M12  mtemp_M12; CLASS EVENt2; RUN;


PROC FREQ DATA=A.D1; TABLES LBW*EVENT1/LIST; RUN;
PROC FREQ DATA=A.D2; TABLES LBW*EVENT1/LIST; RUN;
PROC FREQ DATA=A.D3; TABLES LBW*EVENT2/LIST; RUN;
PROC FREQ DATA=A.D4; TABLES LBW*EVENT2/LIST; RUN;

PROC FREQ DATA=A.D1; TABLES EVENT1*SIDO/LIST; RUN;
PROC FREQ DATA=A.D2; TABLES EVENT1*SIDO/LIST; RUN;
PROC FREQ DATA=A.D3; TABLES EVENT2*SIDO/LIST; RUN;
PROC FREQ DATA=A.D4; TABLES EVENT2*SIDO/LIST; RUN;

PROC FREQ DATA=A.D1; TABLES EVENT1*EVENT1_YEAR/LIST; RUN;
PROC FREQ DATA=A.D2; TABLES EVENT1*EVENT1_YEAR/LIST; RUN;
PROC FREQ DATA=A.D3; TABLES EVENT2*EVENT2_YEAR/LIST; RUN;
PROC FREQ DATA=A.D4; TABLES EVENT2*EVENT2_YEAR/LIST; RUN;

PROC FREQ DATA=A.D1; TABLES EVENT1*SES05/LIST; RUN;
PROC FREQ DATA=A.D2; TABLES EVENT1*SES05/LIST; RUN;
PROC FREQ DATA=A.D3; TABLES EVENT2*SES05/LIST; RUN;
PROC FREQ DATA=A.D4; TABLES EVENT2*SES05/LIST; RUN;

data a.dat1; set a.d1 a.d2; run;
data a.dat2; set a.d3 a.d4; run;

/*****************************************************************************************************************************************/
/*Cox PH model*/
/*Model1: Unadjusted model*/
%macro mod1(data,out,event,time,exp,exp_text);
proc phreg data=&data.; MODEL &time.*&event.(0)=&exp.;
ODS OUTPUT censoredsummary=re1; ODS OUTPUT Parameterestimates=re2; ODS OUTPUT Fitstatistics=re3; run;

data res ; set re2; if parameter in (&exp_text.); DROP LABEL; RUN;
PROC TRANSPOSE DATA=RE3 OUT=T_RE3; ID Criterion; VAR WithCovariates ; RUN;

DATA &out.; 
retain total event censored pctcens parameter estimate stderr probchisq hazardratio hr_lci hr_uci AIC SBC;
MERGE RE1 RE2 T_RE3; HR_LCI=EXP(Estimate-1.96*StdErr); HR_UCI=EXP(Estimate+1.96*StdErr); 
drop df chisq _name_ _label_;
RUN;
%mend;

/*Model2: Adjusted model: 보험가입자, 지역, 출생체중,*/
%macro mod2(data,out,event,time,exp,exp_text);
proc phreg data=&data.; 
CLASS SEX_TYPE  SES05 SIDO/ PARAM=REF REF=FIRST;
MODEL &time.*&event.(0)=&exp. SEX_TYPE  SES05 SIDO BW;
ODS OUTPUT censoredsummary=re1; ODS OUTPUT Parameterestimates=re2; ODS OUTPUT Fitstatistics=re3; run;

data res ; set re2; if parameter in (&exp_text.); DROP LABEL; RUN;
PROC TRANSPOSE DATA=RE3 OUT=T_RE3; ID Criterion; VAR WithCovariates ; RUN;

DATA &out.; 
retain total event censored pctcens parameter estimate stderr probchisq hazardratio hr_lci hr_uci AIC SBC;
MERGE RE1 RE2 T_RE3; HR_LCI=EXP(Estimate-1.96*StdErr); HR_UCI=EXP(Estimate+1.96*StdErr); 
drop df chisq _name_ _label_;
RUN;
%mend;

/*Model3: Adjusted model: 보험가입자, 지역, 출생체중, 기준년도, 연평균 기온*/
%macro mod3(data,out,event,time,exp,exp_text);
proc phreg data=&data.; 
CLASS STD_YYYY SEX_TYPE  SES05 SIDO/ PARAM=REF REF=FIRST;
MODEL &time.*&event.(0)=&exp. SEX_TYPE  SES05 SIDO BW STD_YYYY MTEMP_M12;
ODS OUTPUT censoredsummary=re1; ODS OUTPUT Parameterestimates=re2; ODS OUTPUT Fitstatistics=re3; run;

data res ; set re2; if parameter in (&exp_text.); DROP LABEL; RUN;
PROC TRANSPOSE DATA=RE3 OUT=T_RE3; ID Criterion; VAR WithCovariates ; RUN;

DATA &out.; 
retain total event censored pctcens parameter estimate stderr probchisq hazardratio hr_lci hr_uci AIC SBC;
MERGE RE1 RE2 T_RE3; HR_LCI=EXP(Estimate-1.96*StdErr); HR_UCI=EXP(Estimate+1.96*StdErr); 
drop df chisq _name_ _label_;
RUN;
%mend;

%mod1(A.D1,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod1(A.D1,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod1(A.D1,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod1(A.D1,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod1(A.D2,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod1(A.D2,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod1(A.D2,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod1(A.D2,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod1(A.D3,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod1(A.D3,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod1(A.D3,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod1(A.D3,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod1(A.D4,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod1(A.D4,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod1(A.D4,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod1(A.D4,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod1(a.Dat1,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod1(a.dat1,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod1(a.dat1,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod1(a.dat1,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod1(a.Dat2,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod1(a.dat2,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod1(a.dat2,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod1(a.dat2,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod1_RES; SET res1-res8;   IF TOTAL^=".";  RUN;

DATA mod1_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod1_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod1_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod1_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD1_RES; SET MOD1_RES1_M MOD1_RES1_F MOD1_RES2_M MOD1_RES2_F; RUN;

%mod2(A.D1,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod2(A.D1,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod2(A.D1,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod2(A.D1,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod2(A.D2,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod2(A.D2,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod2(A.D2,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod2(A.D2,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod2(A.D3,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod2(A.D3,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod2(A.D3,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod2(A.D3,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod2(A.D4,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod2(A.D4,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod2(A.D4,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod2(A.D4,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod2(a.Dat1,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod2(a.dat1,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod2(a.dat1,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod2(a.dat1,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod2(a.Dat2,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod2(a.dat2,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod2(a.dat2,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod2(a.dat2,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod2_RES; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod2_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  if total^="."; RUN;
DATA mod2_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4;  if total^="."; RUN;
DATA mod2_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4;  if total^="."; RUN;
DATA mod2_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4;  if total^="."; RUN;

DATA MOD2_RES; SET MOD2_RES1_M MOD2_RES1_F MOD2_RES2_M MOD2_RES2_F; RUN;


%mod3(A.D1,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod3(A.D1,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod3(A.D1,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod3(A.D1,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod3(A.D2,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod3(A.D2,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod3(A.D2,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod3(A.D2,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod3(A.D3,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod3(A.D3,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod3(A.D3,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod3(A.D3,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod3(A.D4,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod3(A.D4,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod3(A.D4,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod3(A.D4,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod3(a.Dat1,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod3(a.dat1,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod3(a.dat1,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod3(a.dat1,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod3(a.Dat2,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod3(a.dat2,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod3(a.dat2,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod3(a.dat2,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod3_RES; SET res1-res8;  IF TOTAL^=".";  RUN;


DATA mod3_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  if total^="."; RUN;
DATA mod3_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4;  if total^="."; RUN;
DATA mod3_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4;  if total^="."; RUN;
DATA mod3_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4;  if total^="."; RUN;

DATA MOD3_RES; SET MOD3_RES1_M MOD3_RES1_F MOD3_RES2_M MOD3_RES2_F; RUN;

proc freq data=a.d1; tables std_yyyy*event1/list; run;
proc freq data=a.d2; tables std_yyyy*event1/list; run;
proc freq data=a.d3; tables std_yyyy*event2/list; run;
proc freq data=a.d4; tables std_yyyy*event2/list; run;

proc freq data=a.d1; tables std_yyyy*event1_time/list; run;

/********************************************************************************************************************************************/
/*비례위험 가정 검토*/
/* PROC LIFETEST DATA=DAT1; TIME EVENT1_TIME*EVENT1(0); STRATA SEX_TYPE; RUN;*/
/* PROC LIFETEST DATA=DAT2; TIME EVENT2_TIME*EVENT2(0); STRATA SEX_TYPE; RUN;*/

/*비례위험 가정 검토 Schoenfeld 잔차*/
PROC PHREG DATA=z4; 
CLASS SEX_TYPE  SES05 SIDO/ PARAM=REF REF=FIRST;
MODEL event2_time*event2(0)=PM25_M12 SEX_TYPE  SES05 SIDO BW /RL;
OUTPUT OUT=SCHOEN RESSCH=PM25 SEX SES05 SIDO BW; RUN;

PROC PHREG DATA=z4; 
CLASS SEX_TYPE  SES05 SIDO/ PARAM=REF REF=FIRST;
MODEL event2_time*event2(0)=PM25_M12 SEX_TYPE  SES05 SIDO BW /RL;
RUN;

PROC PHREG DATA=z4; 
CLASS SEX_TYPE  SES05 SIDO/ PARAM=REF REF=FIRST;
MODEL event2_time*event2(0)=PM25_M48 SEX_TYPE  SES05 SIDO BW/ RL;
OUTPUT OUT=SCH RESSCH=PM25; RUN;
RUN;
/*자료가 커서 그림상 보기 힘듬 */
/* PROC LOESS DATA=SCH; MODEL PM25=EVENT2_TIME/SMOOTH=(0.2,0.4,0.6,0.8); RUN;*/
/*PROC SGPLOT DATA=SCH; LOESS X=EVENT2_TIME Y=PM25/CLM; RUN;*/

/*Spline항 포함한 뒤 노출 예측값 반환하기*/
proc means data=z1; var pm25_m12; run;
proc means data=z1; var pm25_m24; run;
proc means data=z1; var pm25_m36; run;
proc means data=z4; var pm25_m48; run;

ods select parameterestimates splineknots;
PROC PHREG DATA=z4; 
CLASS SEX_TYPE  SES05 SIDO/ PARAM=REF REF=FIRST;
effect spl=spline(PM25_M48/BASIS=TPF(NOINT) NATURALCUBIC DETAiLS KNOTMETHOD=PERCENTILES(3));
MODEL event2_time*event2(0)=SPL SEX_TYPE  SES05 SIDO BW / selection=none;
store out=spl;
output out=splineout ;
RUN;

%macro est(ref=11.5, start=11.5, end=33.2, by=0.1);
%do i=1 %to %eval(%sysfunc(Ceil(%sysevalf((&end-&start)/&by)))+1);
%let value=%sysevalf((&start-&by)+(&by*&i));
esimate"&value." spl[-1,&ref] [1,&value] /exp cl;
%END;
%mend est;
ODS HTML SELECT NONE;
ODS RTF SELECT NONE;
ODS DATASET estimates=spl;
proc plm restore=spl;
%est(ref=11.5, start=11.5 end=33.2, by=0.1); run;


/********************************************************************************************************************************************/
/********************************************************************************************************************************************/
/*PM10: 다른 대기오염물질*/
%mod1(A.D1,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod1(A.D1,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod1(A.D1,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod1(A.D1,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod1(A.D2,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod1(A.D2,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod1(A.D2,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod1(A.D2,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod1(A.D3,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod1(A.D3,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod1(A.D3,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod1(A.D3,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod1(A.D4,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod1(A.D4,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod1(A.D4,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod1(A.D4,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod1(a.Dat1,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod1(a.dat1,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod1(a.dat1,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod1(a.dat1,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod1(a.Dat2,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod1(a.dat2,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod1(a.dat2,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod1(a.dat2,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod1_RES_TOT; SET res1-res8;  RUN;

DATA mod1_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod1_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod1_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod1_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD1_RES; SET MOD1_RES1_M MOD1_RES1_F MOD1_RES2_M MOD1_RES2_F; RUN;

%mod2(A.D1,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod2(A.D1,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod2(A.D1,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod2(A.D1,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod2(A.D2,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod2(A.D2,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod2(A.D2,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod2(A.D2,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod2(A.D3,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod2(A.D3,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod2(A.D3,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod2(A.D3,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod2(A.D4,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod2(A.D4,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod2(A.D4,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod2(A.D4,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod2(a.Dat1,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod2(a.dat1,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod2(a.dat1,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod2(a.dat1,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod2(a.Dat2,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod2(a.dat2,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod2(a.dat2,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod2(a.dat2,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod2_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod2_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  if total^="."; RUN;
DATA mod2_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4;  if total^="."; RUN;
DATA mod2_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4;  if total^="."; RUN;
DATA mod2_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4;  if total^="."; RUN;

DATA MOD2_RES; SET MOD2_RES1_M MOD2_RES1_F MOD2_RES2_M MOD2_RES2_F; RUN;


%mod3(A.D1,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod3(A.D1,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod3(A.D1,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod3(A.D1,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod3(A.D2,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod3(A.D2,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod3(A.D2,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod3(A.D2,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod3(A.D3,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod3(A.D3,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod3(A.D3,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod3(A.D3,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod3(A.D4,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod3(A.D4,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod3(A.D4,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod3(A.D4,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod3(a.Dat1,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod3(a.dat1,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod3(a.dat1,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod3(a.dat1,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod3(a.Dat2,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod3(a.dat2,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod3(a.dat2,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod3(a.dat2,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod3_RES_TOT; SET res1-res8;  IF TOTAL^=".";  RUN;


DATA mod3_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  if total^="."; RUN;
DATA mod3_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4;  if total^="."; RUN;
DATA mod3_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4;  if total^="."; RUN;
DATA mod3_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4;  if total^="."; RUN;

DATA MOD3_RES; SET MOD3_RES1_M MOD3_RES1_F MOD3_RES2_M MOD3_RES2_F; RUN;

/********************************************************************************************************************************************/
/********************************************************************************************************************************************/
/*SO2: 다른 대기오염물질*/
%mod1(A.D1,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod1(A.D1,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod1(A.D1,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod1(A.D1,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod1(A.D2,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod1(A.D2,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod1(A.D2,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod1(A.D2,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod1(A.D3,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod1(A.D3,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod1(A.D3,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod1(A.D3,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod1(A.D4,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod1(A.D4,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod1(A.D4,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod1(A.D4,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod1(a.Dat1,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod1(a.dat1,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod1(a.dat1,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod1(a.dat1,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod1(a.Dat2,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod1(a.dat2,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod1(a.dat2,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod1(a.dat2,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod1_RES_TOT; SET res1-res8;  RUN;

DATA mod1_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod1_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod1_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod1_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD1_RES; SET MOD1_RES1_M MOD1_RES1_F MOD1_RES2_M MOD1_RES2_F; RUN;

%mod2(A.D1,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod2(A.D1,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod2(A.D1,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod2(A.D1,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod2(A.D2,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod2(A.D2,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod2(A.D2,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod2(A.D2,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod2(A.D3,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod2(A.D3,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod2(A.D3,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod2(A.D3,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod2(A.D4,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod2(A.D4,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod2(A.D4,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod2(A.D4,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod2(a.Dat1,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod2(a.dat1,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod2(a.dat1,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod2(a.dat1,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod2(a.Dat2,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod2(a.dat2,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod2(a.dat2,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod2(a.dat2,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod2_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod2_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  if total^="."; RUN;
DATA mod2_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4;  if total^="."; RUN;
DATA mod2_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4;  if total^="."; RUN;
DATA mod2_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4;  if total^="."; RUN;

DATA MOD2_RES; SET MOD2_RES1_M MOD2_RES1_F MOD2_RES2_M MOD2_RES2_F; RUN;


%mod3(A.D1,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod3(A.D1,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod3(A.D1,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod3(A.D1,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod3(A.D2,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod3(A.D2,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod3(A.D2,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod3(A.D2,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod3(A.D3,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod3(A.D3,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod3(A.D3,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod3(A.D3,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod3(A.D4,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod3(A.D4,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod3(A.D4,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod3(A.D4,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod3(a.Dat1,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod3(a.dat1,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod3(a.dat1,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod3(a.dat1,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod3(a.Dat2,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod3(a.dat2,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod3(a.dat2,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod3(a.dat2,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod3_RES_TOT; SET res1-res8;  IF TOTAL^=".";  RUN;


DATA mod3_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  if total^="."; RUN;
DATA mod3_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4;  if total^="."; RUN;
DATA mod3_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4;  if total^="."; RUN;
DATA mod3_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4;  if total^="."; RUN;

/********************************************************************************************************************************************/
/********************************************************************************************************************************************/
/*NO2: 다른 대기오염물질*/
%mod1(A.D1,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod1(A.D1,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod1(A.D1,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod1(A.D1,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod1(A.D2,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod1(A.D2,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod1(A.D2,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod1(A.D2,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod1(A.D3,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod1(A.D3,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod1(A.D3,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod1(A.D3,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod1(A.D4,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod1(A.D4,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod1(A.D4,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod1(A.D4,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod1(a.Dat1,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod1(a.dat1,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod1(a.dat1,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod1(a.dat1,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod1(a.Dat2,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod1(a.dat2,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod1(a.dat2,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod1(a.dat2,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod1_RES_TOT; SET res1-res8;  RUN;

DATA mod1_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod1_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod1_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod1_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD1_RES; SET MOD1_RES1_M MOD1_RES1_F MOD1_RES2_M MOD1_RES2_F; RUN;

%mod2(A.D1,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod2(A.D1,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod2(A.D1,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod2(A.D1,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod2(A.D2,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod2(A.D2,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod2(A.D2,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod2(A.D2,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod2(A.D3,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod2(A.D3,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod2(A.D3,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod2(A.D3,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod2(A.D4,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod2(A.D4,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod2(A.D4,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod2(A.D4,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod2(a.Dat1,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod2(a.dat1,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod2(a.dat1,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod2(a.dat1,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod2(a.Dat2,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod2(a.dat2,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod2(a.dat2,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod2(a.dat2,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod2_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod2_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  if total^="."; RUN;
DATA mod2_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4;  if total^="."; RUN;
DATA mod2_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4;  if total^="."; RUN;
DATA mod2_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4;  if total^="."; RUN;

DATA MOD2_RES; SET MOD2_RES1_M MOD2_RES1_F MOD2_RES2_M MOD2_RES2_F; RUN;


%mod3(A.D1,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod3(A.D1,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod3(A.D1,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod3(A.D1,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod3(A.D2,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod3(A.D2,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod3(A.D2,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod3(A.D2,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod3(A.D3,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod3(A.D3,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod3(A.D3,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod3(A.D3,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod3(A.D4,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod3(A.D4,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod3(A.D4,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod3(A.D4,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod3(a.Dat1,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod3(a.dat1,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod3(a.dat1,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod3(a.dat1,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod3(a.Dat2,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod3(a.dat2,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod3(a.dat2,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod3(a.dat2,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod3_RES_TOT; SET res1-res8;  IF TOTAL^=".";  RUN;


DATA mod3_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  if total^="."; RUN;
DATA mod3_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4;  if total^="."; RUN;
DATA mod3_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4;  if total^="."; RUN;
DATA mod3_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4;  if total^="."; RUN;

DATA MOD3_RES; SET MOD3_RES1_M MOD3_RES1_F MOD3_RES2_M MOD3_RES2_F; RUN;
/********************************************************************************************************************************************/
/********************************************************************************************************************************************/
/*O3: 다른 대기오염물질*/
%mod1(A.D1,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod1(A.D1,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod1(A.D1,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod1(A.D1,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod1(A.D2,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod1(A.D2,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod1(A.D2,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod1(A.D2,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod1(A.D3,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod1(A.D3,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod1(A.D3,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod1(A.D3,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod1(A.D4,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod1(A.D4,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod1(A.D4,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod1(A.D4,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod1(a.Dat1,res1,event2,event2_time,O3_M12,"O3_M12");
%mod1(a.dat1,res2,event2,event2_time,O3_M24,"O3_M24");
%mod1(a.dat1,res3,event2,event2_time,O3_M36,"O3_M36");
%mod1(a.dat1,res4,event2,event2_time,O3_M48,"O3_M48");
%mod1(a.Dat2,res5,event2,event2_time,O3_M12,"O3_M12");
%mod1(a.dat2,res6,event2,event2_time,O3_M24,"O3_M24");
%mod1(a.dat2,res7,event2,event2_time,O3_M36,"O3_M36");
%mod1(a.dat2,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod1_RES_TOT; SET res1-res8;  RUN;

DATA mod1_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod1_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod1_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod1_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD1_RES; SET MOD1_RES1_M MOD1_RES1_F MOD1_RES2_M MOD1_RES2_F; RUN;

%mod2(A.D1,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod2(A.D1,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod2(A.D1,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod2(A.D1,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod2(A.D2,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod2(A.D2,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod2(A.D2,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod2(A.D2,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod2(A.D3,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod2(A.D3,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod2(A.D3,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod2(A.D3,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod2(A.D4,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod2(A.D4,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod2(A.D4,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod2(A.D4,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod2(a.Dat1,res1,event2,event2_time,O3_M12,"O3_M12");
%mod2(a.dat1,res2,event2,event2_time,O3_M24,"O3_M24");
%mod2(a.dat1,res3,event2,event2_time,O3_M36,"O3_M36");
%mod2(a.dat1,res4,event2,event2_time,O3_M48,"O3_M48");
%mod2(a.Dat2,res5,event2,event2_time,O3_M12,"O3_M12");
%mod2(a.dat2,res6,event2,event2_time,O3_M24,"O3_M24");
%mod2(a.dat2,res7,event2,event2_time,O3_M36,"O3_M36");
%mod2(a.dat2,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod2_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod2_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  if total^="."; RUN;
DATA mod2_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4;  if total^="."; RUN;
DATA mod2_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4;  if total^="."; RUN;
DATA mod2_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4;  if total^="."; RUN;

DATA MOD2_RES; SET MOD2_RES1_M MOD2_RES1_F MOD2_RES2_M MOD2_RES2_F; RUN;


%mod3(A.D1,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod3(A.D1,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod3(A.D1,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod3(A.D1,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod3(A.D2,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod3(A.D2,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod3(A.D2,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod3(A.D2,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod3(A.D3,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod3(A.D3,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod3(A.D3,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod3(A.D3,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod3(A.D4,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod3(A.D4,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod3(A.D4,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod3(A.D4,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod3(a.Dat1,res1,event2,event2_time,O3_M12,"O3_M12");
%mod3(a.dat1,res2,event2,event2_time,O3_M24,"O3_M24");
%mod3(a.dat1,res3,event2,event2_time,O3_M36,"O3_M36");
%mod3(a.dat1,res4,event2,event2_time,O3_M48,"O3_M48");
%mod3(a.Dat2,res5,event2,event2_time,O3_M12,"O3_M12");
%mod3(a.dat2,res6,event2,event2_time,O3_M24,"O3_M24");
%mod3(a.dat2,res7,event2,event2_time,O3_M36,"O3_M36");
%mod3(a.dat2,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod3_RES_TOT; SET res1-res8;  IF TOTAL^=".";  RUN;


DATA mod3_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  if total^="."; RUN;
DATA mod3_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4;  if total^="."; RUN;
DATA mod3_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4;  if total^="."; RUN;
DATA mod3_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4;  if total^="."; RUN;

DATA MOD3_RES; SET MOD3_RES1_M MOD3_RES1_F MOD3_RES2_M MOD3_RES2_F; RUN;

/********************************************************************************************************************************************/
/********************************************************************************************************************************************/
/*내보내기*/
DATA DD1; SET A.D1; 
KEEP STD_YYYY INDI_DSCM_NO YEND_STD_AGE GAIBJA_TYPE SES05 SIDO SGG BW LBW EVENT1 EVENT2 EVENT1_TIME EVENT2_TIME KEY 
PM25_M12 PM25_M24 PM25_M36 PM25_M48 PM10_M12 PM10_M24 PM10_M36 PM10_M48
SO2_M12 SO2_M24 SO2_M36 SO2_M48 NO2_M12 NO2_M24 NO2_M36 NO2_M48
O3_M12 O3_M24 O3_M36 O3_M48 MTEMP_M12 MTEMP_M24 MTEMP_M36 MTEMP_M48; RUN;
 DATA DD2; SET A.D2;
KEEP STD_YYYY INDI_DSCM_NO YEND_STD_AGE GAIBJA_TYPE SES05 SIDO SGG BW LBW EVENT1 EVENT2 EVENT1_TIME EVENT2_TIME KEY 
PM25_M12 PM25_M24 PM25_M36 PM25_M48 PM10_M12 PM10_M24 PM10_M36 PM10_M48
SO2_M12 SO2_M24 SO2_M36 SO2_M48 NO2_M12 NO2_M24 NO2_M36 NO2_M48
O3_M12 O3_M24 O3_M36 O3_M48 MTEMP_M12 MTEMP_M24 MTEMP_M36 MTEMP_M48; RUN;
 DATA DD3; SET A.D3;
KEEP STD_YYYY INDI_DSCM_NO YEND_STD_AGE GAIBJA_TYPE SES05 SIDO SGG BW LBW EVENT1 EVENT2 EVENT1_TIME EVENT2_TIME KEY 
PM25_M12 PM25_M24 PM25_M36 PM25_M48 PM10_M12 PM10_M24 PM10_M36 PM10_M48
SO2_M12 SO2_M24 SO2_M36 SO2_M48 NO2_M12 NO2_M24 NO2_M36 NO2_M48
O3_M12 O3_M24 O3_M36 O3_M48 MTEMP_M12 MTEMP_M24 MTEMP_M36 MTEMP_M48; RUN;
 DATA DD4; SET A.D4; 
KEEP STD_YYYY INDI_DSCM_NO YEND_STD_AGE GAIBJA_TYPE SES05 SIDO SGG BW LBW EVENT1 EVENT2 EVENT1_TIME EVENT2_TIME KEY 
PM25_M12 PM25_M24 PM25_M36 PM25_M48 PM10_M12 PM10_M24 PM10_M36 PM10_M48
SO2_M12 SO2_M24 SO2_M36 SO2_M48 NO2_M12 NO2_M24 NO2_M36 NO2_M48
O3_M12 O3_M24 O3_M36 O3_M48 MTEMP_M12 MTEMP_M24 MTEMP_M36 MTEMP_M48; RUN;

/********************************************************************************************************************************************/
/*저체중아 구분해서 분석 */
PROC FREQ DATA=A.D1; TABLES LBW; RUN;

DATA A.D1_LBW0; SET A.D1; IF LBW=0; RUN;
DATA A.D1_LBW1; SET A.D1; IF LBW=1; RUN;

DATA A.D2_LBW0; SET A.D2; IF LBW=0; RUN;
DATA A.D2_LBW1; SET A.D2; IF LBW=1; RUN;

DATA A.D3_LBW0; SET A.D3; IF LBW=0; RUN;
DATA A.D3_LBW1; SET A.D3; IF LBW=1; RUN;

DATA A.D4_LBW0; SET A.D4; IF LBW=0; RUN;
DATA A.D4_LBW1; SET A.D4; IF LBW=1; RUN;

DATA A.Dat1_LBW0; SET A.Dat1; IF LBW=0; RUN;
DATA A.Dat1_LBW1; SET A.Dat1; IF LBW=1; RUN;
DATA A.Dat2_LBW0; SET A.Dat2; IF LBW=0; RUN;
DATA A.Dat2_LBW1; SET A.Dat2; IF LBW=1; RUN;
/********************************************************************************************************************************************/
%mod3(A.D1_LBW0,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod3(A.D1_LBW0,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod3(A.D1_LBW0,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod3(A.D1_LBW0,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod3(A.D2_LBW0,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod3(A.D2_LBW0,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod3(A.D2_LBW0,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod3(A.D2_LBW0,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod3(A.D3_LBW0,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod3(A.D3_LBW0,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod3(A.D3_LBW0,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod3(A.D3_LBW0,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod3(A.D4_LBW0,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod3(A.D4_LBW0,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod3(A.D4_LBW0,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod3(A.D_LBW04,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod3(a.Dat1_LBW0,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod3(a.dat1_LBW0,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod3(a.dat1_LBW0,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod3(a.dat1_LBW0,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod3(a.Dat2_LBW0,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod3(a.dat2_LBW0,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod3(a.dat2_LBW0,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod3(a.dat2_LBW0,res8,event2,event2_time,PM25_M48,"PM25_M48");

DATA LBW0_RES_tot; SET res1-res8;  IF TOTAL^=".";  RUN;

DATA LBW0_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  if total^="."; RUN;
DATA LBW0_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4;  if total^="."; RUN;
DATA LBW0_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4;  if total^="."; RUN;
DATA LBW0_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4;  if total^="."; RUN;

DATA LBW0_RES; SET LBW0_RES1_M LBW0_RES1_F LBW0_RES2_M LBW0_RES2_F; RUN;

%mod3(A.D1_LBW1,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod3(A.D1_LBW1,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod3(A.D1_LBW1,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod3(A.D1_LBW1,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod3(A.D2_LBW1,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod3(A.D2_LBW1,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod3(A.D2_LBW1,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod3(A.D2_LBW1,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod3(A.D3_LBW1,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod3(A.D3_LBW1,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod3(A.D3_LBW1,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod3(A.D3_LBW1,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod3(A.D4_LBW1,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod3(A.D4_LBW1,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod3(A.D4_LBW1,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod3(A.D4_LBW1,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod3(a.Dat1_LBW1,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod3(a.dat1_LBW1,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod3(a.dat1_LBW1,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod3(a.dat1_LBW1,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod3(a.Dat2_LBW1,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod3(a.dat2_LBW1,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod3(a.dat2_LBW1,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod3(a.dat2_LBW1,res8,event2,event2_time,PM25_M48,"PM25_M48");

DATA LBW1_RES_tot; SET res1-res8;  IF TOTAL^=".";  RUN;

DATA LBW1_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  if total^="."; RUN;
DATA LBW1_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4;  if total^="."; RUN;
DATA LBW1_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4;  if total^="."; RUN;
DATA LBW1_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4;  if total^="."; RUN;

DATA LBW1_RES; SET LBW1_RES1_M LBW1_RES1_F LBW1_RES2_M LBW1_RES2_F; RUN;

%mod3(A.D1_LBW0,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod3(A.D1_LBW0,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod3(A.D1_LBW0,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod3(A.D1_LBW0,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod3(A.D2_LBW0,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod3(A.D2_LBW0,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod3(A.D2_LBW0,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod3(A.D2_LBW0,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod3(A.D3_LBW0,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod3(A.D3_LBW0,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod3(A.D3_LBW0,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod3(A.D3_LBW0,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod3(A.D4_LBW0,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod3(A.D4_LBW0,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod3(A.D4_LBW0,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod3(A.D4_LBW0,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod3(a.Dat1_LBW0,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod3(a.dat1_LBW0,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod3(a.dat1_LBW0,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod3(a.dat1_LBW0,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod3(a.Dat2_LBW0,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod3(a.dat2_LBW0,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod3(a.dat2_LBW0,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod3(a.dat2_LBW0,res8,event2,event2_time,PM10_M48,"PM10_M48");

DATA LBW0_RES_tot; SET res1-res8;  IF TOTAL^=".";  RUN;

DATA LBW0_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  if total^="."; RUN;
DATA LBW0_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4;  if total^="."; RUN;
DATA LBW0_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4;  if total^="."; RUN;
DATA LBW0_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4;  if total^="."; RUN;

DATA LBW0_RES; SET LBW0_RES1_M LBW0_RES1_F LBW0_RES2_M LBW0_RES2_F; RUN;

%mod3(A.D1_LBW1,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod3(A.D1_LBW1,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod3(A.D1_LBW1,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod3(A.D1_LBW1,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod3(A.D2_LBW1,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod3(A.D2_LBW1,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod3(A.D2_LBW1,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod3(A.D2_LBW1,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod3(A.D3_LBW1,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod3(A.D3_LBW1,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod3(A.D3_LBW1,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod3(A.D3_LBW1,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod3(A.D4_LBW1,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod3(A.D4_LBW1,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod3(A.D4_LBW1,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod3(A.D4_LBW1,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod3(a.Dat1_LBW1,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod3(a.dat1_LBW1,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod3(a.dat1_LBW1,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod3(a.dat1_LBW1,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod3(a.Dat2_LBW1,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod3(a.dat2_LBW1,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod3(a.dat2_LBW1,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod3(a.dat2_LBW1,res8,event2,event2_time,PM10_M48,"PM10_M48");

DATA LBW1_RES_tot; SET res1-res8;  IF TOTAL^=".";  RUN;

DATA LBW1_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  if total^="."; RUN;
DATA LBW1_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4;  if total^="."; RUN;
DATA LBW1_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4;  if total^="."; RUN;
DATA LBW1_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4;  if total^="."; RUN;

DATA LBW1_RES; SET LBW1_RES1_M LBW1_RES1_F LBW1_RES2_M LBW1_RES2_F; RUN;


%mod3(A.D1_LBW0,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod3(A.D1_LBW0,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod3(A.D1_LBW0,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod3(A.D1_LBW0,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod3(A.D2_LBW0,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod3(A.D2_LBW0,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod3(A.D2_LBW0,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod3(A.D2_LBW0,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod3(A.D3_LBW0,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod3(A.D3_LBW0,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod3(A.D3_LBW0,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod3(A.D3_LBW0,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod3(A.D4_LBW0,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod3(A.D4_LBW0,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod3(A.D4_LBW0,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod3(A.D4_LBW0,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod3(a.Dat1_LBW0,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod3(a.dat1_LBW0,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod3(a.dat1_LBW0,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod3(a.dat1_LBW0,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod3(a.Dat2_LBW0,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod3(a.dat2_LBW0,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod3(a.dat2_LBW0,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod3(a.dat2_LBW0,res8,event2,event2_time,SO2_M48,"SO2_M48");

DATA LBW0_RES_tot; SET res1-res8;  IF TOTAL^=".";  RUN;

DATA LBW0_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  if total^="."; RUN;
DATA LBW0_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4;  if total^="."; RUN;
DATA LBW0_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4;  if total^="."; RUN;
DATA LBW0_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4;  if total^="."; RUN;

DATA LBW0_RES; SET LBW0_RES1_M LBW0_RES1_F LBW0_RES2_M LBW0_RES2_F; RUN;

%mod3(A.D1_LBW1,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod3(A.D1_LBW1,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod3(A.D1_LBW1,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod3(A.D1_LBW1,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod3(A.D2_LBW1,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod3(A.D2_LBW1,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod3(A.D2_LBW1,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod3(A.D2_LBW1,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod3(A.D3_LBW1,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod3(A.D3_LBW1,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod3(A.D3_LBW1,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod3(A.D3_LBW1,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod3(A.D4_LBW1,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod3(A.D4_LBW1,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod3(A.D4_LBW1,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod3(A.D4_LBW1,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod3(a.Dat1_LBW1,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod3(a.dat1_LBW1,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod3(a.dat1_LBW1,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod3(a.dat1_LBW1,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod3(a.Dat2_LBW1,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod3(a.dat2_LBW1,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod3(a.dat2_LBW1,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod3(a.dat2_LBW1,res8,event2,event2_time,SO2_M48,"SO2_M48");

DATA LBW1_RES_tot; SET res1-res8;  IF TOTAL^=".";  RUN;

DATA LBW1_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  if total^="."; RUN;
DATA LBW1_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4;  if total^="."; RUN;
DATA LBW1_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4;  if total^="."; RUN;
DATA LBW1_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4;  if total^="."; RUN;

DATA LBW1_RES; SET LBW1_RES1_M LBW1_RES1_F LBW1_RES2_M LBW1_RES2_F; RUN;


%mod3(A.D1_LBW0,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod3(A.D1_LBW0,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod3(A.D1_LBW0,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod3(A.D1_LBW0,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod3(A.D2_LBW0,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod3(A.D2_LBW0,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod3(A.D2_LBW0,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod3(A.D2_LBW0,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod3(A.D3_LBW0,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod3(A.D3_LBW0,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod3(A.D3_LBW0,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod3(A.D3_LBW0,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod3(A.D4_LBW0,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod3(A.D4_LBW0,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod3(A.D4_LBW0,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod3(A.D4_LBW0,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod3(a.Dat1_LBW0,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod3(a.dat1_LBW0,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod3(a.dat1_LBW0,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod3(a.dat1_LBW0,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod3(a.Dat2_LBW0,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod3(a.dat2_LBW0,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod3(a.dat2_LBW0,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod3(a.dat2_LBW0,res8,event2,event2_time,NO2_M48,"NO2_M48");

DATA LBW0_RES_tot; SET res1-res8;  IF TOTAL^=".";  RUN;

DATA LBW0_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  if total^="."; RUN;
DATA LBW0_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4;  if total^="."; RUN;
DATA LBW0_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4;  if total^="."; RUN;
DATA LBW0_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4;  if total^="."; RUN;

DATA LBW0_RES; SET LBW0_RES1_M LBW0_RES1_F LBW0_RES2_M LBW0_RES2_F; RUN;

%mod3(A.D1_LBW1,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod3(A.D1_LBW1,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod3(A.D1_LBW1,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod3(A.D1_LBW1,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod3(A.D2_LBW1,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod3(A.D2_LBW1,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod3(A.D2_LBW1,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod3(A.D2_LBW1,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod3(A.D3_LBW1,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod3(A.D3_LBW1,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod3(A.D3_LBW1,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod3(A.D3_LBW1,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod3(A.D4_LBW1,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod3(A.D4_LBW1,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod3(A.D4_LBW1,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod3(A.D4_LBW1,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod3(a.Dat1_LBW1,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod3(a.dat1_LBW1,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod3(a.dat1_LBW1,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod3(a.dat1_LBW1,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod3(a.Dat2_LBW1,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod3(a.dat2_LBW1,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod3(a.dat2_LBW1,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod3(a.dat2_LBW1,res8,event2,event2_time,NO2_M48,"NO2_M48");

DATA LBW1_RES_tot; SET res1-res8;  IF TOTAL^=".";  RUN;

DATA LBW1_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  if total^="."; RUN;
DATA LBW1_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4;  if total^="."; RUN;
DATA LBW1_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4;  if total^="."; RUN;
DATA LBW1_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4;  if total^="."; RUN;

DATA LBW1_RES; SET LBW1_RES1_M LBW1_RES1_F LBW1_RES2_M LBW1_RES2_F; RUN;


%mod3(A.D1_LBW0,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod3(A.D1_LBW0,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod3(A.D1_LBW0,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod3(A.D1_LBW0,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod3(A.D2_LBW0,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod3(A.D2_LBW0,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod3(A.D2_LBW0,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod3(A.D2_LBW0,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod3(A.D3_LBW0,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod3(A.D3_LBW0,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod3(A.D3_LBW0,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod3(A.D3_LBW0,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod3(A.D4_LBW0,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod3(A.D4_LBW0,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod3(A.D4_LBW0,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod3(A.D4_LBW0,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod3(a.Dat1_LBW0,res1,event2,event2_time,O3_M12,"O3_M12");
%mod3(a.dat1_LBW0,res2,event2,event2_time,O3_M24,"O3_M24");
%mod3(a.dat1_LBW0,res3,event2,event2_time,O3_M36,"O3_M36");
%mod3(a.dat1_LBW0,res4,event2,event2_time,O3_M48,"O3_M48");
%mod3(a.Dat2_LBW0,res5,event2,event2_time,O3_M12,"O3_M12");
%mod3(a.dat2_LBW0,res6,event2,event2_time,O3_M24,"O3_M24");
%mod3(a.dat2_LBW0,res7,event2,event2_time,O3_M36,"O3_M36");
%mod3(a.dat2_LBW0,res8,event2,event2_time,O3_M48,"O3_M48");

DATA LBW0_RES_tot; SET res1-res8;  IF TOTAL^=".";  RUN;

DATA LBW0_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  if total^="."; RUN;
DATA LBW0_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4;  if total^="."; RUN;
DATA LBW0_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4;  if total^="."; RUN;
DATA LBW0_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4;  if total^="."; RUN;

DATA LBW0_RES; SET LBW0_RES1_M LBW0_RES1_F LBW0_RES2_M LBW0_RES2_F; RUN;

%mod3(A.D1_LBW1,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod3(A.D1_LBW1,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod3(A.D1_LBW1,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod3(A.D1_LBW1,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod3(A.D2_LBW1,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod3(A.D2_LBW1,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod3(A.D2_LBW1,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod3(A.D2_LBW1,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod3(A.D3_LBW1,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod3(A.D3_LBW1,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod3(A.D3_LBW1,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod3(A.D3_LBW1,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod3(A.D4_LBW1,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod3(A.D4_LBW1,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod3(A.D4_LBW1,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod3(A.D4_LBW1,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod3(a.Dat1_LBW1,res1,event2,event2_time,O3_M12,"O3_M12");
%mod3(a.dat1_LBW1,res2,event2,event2_time,O3_M24,"O3_M24");
%mod3(a.dat1_LBW1,res3,event2,event2_time,O3_M36,"O3_M36");
%mod3(a.dat1_LBW1,res4,event2,event2_time,O3_M48,"O3_M48");
%mod3(a.Dat2_LBW1,res5,event2,event2_time,O3_M12,"O3_M12");
%mod3(a.dat2_LBW1,res6,event2,event2_time,O3_M24,"O3_M24");
%mod3(a.dat2_LBW1,res7,event2,event2_time,O3_M36,"O3_M36");
%mod3(a.dat2_LBW1,res8,event2,event2_time,O3_M48,"O3_M48");

DATA LBW1_RES_tot; SET res1-res8;  IF TOTAL^=".";  RUN;

DATA LBW1_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  if total^="."; RUN;
DATA LBW1_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4;  if total^="."; RUN;
DATA LBW1_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4;  if total^="."; RUN;
DATA LBW1_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4;  if total^="."; RUN;

DATA LBW1_RES; SET LBW1_RES1_M LBW1_RES1_F LBW1_RES2_M LBW1_RES2_F; RUN;

/********************************************************************************************************************************************/
/********************************************************************************************************************************************/

/*Model4: Adjusted model: 보험가입자, 지역, 출생체중, 기준년도, 연평균 기온*/
/*strata 고려 */
%macro mod4(data,out,event,time,exp,exp_text);
proc phreg data=&data.; 
CLASS STD_YYYY SEX_TYPE  SES05 SIDO/ PARAM=REF REF=FIRST;
STRATA SIDO STD_YYYY SES05;
MODEL &time.*&event.(0)=&exp. SEX_TYPE   BW  MTEMP_M12;
ODS OUTPUT censoredsummary=re1; ODS OUTPUT Parameterestimates=re2; ODS OUTPUT Fitstatistics=re3; run;

data res ; set re2; if parameter in (&exp_text.); DROP LABEL; RUN;
PROC TRANSPOSE DATA=RE3 OUT=T_RE3; ID Criterion; VAR WithCovariates ; RUN;

DATA &out.; 
retain total event censored pctcens parameter estimate stderr probchisq hazardratio hr_lci hr_uci AIC SBC;
MERGE RE1 RE2 T_RE3; HR_LCI=EXP(Estimate-1.96*StdErr); HR_UCI=EXP(Estimate+1.96*StdErr); 
drop df chisq _name_ _label_;
RUN;
%mend;

%mod4(A.D1,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D1,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D1,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D1,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D2,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D2,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D2,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D2,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D3,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D3,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D3,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D3,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(A.D4,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D4,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D4,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D4,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(a.Dat1,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat1,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat1,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat1,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod4(a.Dat2,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat2,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat2,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat2,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod4_RES_TOT; SET res1-res8;  IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

%mod4(A.D1,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D1,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D1,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D1,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D2,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D2,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D2,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D2,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D3,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D3,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D3,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D3,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(A.D4,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D4,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D4,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D4,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(a.Dat1,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat1,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat1,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat1,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod4(a.Dat2,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat2,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat2,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat2,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod4_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

%mod4(A.D1,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D1,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D1,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D1,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D2,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D2,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D2,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D2,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D3,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D3,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D3,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D3,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(A.D4,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D4,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D4,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D4,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(a.Dat1,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat1,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat1,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat1,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod4(a.Dat2,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat2,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat2,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat2,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod4_RES_TOT; SET res1-res8;  IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

%mod4(A.D1,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D1,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D1,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D1,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D2,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D2,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D2,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D2,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D3,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D3,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D3,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D3,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(A.D4,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D4,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D4,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D4,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(a.Dat1,res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat1,res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat1,res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat1,res4,event2,event2_time,O3_M48,"O3_M48");
%mod4(a.Dat2,res5,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat2,res6,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat2,res7,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat2,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod4_RES_TOT; SET res1-res8;  IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;
/********************************************************************************************************************************************/
/********************************************************************************************************************************************/
/*Model6: Adjusted model: 보험가입자, 지역, 출생체중, 기준년도, 연평균 기온*/
/*strata 고려 */
/*도시 층화 모델*/
%macro mod6(data,out,event,time,exp,exp_text);
proc phreg data=&data.; 
CLASS STD_YYYY SEX_TYPE  SES05 SIDO/ PARAM=REF REF=FIRST;
STRATA SIDO STD_YYYY SES05;
MODEL &time.*&event.(0)=&exp. SEX_TYPE   BW  MTEMP_M12;
ODS OUTPUT censoredsummary=re1; ODS OUTPUT Parameterestimates=re2; ODS OUTPUT Fitstatistics=re3; run;

data res ; set re2; if parameter in (&exp_text.); DROP LABEL; RUN;
PROC TRANSPOSE DATA=RE3 OUT=T_RE3; ID Criterion; VAR WithCovariates ; RUN;

DATA &out.; 
retain total event censored pctcens parameter estimate stderr probchisq hazardratio hr_lci hr_uci AIC SBC;
MERGE RE1 RE2 T_RE3; HR_LCI=EXP(Estimate-1.96*StdErr); HR_UCI=EXP(Estimate+1.96*StdErr); 
drop df chisq _name_ _label_;
RUN;
%mend;
/********************************************************************************************************************************************/
/********************************************************************************************************************************************/

DATA A.D3_SIDO1; SET A.D3; IF SIDO IN (11,26,27,28,29,30,31,36); RUN;
DATA A.D4_SIDO1; SET A.D4; IF SIDO IN (11,26,27,28,29,30,31,36); RUN;
DATA A.DAT1_SIDO1; SET A.DAT1; IF SIDO IN (11,26,27,28,29,30,31,36); RUN;
DATA A.DAT2_SIDO1; SET A.DAT2; IF SIDO IN (11,26,27,28,29,30,31,36); RUN;

DATA A.D3_SIDO2; SET A.D3; IF SIDO NOT IN (11,26,27,28,29,30,31,36); RUN;
DATA A.D4_SIDO2; SET A.D4; IF SIDO NOT IN (11,26,27,28,29,30,31,36); RUN;
DATA A.DAT1_SIDO2; SET A.DAT1; IF SIDO NOT IN (11,26,27,28,29,30,31,36); RUN;
DATA A.DAT2_SIDO2; SET A.DAT2; IF SIDO NOT IN (11,26,27,28,29,30,31,36); RUN;

PROC FREQ DATA=A.D3_SIDO1; TABLES SIDO*event2/LIST; RUN;
PROC FREQ DATA=A.D3_SIDO2; TABLES SIDO*EVENT2/LIST; RUN;
PROC FREQ DATA=A.D4_SIDO1; TABLES SIDO*event2/LIST; RUN;
PROC FREQ DATA=A.D4_SIDO2; TABLES SIDO*EVENT2/LIST; RUN;
PROC FREQ DATA=A.DAT2_SIDO1; TABLES SIDO*EVENT2/LIST; RUN;

data a.d3_YR1; SET A.D3; IF STD_YYYY=2013; RUN;
data a.d3_YR2; SET A.D3; IF STD_YYYY=2014; RUN;
data a.d3_YR3; SET A.D3; IF STD_YYYY=2015; RUN;

data a.d4_YR1; SET A.D4; IF STD_YYYY=2013; RUN;
data a.d4_YR2; SET A.D4; IF STD_YYYY=2014; RUN;
data a.d4_YR3; SET A.D4; IF STD_YYYY=2015; RUN;

data a.DAT2_YR1; SET A.DAT2; IF STD_YYYY=2013; RUN;
data a.DAT2_YR2; SET A.DAT2; IF STD_YYYY=2014; RUN;
data a.DAT2_YR3; SET A.DAT2; IF STD_YYYY=2015; RUN;


/*시골 */
%MOD6(A.D3_SIDO2,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%MOD6(A.D3_SIDO2,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%MOD6(A.D3_SIDO2,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");/*도시 */
%MOD6(A.D3_SIDO1,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%MOD6(A.D3_SIDO1,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%MOD6(A.D3_SIDO1,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%MOD6(A.D3_SIDO1,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%MOD6(A.D4_SIDO1,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%MOD6(A.D4_SIDO1,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%MOD6(A.D4_SIDO1,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%MOD6(A.D4_SIDO1,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%MOD6(a.Dat2_SIDO1,res1,event2,event2_time,PM25_M12,"PM25_M12");
%MOD6(a.dat2_SIDO1,res2,event2,event2_time,PM25_M24,"PM25_M24");
%MOD6(a.dat2_SIDO1,res3,event2,event2_time,PM25_M36,"PM25_M36");
%MOD6(a.dat2_SIDO1,res4,event2,event2_time,PM25_M48,"PM25_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;

%MOD6(A.D3_SIDO2,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%MOD6(A.D4_SIDO2,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%MOD6(A.D4_SIDO2,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%MOD6(A.D4_SIDO2,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%MOD6(A.D4_SIDO2,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%MOD6(a.Dat2_SIDO2,res1,event2,event2_time,PM25_M12,"PM25_M12");
%MOD6(a.dat2_SIDO2,res2,event2,event2_time,PM25_M24,"PM25_M24");
%MOD6(a.dat2_SIDO2,res3,event2,event2_time,PM25_M36,"PM25_M36");
%MOD6(a.dat2_SIDO2,res4,event2,event2_time,PM25_M48,"PM25_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;


/*도시 */
%MOD6(A.D3_SIDO1,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%MOD6(A.D3_SIDO1,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%MOD6(A.D3_SIDO1,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%MOD6(A.D3_SIDO1,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%MOD6(A.D4_SIDO1,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%MOD6(A.D4_SIDO1,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%MOD6(A.D4_SIDO1,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%MOD6(A.D4_SIDO1,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%MOD6(a.Dat2_SIDO1,res1,event2,event2_time,PM10_M12,"PM10_M12");
%MOD6(a.dat2_SIDO1,res2,event2,event2_time,PM10_M24,"PM10_M24");
%MOD6(a.dat2_SIDO1,res3,event2,event2_time,PM10_M36,"PM10_M36");
%MOD6(a.dat2_SIDO1,res4,event2,event2_time,PM10_M48,"PM10_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;

/*시골 */
%MOD6(A.D3_SIDO2,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%MOD6(A.D3_SIDO2,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%MOD6(A.D3_SIDO2,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%MOD6(A.D3_SIDO2,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%MOD6(A.D4_SIDO2,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%MOD6(A.D4_SIDO2,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%MOD6(A.D4_SIDO2,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%MOD6(A.D4_SIDO2,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%MOD6(a.Dat2_SIDO2,res1,event2,event2_time,PM10_M12,"PM10_M12");
%MOD6(a.dat2_SIDO2,res2,event2,event2_time,PM10_M24,"PM10_M24");
%MOD6(a.dat2_SIDO2,res3,event2,event2_time,PM10_M36,"PM10_M36");
%MOD6(a.dat2_SIDO2,res4,event2,event2_time,PM10_M48,"PM10_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;



/*도시 */
%MOD6(A.D3_SIDO1,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%MOD6(A.D3_SIDO1,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%MOD6(A.D3_SIDO1,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%MOD6(A.D3_SIDO1,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%MOD6(A.D4_SIDO1,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%MOD6(A.D4_SIDO1,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%MOD6(A.D4_SIDO1,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%MOD6(A.D4_SIDO1,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%MOD6(a.Dat2_SIDO1,res1,event2,event2_time,SO2_M12,"SO2_M12");
%MOD6(a.dat2_SIDO1,res2,event2,event2_time,SO2_M24,"SO2_M24");
%MOD6(a.dat2_SIDO1,res3,event2,event2_time,SO2_M36,"SO2_M36");
%MOD6(a.dat2_SIDO1,res4,event2,event2_time,SO2_M48,"SO2_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;

/*시골 */
%MOD6(A.D3_SIDO2,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%MOD6(A.D3_SIDO2,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%MOD6(A.D3_SIDO2,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%MOD6(A.D3_SIDO2,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%MOD6(A.D4_SIDO2,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%MOD6(A.D4_SIDO2,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%MOD6(A.D4_SIDO2,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%MOD6(A.D4_SIDO2,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%MOD6(a.Dat2_SIDO2,res1,event2,event2_time,SO2_M12,"SO2_M12");
%MOD6(a.dat2_SIDO2,res2,event2,event2_time,SO2_M24,"SO2_M24");
%MOD6(a.dat2_SIDO2,res3,event2,event2_time,SO2_M36,"SO2_M36");
%MOD6(a.dat2_SIDO2,res4,event2,event2_time,SO2_M48,"SO2_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;



/*도시 */
%MOD6(A.D3_SIDO1,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%MOD6(A.D3_SIDO1,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%MOD6(A.D3_SIDO1,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%MOD6(A.D3_SIDO1,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%MOD6(A.D4_SIDO1,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%MOD6(A.D4_SIDO1,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%MOD6(A.D4_SIDO1,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%MOD6(A.D4_SIDO1,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%MOD6(a.Dat2_SIDO1,res1,event2,event2_time,NO2_M12,"NO2_M12");
%MOD6(a.dat2_SIDO1,res2,event2,event2_time,NO2_M24,"NO2_M24");
%MOD6(a.dat2_SIDO1,res3,event2,event2_time,NO2_M36,"NO2_M36");
%MOD6(a.dat2_SIDO1,res4,event2,event2_time,NO2_M48,"NO2_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;

/*시골 */
%MOD6(A.D3_SIDO2,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%MOD6(A.D3_SIDO2,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%MOD6(A.D3_SIDO2,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%MOD6(A.D3_SIDO2,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%MOD6(A.D4_SIDO2,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%MOD6(A.D4_SIDO2,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%MOD6(A.D4_SIDO2,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%MOD6(A.D4_SIDO2,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%MOD6(a.Dat2_SIDO2,res1,event2,event2_time,NO2_M12,"NO2_M12");
%MOD6(a.dat2_SIDO2,res2,event2,event2_time,NO2_M24,"NO2_M24");
%MOD6(a.dat2_SIDO2,res3,event2,event2_time,NO2_M36,"NO2_M36");
%MOD6(a.dat2_SIDO2,res4,event2,event2_time,NO2_M48,"NO2_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;


/*도시 */
%MOD6(A.D3_SIDO1,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%MOD6(A.D3_SIDO1,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%MOD6(A.D3_SIDO1,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%MOD6(A.D3_SIDO1,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%MOD6(A.D4_SIDO1,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%MOD6(A.D4_SIDO1,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%MOD6(A.D4_SIDO1,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%MOD6(A.D4_SIDO1,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%MOD6(a.Dat2_SIDO1,res1,event2,event2_time,O3_M12,"O3_M12");
%MOD6(a.dat2_SIDO1,res2,event2,event2_time,O3_M24,"O3_M24");
%MOD6(a.dat2_SIDO1,res3,event2,event2_time,O3_M36,"O3_M36");
%MOD6(a.dat2_SIDO1,res4,event2,event2_time,O3_M48,"O3_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;

/*시골 */
%MOD6(A.D3_SIDO2,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%MOD6(A.D3_SIDO2,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%MOD6(A.D3_SIDO2,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%MOD6(A.D3_SIDO2,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%MOD6(A.D4_SIDO2,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%MOD6(A.D4_SIDO2,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%MOD6(A.D4_SIDO2,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%MOD6(A.D4_SIDO2,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%MOD6(a.Dat2_SIDO2,res1,event2,event2_time,O3_M12,"O3_M12");
%MOD6(a.dat2_SIDO2,res2,event2,event2_time,O3_M24,"O3_M24");
%MOD6(a.dat2_SIDO2,res3,event2,event2_time,O3_M36,"O3_M36");
%MOD6(a.dat2_SIDO2,res4,event2,event2_time,O3_M48,"O3_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;

/********************************************************************************************************************************************/
/********************************************************************************************************************************************/

/*2007년 출생  */
%MOD6(A.D3_YR1,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%MOD6(A.D3_YR1,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%MOD6(A.D3_YR1,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%MOD6(A.D3_YR1,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%MOD6(A.D4_YR1,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%MOD6(A.D4_YR1,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%MOD6(A.D4_YR1,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%MOD6(A.D4_YR1,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%MOD6(a.Dat2_YR1,res1,event2,event2_time,PM25_M12,"PM25_M12");
%MOD6(a.dat2_YR1,res2,event2,event2_time,PM25_M24,"PM25_M24");
%MOD6(a.dat2_YR1,res3,event2,event2_time,PM25_M36,"PM25_M36");
%MOD6(a.dat2_YR1,res4,event2,event2_time,PM25_M48,"PM25_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;

/*2008년 출생 */
%MOD6(A.D3_YR2,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%MOD6(A.D3_YR2,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%MOD6(A.D3_YR2,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%MOD6(A.D3_YR2,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%MOD6(A.D4_YR2,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%MOD6(A.D4_YR2,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%MOD6(A.D4_YR2,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%MOD6(A.D4_YR2,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%MOD6(a.Dat2_YR2,res1,event2,event2_time,PM25_M12,"PM25_M12");
%MOD6(a.dat2_YR2,res2,event2,event2_time,PM25_M24,"PM25_M24");
%MOD6(a.dat2_YR2,res3,event2,event2_time,PM25_M36,"PM25_M36");
%MOD6(a.dat2_YR2,res4,event2,event2_time,PM25_M48,"PM25_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;

/*2009년 출생 */
%MOD6(A.D3_YR3,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%MOD6(A.D3_YR3,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%MOD6(A.D3_YR3,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%MOD6(A.D3_YR3,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%MOD6(A.D4_YR3,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%MOD6(A.D4_YR3,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%MOD6(A.D4_YR3,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%MOD6(A.D4_YR3,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%MOD6(a.Dat2_YR3,res1,event2,event2_time,PM25_M12,"PM25_M12");
%MOD6(a.dat2_YR3,res2,event2,event2_time,PM25_M24,"PM25_M24");
%MOD6(a.dat2_YR3,res3,event2,event2_time,PM25_M36,"PM25_M36");
%MOD6(a.dat2_YR3,res4,event2,event2_time,PM25_M48,"PM25_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;


/*2007년 출생  */
%MOD6(A.D3_YR1,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%MOD6(A.D3_YR1,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%MOD6(A.D3_YR1,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%MOD6(A.D3_YR1,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%MOD6(A.D4_YR1,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%MOD6(A.D4_YR1,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%MOD6(A.D4_YR1,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%MOD6(A.D4_YR1,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%MOD6(a.Dat2_YR1,res1,event2,event2_time,PM10_M12,"PM10_M12");
%MOD6(a.dat2_YR1,res2,event2,event2_time,PM10_M24,"PM10_M24");
%MOD6(a.dat2_YR1,res3,event2,event2_time,PM10_M36,"PM10_M36");
%MOD6(a.dat2_YR1,res4,event2,event2_time,PM10_M48,"PM10_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;

/*2008년 출생 */
%MOD6(A.D3_YR2,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%MOD6(A.D3_YR2,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%MOD6(A.D3_YR2,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%MOD6(A.D3_YR2,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%MOD6(A.D4_YR2,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%MOD6(A.D4_YR2,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%MOD6(A.D4_YR2,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%MOD6(A.D4_YR2,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%MOD6(a.Dat2_YR2,res1,event2,event2_time,PM10_M12,"PM10_M12");
%MOD6(a.dat2_YR2,res2,event2,event2_time,PM10_M24,"PM10_M24");
%MOD6(a.dat2_YR2,res3,event2,event2_time,PM10_M36,"PM10_M36");
%MOD6(a.dat2_YR2,res4,event2,event2_time,PM10_M48,"PM10_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;

/*2009년 출생 */
%MOD6(A.D3_YR3,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%MOD6(A.D3_YR3,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%MOD6(A.D3_YR3,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%MOD6(A.D3_YR3,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%MOD6(A.D4_YR3,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%MOD6(A.D4_YR3,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%MOD6(A.D4_YR3,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%MOD6(A.D4_YR3,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%MOD6(a.Dat2_YR3,res1,event2,event2_time,PM10_M12,"PM10_M12");
%MOD6(a.dat2_YR3,res2,event2,event2_time,PM10_M24,"PM10_M24");
%MOD6(a.dat2_YR3,res3,event2,event2_time,PM10_M36,"PM10_M36");
%MOD6(a.dat2_YR3,res4,event2,event2_time,PM10_M48,"PM10_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;


/*2007년 출생  */
%MOD6(A.D3_YR1,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%MOD6(A.D3_YR1,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%MOD6(A.D3_YR1,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%MOD6(A.D3_YR1,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%MOD6(A.D4_YR1,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%MOD6(A.D4_YR1,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%MOD6(A.D4_YR1,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%MOD6(A.D4_YR1,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%MOD6(a.Dat2_YR1,res1,event2,event2_time,SO2_M12,"SO2_M12");
%MOD6(a.dat2_YR1,res2,event2,event2_time,SO2_M24,"SO2_M24");
%MOD6(a.dat2_YR1,res3,event2,event2_time,SO2_M36,"SO2_M36");
%MOD6(a.dat2_YR1,res4,event2,event2_time,SO2_M48,"SO2_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;

/*2008년 출생 */
%MOD6(A.D3_YR2,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%MOD6(A.D3_YR2,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%MOD6(A.D3_YR2,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%MOD6(A.D3_YR2,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%MOD6(A.D4_YR2,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%MOD6(A.D4_YR2,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%MOD6(A.D4_YR2,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%MOD6(A.D4_YR2,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%MOD6(a.Dat2_YR2,res1,event2,event2_time,SO2_M12,"SO2_M12");
%MOD6(a.dat2_YR2,res2,event2,event2_time,SO2_M24,"SO2_M24");
%MOD6(a.dat2_YR2,res3,event2,event2_time,SO2_M36,"SO2_M36");
%MOD6(a.dat2_YR2,res4,event2,event2_time,SO2_M48,"SO2_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;

/*2009년 출생 */
%MOD6(A.D3_YR3,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%MOD6(A.D3_YR3,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%MOD6(A.D3_YR3,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%MOD6(A.D3_YR3,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%MOD6(A.D4_YR3,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%MOD6(A.D4_YR3,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%MOD6(A.D4_YR3,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%MOD6(A.D4_YR3,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%MOD6(a.Dat2_YR3,res1,event2,event2_time,SO2_M12,"SO2_M12");
%MOD6(a.dat2_YR3,res2,event2,event2_time,SO2_M24,"SO2_M24");
%MOD6(a.dat2_YR3,res3,event2,event2_time,SO2_M36,"SO2_M36");
%MOD6(a.dat2_YR3,res4,event2,event2_time,SO2_M48,"SO2_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;

/*2007년 출생  */
%MOD6(A.D3_YR1,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%MOD6(A.D3_YR1,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%MOD6(A.D3_YR1,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%MOD6(A.D3_YR1,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%MOD6(A.D4_YR1,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%MOD6(A.D4_YR1,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%MOD6(A.D4_YR1,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%MOD6(A.D4_YR1,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%MOD6(a.Dat2_YR1,res1,event2,event2_time,NO2_M12,"NO2_M12");
%MOD6(a.dat2_YR1,res2,event2,event2_time,NO2_M24,"NO2_M24");
%MOD6(a.dat2_YR1,res3,event2,event2_time,NO2_M36,"NO2_M36");
%MOD6(a.dat2_YR1,res4,event2,event2_time,NO2_M48,"NO2_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;

/*2008년 출생 */
%MOD6(A.D3_YR2,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%MOD6(A.D3_YR2,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%MOD6(A.D3_YR2,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%MOD6(A.D3_YR2,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%MOD6(A.D4_YR2,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%MOD6(A.D4_YR2,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%MOD6(A.D4_YR2,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%MOD6(A.D4_YR2,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%MOD6(a.Dat2_YR2,res1,event2,event2_time,NO2_M12,"NO2_M12");
%MOD6(a.dat2_YR2,res2,event2,event2_time,NO2_M24,"NO2_M24");
%MOD6(a.dat2_YR2,res3,event2,event2_time,NO2_M36,"NO2_M36");
%MOD6(a.dat2_YR2,res4,event2,event2_time,NO2_M48,"NO2_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;

/*2009년 출생 */
%MOD6(A.D3_YR3,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%MOD6(A.D3_YR3,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%MOD6(A.D3_YR3,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%MOD6(A.D3_YR3,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%MOD6(A.D4_YR3,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%MOD6(A.D4_YR3,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%MOD6(A.D4_YR3,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%MOD6(A.D4_YR3,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%MOD6(a.Dat2_YR3,res1,event2,event2_time,NO2_M12,"NO2_M12");
%MOD6(a.dat2_YR3,res2,event2,event2_time,NO2_M24,"NO2_M24");
%MOD6(a.dat2_YR3,res3,event2,event2_time,NO2_M36,"NO2_M36");
%MOD6(a.dat2_YR3,res4,event2,event2_time,NO2_M48,"NO2_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;

/*2007년 출생  */
%MOD6(A.D3_YR1,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%MOD6(A.D3_YR1,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%MOD6(A.D3_YR1,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%MOD6(A.D3_YR1,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%MOD6(A.D4_YR1,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%MOD6(A.D4_YR1,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%MOD6(A.D4_YR1,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%MOD6(A.D4_YR1,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%MOD6(a.Dat2_YR1,res1,event2,event2_time,O3_M12,"O3_M12");
%MOD6(a.dat2_YR1,res2,event2,event2_time,O3_M24,"O3_M24");
%MOD6(a.dat2_YR1,res3,event2,event2_time,O3_M36,"O3_M36");
%MOD6(a.dat2_YR1,res4,event2,event2_time,O3_M48,"O3_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;

/*2008년 출생 */
%MOD6(A.D3_YR2,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%MOD6(A.D3_YR2,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%MOD6(A.D3_YR2,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%MOD6(A.D3_YR2,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%MOD6(A.D4_YR2,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%MOD6(A.D4_YR2,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%MOD6(A.D4_YR2,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%MOD6(A.D4_YR2,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%MOD6(a.Dat2_YR2,res1,event2,event2_time,O3_M12,"O3_M12");
%MOD6(a.dat2_YR2,res2,event2,event2_time,O3_M24,"O3_M24");
%MOD6(a.dat2_YR2,res3,event2,event2_time,O3_M36,"O3_M36");
%MOD6(a.dat2_YR2,res4,event2,event2_time,O3_M48,"O3_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;

/*2009년 출생 */
%MOD6(A.D3_YR3,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%MOD6(A.D3_YR3,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%MOD6(A.D3_YR3,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%MOD6(A.D3_YR3,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%MOD6(A.D4_YR3,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%MOD6(A.D4_YR3,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%MOD6(A.D4_YR3,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%MOD6(A.D4_YR3,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%MOD6(a.Dat2_YR3,res1,event2,event2_time,O3_M12,"O3_M12");
%MOD6(a.dat2_YR3,res2,event2,event2_time,O3_M24,"O3_M24");
%MOD6(a.dat2_YR3,res3,event2,event2_time,O3_M36,"O3_M36");
%MOD6(a.dat2_YR3,res4,event2,event2_time,O3_M48,"O3_M48");
DATA MOD6_RES_TOT; SET res1-res4;  IF TOTAL^=".";  RUN;
DATA MOD6_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA MOD6_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA MOD6_RES; SET MOD6_RES_TOT MOD6_RES2_M MOD6_RES2_F; RUN;


/********************************************************************************************************************************************/
/********************************************************************************************************************************************/


/*Model5: Adjusted model: 보험가입자, 지역, 출생체중, 기준년도, 연평균 기온*/
/*frailty 고려 */
%macro mod5(data,out,event,time,exp,exp_text);
proc phreg data=&data.; 
CLASS STD_YYYY SEX_TYPE  SES05 SIDO/ PARAM=REF REF=FIRST;
STRATA STD_YYYY SES05;
MODEL &time.*&event.(0)=&exp. SEX_TYPE   BW  MTEMP_M12;
RANDOM SIDO;
ODS OUTPUT censoredsummary=re1; ODS OUTPUT Parameterestimates=re2; ODS OUTPUT Fitstatistics=re3; run;

DATA &out.; 
retain total event censored pctcens parameter estimate stderr probchisq hazardratio hr_lci hr_uci ;
MERGE re2; HR_LCI=EXP(Estimate-1.96*StdErr); HR_UCI=EXP(Estimate+1.96*StdErr); 
drop df chisq _name_ _label_;
RUN;
%mend;


%mod5(A.D1,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod5(A.D1,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod5(A.D1,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod5(A.D1,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod5(A.D2,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod5(A.D2,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod5(A.D2,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod5(A.D2,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod5(A.D3,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod5(A.D3,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod5(A.D3,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod5(A.D3,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod5(A.D4,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod5(A.D4,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod5(A.D4,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod5(A.D4,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod5(a.Dat1,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod5(a.dat1,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod5(a.dat1,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod5(a.dat1,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod5(a.Dat2,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod5(a.dat2,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod5(a.dat2,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod5(a.dat2,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod5_RES_TOT; SET res1-res8;  IF TOTAL^=".";  RUN;

DATA mod5_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod5_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod5_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod5_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod5_RES; SET mod5_RES1_M mod5_RES1_F mod5_RES2_M mod5_RES2_F; RUN;

%mod5(A.D1,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod5(A.D1,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod5(A.D1,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod5(A.D1,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod5(A.D2,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod5(A.D2,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod5(A.D2,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod5(A.D2,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod5(A.D3,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod5(A.D3,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod5(A.D3,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod5(A.D3,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod5(A.D4,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod5(A.D4,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod5(A.D4,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod5(A.D4,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod5(a.Dat1,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod5(a.dat1,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod5(a.dat1,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod5(a.dat1,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod5(a.Dat2,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod5(a.dat2,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod5(a.dat2,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod5(a.dat2,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod5_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod5_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod5_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod5_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod5_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod5_RES; SET mod5_RES1_M mod5_RES1_F mod5_RES2_M mod5_RES2_F; RUN;

%mod5(A.D1,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod5(A.D1,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod5(A.D1,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod5(A.D1,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod5(A.D2,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod5(A.D2,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod5(A.D2,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod5(A.D2,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod5(A.D3,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod5(A.D3,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod5(A.D3,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod5(A.D3,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod5(A.D4,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod5(A.D4,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod5(A.D4,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod5(A.D4,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod5(a.Dat1,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod5(a.dat1,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod5(a.dat1,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod5(a.dat1,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod5(a.Dat2,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod5(a.dat2,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod5(a.dat2,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod5(a.dat2,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod5_RES_TOT; SET res1-res8;  IF TOTAL^=".";  RUN;

DATA mod5_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod5_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod5_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod5_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod5_RES; SET mod5_RES1_M mod5_RES1_F mod5_RES2_M mod5_RES2_F; RUN;

%mod5(A.D1,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod5(A.D1,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod5(A.D1,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod5(A.D1,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod5(A.D2,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod5(A.D2,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod5(A.D2,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod5(A.D2,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod5(A.D3,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod5(A.D3,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod5(A.D3,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod5(A.D3,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod5(A.D4,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod5(A.D4,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod5(A.D4,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod5(A.D4,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod5(a.Dat1,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod5(a.dat1,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod5(a.dat1,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod5(a.dat1,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod5(a.Dat2,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod5(a.dat2,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod5(a.dat2,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod5(a.dat2,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod5_RES_TOT; SET res1-res8;  IF TOTAL^=".";  RUN;

DATA mod5_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod5_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod5_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod5_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod5_RES; SET mod5_RES1_M mod5_RES1_F mod5_RES2_M mod5_RES2_F; RUN;

%mod5(A.D1,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod5(A.D1,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod5(A.D1,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod5(A.D1,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod5(A.D2,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod5(A.D2,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod5(A.D2,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod5(A.D2,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod5(A.D3,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod5(A.D3,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod5(A.D3,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod5(A.D3,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod5(A.D4,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod5(A.D4,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod5(A.D4,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod5(A.D4,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod5(a.Dat1,res1,event2,event2_time,O3_M12,"O3_M12");
%mod5(a.dat1,res2,event2,event2_time,O3_M24,"O3_M24");
%mod5(a.dat1,res3,event2,event2_time,O3_M36,"O3_M36");
%mod5(a.dat1,res4,event2,event2_time,O3_M48,"O3_M48");
%mod5(a.Dat2,res5,event2,event2_time,O3_M12,"O3_M12");
%mod5(a.dat2,res6,event2,event2_time,O3_M24,"O3_M24");
%mod5(a.dat2,res7,event2,event2_time,O3_M36,"O3_M36");
%mod5(a.dat2,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod5_RES_TOT; SET res1-res8;  IF TOTAL^=".";  RUN;

DATA mod5_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod5_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod5_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod5_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod5_RES; SET mod5_RES1_M mod5_RES1_F mod5_RES2_M mod5_RES2_F; RUN;

/********************************************************************************************************************************************/
/********************************************************************************************************************************************/
/*도시층화 모델*/
DATA A.D1_S01; SET A.D1; IF SIDO=11; RUN;DATA A.D1_S02; SET A.D1; IF SIDO=26; RUN;
DATA A.D1_S03; SET A.D1; IF SIDO=27; RUN;DATA A.D1_S04; SET A.D1; IF SIDO=28; RUN;
DATA A.D1_S05; SET A.D1; IF SIDO=29; RUN;DATA A.D1_S06; SET A.D1; IF SIDO=30; RUN;
DATA A.D1_S07; SET A.D1; IF SIDO=31; RUN;DATA A.D1_S08; SET A.D1; IF SIDO=36; RUN;
DATA A.D1_S09; SET A.D1; IF SIDO=41; RUN;DATA A.D1_S10; SET A.D1; IF SIDO=42; RUN;
DATA A.D1_S11; SET A.D1; IF SIDO=43; RUN;DATA A.D1_S12; SET A.D1; IF SIDO=44; RUN;
DATA A.D1_S13; SET A.D1; IF SIDO=45; RUN;DATA A.D1_S14; SET A.D1; IF SIDO=46; RUN;
DATA A.D1_S15; SET A.D1; IF SIDO=47; RUN;DATA A.D1_S16; SET A.D1; IF SIDO=48; RUN;
DATA A.D1_S17; SET A.D1; IF SIDO=50; RUN;

DATA A.D2_S01; SET A.D2; IF SIDO=11; RUN;DATA A.D2_S02; SET A.D2; IF SIDO=26; RUN;
DATA A.D2_S03; SET A.D2; IF SIDO=27; RUN;DATA A.D2_S04; SET A.D2; IF SIDO=28; RUN;
DATA A.D2_S05; SET A.D2; IF SIDO=29; RUN;DATA A.D2_S06; SET A.D2; IF SIDO=30; RUN;
DATA A.D2_S07; SET A.D2; IF SIDO=31; RUN;DATA A.D2_S08; SET A.D2; IF SIDO=36; RUN;
DATA A.D2_S09; SET A.D2; IF SIDO=41; RUN;DATA A.D2_S10; SET A.D2; IF SIDO=42; RUN;
DATA A.D2_S11; SET A.D2; IF SIDO=43; RUN;DATA A.D2_S12; SET A.D2; IF SIDO=44; RUN;
DATA A.D2_S13; SET A.D2; IF SIDO=45; RUN;DATA A.D2_S14; SET A.D2; IF SIDO=46; RUN;
DATA A.D2_S15; SET A.D2; IF SIDO=47; RUN;DATA A.D2_S16; SET A.D2; IF SIDO=48; RUN;
DATA A.D2_S17; SET A.D2; IF SIDO=50; RUN;

DATA A.D3_S01; SET A.D3; IF SIDO=11; RUN;DATA A.D3_S02; SET A.D3; IF SIDO=26; RUN;
DATA A.D3_S03; SET A.D3; IF SIDO=27; RUN;DATA A.D3_S04; SET A.D3; IF SIDO=28; RUN;
DATA A.D3_S05; SET A.D3; IF SIDO=29; RUN;DATA A.D3_S06; SET A.D3; IF SIDO=30; RUN;
DATA A.D3_S07; SET A.D3; IF SIDO=31; RUN;DATA A.D3_S08; SET A.D3; IF SIDO=36; RUN;
DATA A.D3_S09; SET A.D3; IF SIDO=41; RUN;DATA A.D3_S10; SET A.D3; IF SIDO=42; RUN;
DATA A.D3_S11; SET A.D3; IF SIDO=43; RUN;DATA A.D3_S12; SET A.D3; IF SIDO=44; RUN;
DATA A.D3_S13; SET A.D3; IF SIDO=45; RUN;DATA A.D3_S14; SET A.D3; IF SIDO=46; RUN;
DATA A.D3_S15; SET A.D3; IF SIDO=47; RUN;DATA A.D3_S16; SET A.D3; IF SIDO=48; RUN;
DATA A.D3_S17; SET A.D3; IF SIDO=50; RUN;

DATA A.D4_S01; SET A.D4; IF SIDO=11; RUN;DATA A.D4_S02; SET A.D4; IF SIDO=26; RUN;
DATA A.D4_S03; SET A.D4; IF SIDO=27; RUN;DATA A.D4_S04; SET A.D4; IF SIDO=28; RUN;
DATA A.D4_S05; SET A.D4; IF SIDO=29; RUN;DATA A.D4_S06; SET A.D4; IF SIDO=30; RUN;
DATA A.D4_S07; SET A.D4; IF SIDO=31; RUN;DATA A.D4_S08; SET A.D4; IF SIDO=36; RUN;
DATA A.D4_S09; SET A.D4; IF SIDO=41; RUN;DATA A.D4_S10; SET A.D4; IF SIDO=42; RUN;
DATA A.D4_S11; SET A.D4; IF SIDO=43; RUN;DATA A.D4_S12; SET A.D4; IF SIDO=44; RUN;
DATA A.D4_S13; SET A.D4; IF SIDO=45; RUN;DATA A.D4_S14; SET A.D4; IF SIDO=46; RUN;
DATA A.D4_S15; SET A.D4; IF SIDO=47; RUN;DATA A.D4_S16; SET A.D4; IF SIDO=48; RUN;
DATA A.D4_S17; SET A.D4; IF SIDO=50; RUN;

DATA A.DAT1_S01; SET A.DAT1; IF SIDO=11; RUN;DATA A.DAT1_S02; SET A.DAT1; IF SIDO=26; RUN;
DATA A.DAT1_S03; SET A.DAT1; IF SIDO=27; RUN;DATA A.DAT1_S04; SET A.DAT1; IF SIDO=28; RUN;
DATA A.DAT1_S05; SET A.DAT1; IF SIDO=29; RUN;DATA A.DAT1_S06; SET A.DAT1; IF SIDO=30; RUN;
DATA A.DAT1_S07; SET A.DAT1; IF SIDO=31; RUN;DATA A.DAT1_S08; SET A.DAT1; IF SIDO=36; RUN;
DATA A.DAT1_S09; SET A.DAT1; IF SIDO=41; RUN;DATA A.DAT1_S10; SET A.DAT1; IF SIDO=42; RUN;
DATA A.DAT1_S11; SET A.DAT1; IF SIDO=43; RUN;DATA A.DAT1_S12; SET A.DAT1; IF SIDO=44; RUN;
DATA A.DAT1_S13; SET A.DAT1; IF SIDO=45; RUN;DATA A.DAT1_S14; SET A.DAT1; IF SIDO=46; RUN;
DATA A.DAT1_S15; SET A.DAT1; IF SIDO=47; RUN;DATA A.DAT1_S16; SET A.DAT1; IF SIDO=48; RUN;
DATA A.DAT1_S17; SET A.DAT1; IF SIDO=50; RUN;

DATA A.DAT2_S01; SET A.DAT2; IF SIDO=11; RUN;DATA A.DAT2_S02; SET A.DAT2; IF SIDO=26; RUN;
DATA A.DAT2_S03; SET A.DAT2; IF SIDO=27; RUN;DATA A.DAT2_S04; SET A.DAT2; IF SIDO=28; RUN;
DATA A.DAT2_S05; SET A.DAT2; IF SIDO=29; RUN;DATA A.DAT2_S06; SET A.DAT2; IF SIDO=30; RUN;
DATA A.DAT2_S07; SET A.DAT2; IF SIDO=31; RUN;DATA A.DAT2_S08; SET A.DAT2; IF SIDO=36; RUN;
DATA A.DAT2_S09; SET A.DAT2; IF SIDO=41; RUN;DATA A.DAT2_S10; SET A.DAT2; IF SIDO=42; RUN;
DATA A.DAT2_S11; SET A.DAT2; IF SIDO=43; RUN;DATA A.DAT2_S12; SET A.DAT2; IF SIDO=44; RUN;
DATA A.DAT2_S13; SET A.DAT2; IF SIDO=45; RUN;DATA A.DAT2_S14; SET A.DAT2; IF SIDO=46; RUN;
DATA A.DAT2_S15; SET A.DAT2; IF SIDO=47; RUN;DATA A.DAT2_S16; SET A.DAT2; IF SIDO=48; RUN;
DATA A.DAT2_S17; SET A.DAT2; IF SIDO=50; RUN;

/*서울*/
%mod4(A.D1_S01,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D1_S01,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D1_S01,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D1_S01,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D2_S01,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D2_S01,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D2_S01,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D2_S01,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D3_S01,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D3_S01,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D3_S01,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D3_S01,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(A.D4_S01,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D4_S01,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D4_S01,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D4_S01,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(a.Dat1_S01,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat1_S01,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat1_S01,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat1_S01,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod4(a.Dat2_S01,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat2_S01,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat2_S01,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat2_S01,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod4_S01_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S01_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S01_RESULT; SET MOD4_S01_RES_TOT MOD4_S01_RES;
IF PARAMETER IN ("PM25_M12","PM25_M24","PM25_M36","PM25_M48"); RUN;

/*부산*/
%mod4(A.D1_S02,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D1_S02,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D1_S02,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D1_S02,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D2_S02,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D2_S02,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D2_S02,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D2_S02,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D3_S02,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D3_S02,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D3_S02,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D3_S02,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(A.D4_S02,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D4_S02,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D4_S02,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D4_S02,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(a.Dat1_S02,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat1_S02,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat1_S02,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat1_S02,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod4(a.Dat2_S02,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat2_S02,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat2_S02,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat2_S02,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod4_S02_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S02_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S02_RESULT; SET MOD4_S02_RES_TOT MOD4_S02_RES;
IF PARAMETER IN ("PM25_M12","PM25_M24","PM25_M36","PM25_M48"); RUN;

/*대구*/
%mod4(A.D1_S03,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D1_S03,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D1_S03,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D1_S03,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D2_S03,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D2_S03,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D2_S03,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D2_S03,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D3_S03,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D3_S03,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D3_S03,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D3_S03,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(A.D4_S03,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D4_S03,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D4_S03,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D4_S03,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(a.Dat1_S03,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat1_S03,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat1_S03,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat1_S03,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod4(a.Dat2_S03,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat2_S03,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat2_S03,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat2_S03,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod4_S03_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S03_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S03_RESULT; SET MOD4_S03_RES_TOT MOD4_S03_RES;
IF PARAMETER IN ("PM25_M12","PM25_M24","PM25_M36","PM25_M48"); RUN;

/*인천*/
%mod4(A.D1_S04,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D1_S04,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D1_S04,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D1_S04,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D2_S04,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D2_S04,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D2_S04,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D2_S04,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D3_S04,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D3_S04,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D3_S04,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D3_S04,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(A.D4_S04,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D4_S04,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D4_S04,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D4_S04,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(a.Dat1_S04,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat1_S04,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat1_S04,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat1_S04,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod4(a.Dat2_S04,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat2_S04,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat2_S04,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat2_S04,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod4_S04_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S04_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S04_RESULT; SET MOD4_S04_RES_TOT MOD4_S04_RES;
IF PARAMETER IN ("PM25_M12","PM25_M24","PM25_M36","PM25_M48"); RUN;

/*광주*/
%mod4(A.D1_S05,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D1_S05,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D1_S05,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D1_S05,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D2_S05,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D2_S05,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D2_S05,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D2_S05,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D3_S05,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D3_S05,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D3_S05,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D3_S05,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(A.D4_S05,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D4_S05,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D4_S05,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D4_S05,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(a.Dat1_S05,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat1_S05,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat1_S05,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat1_S05,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod4(a.Dat2_S05,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat2_S05,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat2_S05,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat2_S05,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod4_S05_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S05_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S05_RESULT; SET MOD4_S05_RES_TOT MOD4_S05_RES;
IF PARAMETER IN ("PM25_M12","PM25_M24","PM25_M36","PM25_M48"); RUN;

/*대전*/
%mod4(A.D1_S06,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D1_S06,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D1_S06,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D1_S06,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D2_S06,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D2_S06,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D2_S06,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D2_S06,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D3_S06,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D3_S06,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D3_S06,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D3_S06,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(A.D4_S06,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D4_S06,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D4_S06,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D4_S06,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(a.Dat1_S06,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat1_S06,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat1_S06,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat1_S06,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod4(a.Dat2_S06,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat2_S06,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat2_S06,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat2_S06,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod4_S06_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S06_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S06_RESULT; SET MOD4_S06_RES_TOT MOD4_S06_RES;
IF PARAMETER IN ("PM25_M12","PM25_M24","PM25_M36","PM25_M48"); RUN;

/*울산*/
%mod4(A.D1_S07,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D1_S07,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D1_S07,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D1_S07,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D2_S07,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D2_S07,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D2_S07,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D2_S07,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D3_S07,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D3_S07,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D3_S07,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D3_S07,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(A.D4_S07,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D4_S07,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D4_S07,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D4_S07,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(a.Dat1_S07,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat1_S07,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat1_S07,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat1_S07,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod4(a.Dat2_S07,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat2_S07,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat2_S07,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat2_S07,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod4_S07_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S07_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S07_RESULT; SET MOD4_S07_RES_TOT MOD4_S07_RES;
IF PARAMETER IN ("PM25_M12","PM25_M24","PM25_M36","PM25_M48"); RUN;

/*세종*/
%mod4(A.D1_S08,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D1_S08,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D1_S08,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D1_S08,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D2_S08,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D2_S08,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D2_S08,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D2_S08,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D3_S08,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D3_S08,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D3_S08,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D3_S08,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(A.D4_S08,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D4_S08,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D4_S08,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D4_S08,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(a.Dat1_S08,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat1_S08,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat1_S08,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat1_S08,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod4(a.Dat2_S08,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat2_S08,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat2_S08,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat2_S08,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod4_S08_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S08_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S08_RESULT; SET MOD4_S08_RES_TOT MOD4_S08_RES;
IF PARAMETER IN ("PM25_M12","PM25_M24","PM25_M36","PM25_M48"); RUN;

/*강원*/
%mod4(A.D1_S10,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D1_S10,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D1_S10,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D1_S10,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D2_S10,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D2_S10,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D2_S10,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D2_S10,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D3_S10,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D3_S10,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D3_S10,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D3_S10,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(A.D4_S10,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D4_S10,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D4_S10,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D4_S10,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(a.Dat1_S10,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat1_S10,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat1_S10,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat1_S10,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod4(a.Dat2_S10,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat2_S10,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat2_S10,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat2_S10,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod4_S10_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S10_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S10_RESULT; SET MOD4_S10_RES_TOT MOD4_S10_RES;
IF PARAMETER IN ("PM25_M12","PM25_M24","PM25_M36","PM25_M48"); RUN;

/*충북*/
%mod4(A.D1_S11,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D1_S11,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D1_S11,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D1_S11,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D2_S11,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D2_S11,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D2_S11,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D2_S11,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D3_S11,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D3_S11,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D3_S11,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D3_S11,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(A.D4_S11,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D4_S11,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D4_S11,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D4_S11,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(a.Dat1_S11,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat1_S11,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat1_S11,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat1_S11,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod4(a.Dat2_S11,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat2_S11,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat2_S11,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat2_S11,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod4_S11_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S11_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S11_RESULT; SET MOD4_S11_RES_TOT MOD4_S11_RES;
IF PARAMETER IN ("PM25_M12","PM25_M24","PM25_M36","PM25_M48"); RUN;

/*충남*/
%mod4(A.D1_S12,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D1_S12,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D1_S12,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D1_S12,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D2_S12,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D2_S12,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D2_S12,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D2_S12,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D3_S12,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D3_S12,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D3_S12,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D3_S12,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(A.D4_S12,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D4_S12,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D4_S12,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D4_S12,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(a.Dat1_S12,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat1_S12,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat1_S12,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat1_S12,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod4(a.Dat2_S12,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat2_S12,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat2_S12,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat2_S12,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod4_S12_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S12_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S12_RESULT; SET MOD4_S12_RES_TOT MOD4_S12_RES;
IF PARAMETER IN ("PM25_M12","PM25_M24","PM25_M36","PM25_M48"); RUN;

/*전북*/
%mod4(A.D1_S13,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D1_S13,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D1_S13,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D1_S13,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D2_S13,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D2_S13,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D2_S13,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D2_S13,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D3_S13,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D3_S13,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D3_S13,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D3_S13,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(A.D4_S13,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D4_S13,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D4_S13,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D4_S13,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(a.Dat1_S13,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat1_S13,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat1_S13,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat1_S13,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod4(a.Dat2_S13,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat2_S13,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat2_S13,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat2_S13,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod4_S13_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S13_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S13_RESULT; SET MOD4_S13_RES_TOT MOD4_S13_RES;
IF PARAMETER IN ("PM25_M12","PM25_M24","PM25_M36","PM25_M48"); RUN;

/*전남*/
%mod4(A.D1_S14,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D1_S14,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D1_S14,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D1_S14,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D2_S14,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D2_S14,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D2_S14,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D2_S14,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D3_S14,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D3_S14,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D3_S14,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D3_S14,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(A.D4_S14,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D4_S14,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D4_S14,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D4_S14,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(a.Dat1_S14,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat1_S14,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat1_S14,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat1_S14,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod4(a.Dat2_S14,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat2_S14,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat2_S14,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat2_S14,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod4_S14_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S14_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S14_RESULT; SET MOD4_S14_RES_TOT MOD4_S14_RES;
IF PARAMETER IN ("PM25_M12","PM25_M24","PM25_M36","PM25_M48"); RUN;

/*경북*/
%mod4(A.D1_S15,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D1_S15,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D1_S15,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D1_S15,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D2_S15,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D2_S15,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D2_S15,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D2_S15,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D3_S15,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D3_S15,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D3_S15,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D3_S15,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(A.D4_S15,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D4_S15,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D4_S15,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D4_S15,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(a.Dat1_S15,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat1_S15,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat1_S15,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat1_S15,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod4(a.Dat2_S15,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat2_S15,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat2_S15,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat2_S15,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod4_S15_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S15_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S15_RESULT; SET MOD4_S15_RES_TOT MOD4_S15_RES;
IF PARAMETER IN ("PM25_M12","PM25_M24","PM25_M36","PM25_M48"); RUN;

/*경남*/
%mod4(A.D1_S16,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D1_S16,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D1_S16,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D1_S16,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D2_S16,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D2_S16,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D2_S16,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D2_S16,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D3_S16,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D3_S16,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D3_S16,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D3_S16,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(A.D4_S16,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D4_S16,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D4_S16,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D4_S16,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(a.Dat1_S16,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat1_S16,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat1_S16,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat1_S16,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod4(a.Dat2_S16,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat2_S16,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat2_S16,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat2_S16,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod4_S16_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S16_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S16_RESULT; SET MOD4_S16_RES_TOT MOD4_S16_RES;
IF PARAMETER IN ("PM25_M12","PM25_M24","PM25_M36","PM25_M48"); RUN;

/*제주*/
%mod4(A.D1_S17,dat1_m_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D1_S17,dat1_m_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D1_S17,dat1_m_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D1_S17,dat1_m_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D2_S17,dat1_f_res1,event1,event1_time,PM25_M12,"PM25_M12");
%mod4(A.D2_S17,dat1_f_res2,event1,event1_time,PM25_M24,"PM25_M24");
%mod4(A.D2_S17,dat1_f_res3,event1,event1_time,PM25_M36,"PM25_M36");
%mod4(A.D2_S17,dat1_f_res4,event1,event1_time,PM25_M48,"PM25_M48");

%mod4(A.D3_S17,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D3_S17,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D3_S17,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D3_S17,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(A.D4_S17,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D4_S17,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D4_S17,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D4_S17,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(a.Dat1_S17,res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat1_S17,res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat1_S17,res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat1_S17,res4,event2,event2_time,PM25_M48,"PM25_M48");
%mod4(a.Dat2_S17,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat2_S17,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat2_S17,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat2_S17,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod4_S17_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S17_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S17_RESULT; SET MOD4_S17_RES_TOT MOD4_S17_RES;
IF PARAMETER IN ("PM25_M12","PM25_M24","PM25_M36","PM25_M48"); RUN;

/*********************************************************************************************************/
/*********************************************************************************************************/
/*서울*/
%mod4(A.D1_S01,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D1_S01,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D1_S01,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D1_S01,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D2_S01,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D2_S01,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D2_S01,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D2_S01,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D3_S01,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D3_S01,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D3_S01,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D3_S01,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(A.D4_S01,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D4_S01,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D4_S01,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D4_S01,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(a.Dat1_S01,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat1_S01,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat1_S01,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat1_S01,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod4(a.Dat2_S01,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat2_S01,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat2_S01,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat2_S01,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod4_S01_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S01_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S01_RESULT; SET MOD4_S01_RES_TOT MOD4_S01_RES;
IF PARAMETER IN ("PM10_M12","PM10_M24","PM10_M36","PM10_M48"); RUN;

/*부산*/
%mod4(A.D1_S02,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D1_S02,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D1_S02,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D1_S02,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D2_S02,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D2_S02,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D2_S02,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D2_S02,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D3_S02,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D3_S02,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D3_S02,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D3_S02,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(A.D4_S02,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D4_S02,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D4_S02,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D4_S02,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(a.Dat1_S02,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat1_S02,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat1_S02,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat1_S02,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod4(a.Dat2_S02,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat2_S02,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat2_S02,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat2_S02,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod4_S02_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S02_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S02_RESULT; SET MOD4_S02_RES_TOT MOD4_S02_RES;
IF PARAMETER IN ("PM10_M12","PM10_M24","PM10_M36","PM10_M48"); RUN;

/*대구*/
%mod4(A.D1_S03,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D1_S03,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D1_S03,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D1_S03,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D2_S03,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D2_S03,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D2_S03,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D2_S03,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D3_S03,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D3_S03,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D3_S03,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D3_S03,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(A.D4_S03,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D4_S03,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D4_S03,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D4_S03,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(a.Dat1_S03,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat1_S03,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat1_S03,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat1_S03,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod4(a.Dat2_S03,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat2_S03,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat2_S03,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat2_S03,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod4_S03_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S03_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S03_RESULT; SET MOD4_S03_RES_TOT MOD4_S03_RES;
IF PARAMETER IN ("PM10_M12","PM10_M24","PM10_M36","PM10_M48"); RUN;

/*인천*/
%mod4(A.D1_S04,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D1_S04,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D1_S04,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D1_S04,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D2_S04,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D2_S04,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D2_S04,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D2_S04,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D3_S04,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D3_S04,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D3_S04,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D3_S04,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(A.D4_S04,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D4_S04,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D4_S04,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D4_S04,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(a.Dat1_S04,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat1_S04,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat1_S04,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat1_S04,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod4(a.Dat2_S04,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat2_S04,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat2_S04,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat2_S04,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod4_S04_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S04_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S04_RESULT; SET MOD4_S04_RES_TOT MOD4_S04_RES;
IF PARAMETER IN ("PM10_M12","PM10_M24","PM10_M36","PM10_M48"); RUN;

/*광주*/
%mod4(A.D1_S05,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D1_S05,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D1_S05,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D1_S05,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D2_S05,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D2_S05,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D2_S05,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D2_S05,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D3_S05,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D3_S05,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D3_S05,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D3_S05,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(A.D4_S05,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D4_S05,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D4_S05,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D4_S05,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(a.Dat1_S05,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat1_S05,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat1_S05,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat1_S05,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod4(a.Dat2_S05,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat2_S05,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat2_S05,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat2_S05,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod4_S05_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S05_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S05_RESULT; SET MOD4_S05_RES_TOT MOD4_S05_RES;
IF PARAMETER IN ("PM10_M12","PM10_M24","PM10_M36","PM10_M48"); RUN;

/*대전*/
%mod4(A.D1_S06,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D1_S06,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D1_S06,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D1_S06,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D2_S06,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D2_S06,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D2_S06,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D2_S06,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D3_S06,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D3_S06,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D3_S06,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D3_S06,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(A.D4_S06,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D4_S06,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D4_S06,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D4_S06,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(a.Dat1_S06,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat1_S06,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat1_S06,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat1_S06,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod4(a.Dat2_S06,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat2_S06,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat2_S06,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat2_S06,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod4_S06_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S06_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S06_RESULT; SET MOD4_S06_RES_TOT MOD4_S06_RES;
IF PARAMETER IN ("PM10_M12","PM10_M24","PM10_M36","PM10_M48"); RUN;

/*울산*/
%mod4(A.D1_S07,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D1_S07,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D1_S07,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D1_S07,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D2_S07,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D2_S07,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D2_S07,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D2_S07,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D3_S07,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D3_S07,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D3_S07,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D3_S07,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(A.D4_S07,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D4_S07,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D4_S07,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D4_S07,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(a.Dat1_S07,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat1_S07,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat1_S07,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat1_S07,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod4(a.Dat2_S07,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat2_S07,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat2_S07,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat2_S07,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod4_S07_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S07_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S07_RESULT; SET MOD4_S07_RES_TOT MOD4_S07_RES;
IF PARAMETER IN ("PM10_M12","PM10_M24","PM10_M36","PM10_M48"); RUN;

/*세종*/
%mod4(A.D1_S08,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D1_S08,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D1_S08,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D1_S08,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D2_S08,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D2_S08,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D2_S08,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D2_S08,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D3_S08,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D3_S08,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D3_S08,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D3_S08,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(A.D4_S08,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D4_S08,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D4_S08,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D4_S08,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(a.Dat1_S08,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat1_S08,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat1_S08,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat1_S08,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod4(a.Dat2_S08,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat2_S08,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat2_S08,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat2_S08,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod4_S08_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S08_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S08_RESULT; SET MOD4_S08_RES_TOT MOD4_S08_RES;
IF PARAMETER IN ("PM10_M12","PM10_M24","PM10_M36","PM10_M48"); RUN;

/*경기*/
%mod4(A.D1_S09,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D1_S09,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D1_S09,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D1_S09,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D2_S09,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D2_S09,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D2_S09,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D2_S09,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D3_S09,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D3_S09,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D3_S09,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D3_S09,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(A.D4_S09,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D4_S09,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D4_S09,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D4_S09,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(a.Dat1_S09,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat1_S09,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat1_S09,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat1_S09,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod4(a.Dat2_S09,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat2_S09,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat2_S09,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat2_S09,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod4_S09_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S09_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S09_RESULT; SET MOD4_S09_RES_TOT MOD4_S09_RES;
IF PARAMETER IN ("PM10_M12","PM10_M24","PM10_M36","PM10_M48"); RUN;

/*강원*/
%mod4(A.D1_S10,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D1_S10,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D1_S10,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D1_S10,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D2_S10,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D2_S10,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D2_S10,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D2_S10,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D3_S10,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D3_S10,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D3_S10,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D3_S10,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(A.D4_S10,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D4_S10,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D4_S10,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D4_S10,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(a.Dat1_S10,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat1_S10,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat1_S10,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat1_S10,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod4(a.Dat2_S10,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat2_S10,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat2_S10,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat2_S10,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod4_S10_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S10_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S10_RESULT; SET MOD4_S10_RES_TOT MOD4_S10_RES;
IF PARAMETER IN ("PM10_M12","PM10_M24","PM10_M36","PM10_M48"); RUN;

/*충북*/
%mod4(A.D1_S11,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D1_S11,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D1_S11,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D1_S11,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D2_S11,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D2_S11,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D2_S11,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D2_S11,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D3_S11,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D3_S11,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D3_S11,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D3_S11,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(A.D4_S11,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D4_S11,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D4_S11,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D4_S11,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(a.Dat1_S11,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat1_S11,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat1_S11,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat1_S11,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod4(a.Dat2_S11,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat2_S11,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat2_S11,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat2_S11,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod4_S11_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S11_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S11_RESULT; SET MOD4_S11_RES_TOT MOD4_S11_RES;
IF PARAMETER IN ("PM10_M12","PM10_M24","PM10_M36","PM10_M48"); RUN;

/*충남*/
%mod4(A.D1_S12,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D1_S12,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D1_S12,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D1_S12,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D2_S12,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D2_S12,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D2_S12,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D2_S12,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D3_S12,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D3_S12,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D3_S12,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D3_S12,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(A.D4_S12,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D4_S12,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D4_S12,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D4_S12,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(a.Dat1_S12,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat1_S12,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat1_S12,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat1_S12,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod4(a.Dat2_S12,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat2_S12,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat2_S12,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat2_S12,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod4_S12_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S12_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S12_RESULT; SET MOD4_S12_RES_TOT MOD4_S12_RES;
IF PARAMETER IN ("PM10_M12","PM10_M24","PM10_M36","PM10_M48"); RUN;

/*전북*/
%mod4(A.D1_S13,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D1_S13,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D1_S13,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D1_S13,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D2_S13,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D2_S13,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D2_S13,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D2_S13,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D3_S13,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D3_S13,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D3_S13,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D3_S13,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(A.D4_S13,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D4_S13,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D4_S13,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D4_S13,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(a.Dat1_S13,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat1_S13,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat1_S13,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat1_S13,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod4(a.Dat2_S13,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat2_S13,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat2_S13,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat2_S13,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod4_S13_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S13_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S13_RESULT; SET MOD4_S13_RES_TOT MOD4_S13_RES;
IF PARAMETER IN ("PM10_M12","PM10_M24","PM10_M36","PM10_M48"); RUN;

/*전남*/
%mod4(A.D1_S14,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D1_S14,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D1_S14,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D1_S14,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D2_S14,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D2_S14,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D2_S14,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D2_S14,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D3_S14,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D3_S14,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D3_S14,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D3_S14,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(A.D4_S14,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D4_S14,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D4_S14,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D4_S14,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(a.Dat1_S14,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat1_S14,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat1_S14,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat1_S14,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod4(a.Dat2_S14,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat2_S14,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat2_S14,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat2_S14,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod4_S14_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S14_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S14_RESULT; SET MOD4_S14_RES_TOT MOD4_S14_RES;
IF PARAMETER IN ("PM10_M12","PM10_M24","PM10_M36","PM10_M48"); RUN;

/*경북*/
%mod4(A.D1_S15,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D1_S15,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D1_S15,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D1_S15,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D2_S15,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D2_S15,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D2_S15,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D2_S15,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D3_S15,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D3_S15,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D3_S15,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D3_S15,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(A.D4_S15,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D4_S15,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D4_S15,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D4_S15,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(a.Dat1_S15,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat1_S15,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat1_S15,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat1_S15,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod4(a.Dat2_S15,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat2_S15,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat2_S15,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat2_S15,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod4_S15_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S15_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S15_RESULT; SET MOD4_S15_RES_TOT MOD4_S15_RES;
IF PARAMETER IN ("PM10_M12","PM10_M24","PM10_M36","PM10_M48"); RUN;

/*경남*/
%mod4(A.D1_S16,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D1_S16,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D1_S16,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D1_S16,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D2_S16,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D2_S16,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D2_S16,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D2_S16,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D3_S16,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D3_S16,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D3_S16,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D3_S16,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(A.D4_S16,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D4_S16,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D4_S16,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D4_S16,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(a.Dat1_S16,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat1_S16,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat1_S16,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat1_S16,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod4(a.Dat2_S16,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat2_S16,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat2_S16,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat2_S16,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod4_S16_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S16_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S16_RESULT; SET MOD4_S16_RES_TOT MOD4_S16_RES;
IF PARAMETER IN ("PM10_M12","PM10_M24","PM10_M36","PM10_M48"); RUN;

/*제주*/
%mod4(A.D1_S17,dat1_m_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D1_S17,dat1_m_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D1_S17,dat1_m_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D1_S17,dat1_m_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D2_S17,dat1_f_res1,event1,event1_time,PM10_M12,"PM10_M12");
%mod4(A.D2_S17,dat1_f_res2,event1,event1_time,PM10_M24,"PM10_M24");
%mod4(A.D2_S17,dat1_f_res3,event1,event1_time,PM10_M36,"PM10_M36");
%mod4(A.D2_S17,dat1_f_res4,event1,event1_time,PM10_M48,"PM10_M48");

%mod4(A.D3_S17,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D3_S17,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D3_S17,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D3_S17,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(A.D4_S17,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D4_S17,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D4_S17,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D4_S17,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(a.Dat1_S17,res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat1_S17,res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat1_S17,res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat1_S17,res4,event2,event2_time,PM10_M48,"PM10_M48");
%mod4(a.Dat2_S17,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat2_S17,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat2_S17,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat2_S17,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod4_S17_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S17_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S17_RESULT; SET MOD4_S17_RES_TOT MOD4_S17_RES;
IF PARAMETER IN ("PM10_M12","PM10_M24","PM10_M36","PM10_M48"); RUN;

/*********************************************************************************************************/
/*********************************************************************************************************/
/*서울*/
%mod4(A.D1_S01,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D1_S01,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D1_S01,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D1_S01,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D2_S01,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D2_S01,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D2_S01,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D2_S01,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D3_S01,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D3_S01,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D3_S01,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D3_S01,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(A.D4_S01,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D4_S01,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D4_S01,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D4_S01,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(a.Dat1_S01,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat1_S01,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat1_S01,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat1_S01,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod4(a.Dat2_S01,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat2_S01,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat2_S01,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat2_S01,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod4_S01_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S01_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S01_RESULT; SET MOD4_S01_RES_TOT MOD4_S01_RES;
IF PARAMETER IN ("SO2_M12","SO2_M24","SO2_M36","SO2_M48"); RUN;

/*부산*/
%mod4(A.D1_S02,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D1_S02,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D1_S02,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D1_S02,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D2_S02,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D2_S02,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D2_S02,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D2_S02,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D3_S02,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D3_S02,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D3_S02,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D3_S02,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(A.D4_S02,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D4_S02,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D4_S02,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D4_S02,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(a.Dat1_S02,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat1_S02,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat1_S02,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat1_S02,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod4(a.Dat2_S02,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat2_S02,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat2_S02,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat2_S02,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod4_S02_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S02_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S02_RESULT; SET MOD4_S02_RES_TOT MOD4_S02_RES;
IF PARAMETER IN ("SO2_M12","SO2_M24","SO2_M36","SO2_M48"); RUN;

/*대구*/
%mod4(A.D1_S03,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D1_S03,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D1_S03,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D1_S03,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D2_S03,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D2_S03,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D2_S03,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D2_S03,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D3_S03,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D3_S03,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D3_S03,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D3_S03,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(A.D4_S03,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D4_S03,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D4_S03,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D4_S03,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(a.Dat1_S03,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat1_S03,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat1_S03,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat1_S03,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod4(a.Dat2_S03,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat2_S03,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat2_S03,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat2_S03,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod4_S03_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S03_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S03_RESULT; SET MOD4_S03_RES_TOT MOD4_S03_RES;
IF PARAMETER IN ("SO2_M12","SO2_M24","SO2_M36","SO2_M48"); RUN;

/*인천*/
%mod4(A.D1_S04,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D1_S04,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D1_S04,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D1_S04,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D2_S04,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D2_S04,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D2_S04,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D2_S04,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D3_S04,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D3_S04,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D3_S04,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D3_S04,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(A.D4_S04,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D4_S04,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D4_S04,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D4_S04,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(a.Dat1_S04,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat1_S04,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat1_S04,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat1_S04,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod4(a.Dat2_S04,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat2_S04,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat2_S04,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat2_S04,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod4_S04_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S04_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S04_RESULT; SET MOD4_S04_RES_TOT MOD4_S04_RES;
IF PARAMETER IN ("SO2_M12","SO2_M24","SO2_M36","SO2_M48"); RUN;

/*광주*/
%mod4(A.D1_S05,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D1_S05,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D1_S05,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D1_S05,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D2_S05,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D2_S05,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D2_S05,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D2_S05,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D3_S05,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D3_S05,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D3_S05,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D3_S05,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(A.D4_S05,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D4_S05,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D4_S05,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D4_S05,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(a.Dat1_S05,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat1_S05,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat1_S05,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat1_S05,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod4(a.Dat2_S05,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat2_S05,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat2_S05,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat2_S05,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod4_S05_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S05_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S05_RESULT; SET MOD4_S05_RES_TOT MOD4_S05_RES;
IF PARAMETER IN ("SO2_M12","SO2_M24","SO2_M36","SO2_M48"); RUN;

/*대전*/
%mod4(A.D1_S06,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D1_S06,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D1_S06,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D1_S06,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D2_S06,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D2_S06,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D2_S06,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D2_S06,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D3_S06,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D3_S06,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D3_S06,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D3_S06,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(A.D4_S06,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D4_S06,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D4_S06,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D4_S06,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(a.Dat1_S06,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat1_S06,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat1_S06,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat1_S06,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod4(a.Dat2_S06,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat2_S06,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat2_S06,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat2_S06,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod4_S06_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S06_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S06_RESULT; SET MOD4_S06_RES_TOT MOD4_S06_RES;
IF PARAMETER IN ("SO2_M12","SO2_M24","SO2_M36","SO2_M48"); RUN;

/*울산*/
%mod4(A.D1_S07,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D1_S07,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D1_S07,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D1_S07,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D2_S07,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D2_S07,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D2_S07,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D2_S07,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D3_S07,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D3_S07,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D3_S07,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D3_S07,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(A.D4_S07,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D4_S07,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D4_S07,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D4_S07,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(a.Dat1_S07,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat1_S07,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat1_S07,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat1_S07,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod4(a.Dat2_S07,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat2_S07,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat2_S07,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat2_S07,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod4_S07_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S07_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S07_RESULT; SET MOD4_S07_RES_TOT MOD4_S07_RES;
IF PARAMETER IN ("SO2_M12","SO2_M24","SO2_M36","SO2_M48"); RUN;

/*세종*/
%mod4(A.D1_S08,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D1_S08,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D1_S08,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D1_S08,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D2_S08,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D2_S08,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D2_S08,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D2_S08,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D3_S08,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D3_S08,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D3_S08,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D3_S08,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(A.D4_S08,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D4_S08,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D4_S08,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D4_S08,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(a.Dat1_S08,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat1_S08,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat1_S08,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat1_S08,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod4(a.Dat2_S08,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat2_S08,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat2_S08,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat2_S08,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod4_S08_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S08_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S08_RESULT; SET MOD4_S08_RES_TOT MOD4_S08_RES;
IF PARAMETER IN ("SO2_M12","SO2_M24","SO2_M36","SO2_M48"); RUN;

/*경기*/
%mod4(A.D1_S09,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D1_S09,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D1_S09,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D1_S09,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D2_S09,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D2_S09,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D2_S09,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D2_S09,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D3_S09,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D3_S09,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D3_S09,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D3_S09,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(A.D4_S09,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D4_S09,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D4_S09,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D4_S09,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(a.Dat1_S09,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat1_S09,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat1_S09,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat1_S09,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod4(a.Dat2_S09,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat2_S09,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat2_S09,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat2_S09,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod4_S09_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S09_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S09_RESULT; SET MOD4_S09_RES_TOT MOD4_S09_RES;
IF PARAMETER IN ("SO2_M12","SO2_M24","SO2_M36","SO2_M48"); RUN;

/*강원*/
%mod4(A.D1_S10,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D1_S10,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D1_S10,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D1_S10,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D2_S10,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D2_S10,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D2_S10,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D2_S10,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D3_S10,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D3_S10,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D3_S10,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D3_S10,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(A.D4_S10,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D4_S10,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D4_S10,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D4_S10,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(a.Dat1_S10,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat1_S10,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat1_S10,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat1_S10,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod4(a.Dat2_S10,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat2_S10,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat2_S10,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat2_S10,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod4_S10_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S10_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S10_RESULT; SET MOD4_S10_RES_TOT MOD4_S10_RES;
IF PARAMETER IN ("SO2_M12","SO2_M24","SO2_M36","SO2_M48"); RUN;

/*충북*/
%mod4(A.D1_S11,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D1_S11,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D1_S11,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D1_S11,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D2_S11,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D2_S11,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D2_S11,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D2_S11,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D3_S11,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D3_S11,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D3_S11,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D3_S11,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(A.D4_S11,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D4_S11,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D4_S11,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D4_S11,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(a.Dat1_S11,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat1_S11,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat1_S11,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat1_S11,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod4(a.Dat2_S11,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat2_S11,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat2_S11,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat2_S11,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod4_S11_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S11_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S11_RESULT; SET MOD4_S11_RES_TOT MOD4_S11_RES;
IF PARAMETER IN ("SO2_M12","SO2_M24","SO2_M36","SO2_M48"); RUN;

/*충남*/
%mod4(A.D1_S12,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D1_S12,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D1_S12,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D1_S12,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D2_S12,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D2_S12,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D2_S12,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D2_S12,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D3_S12,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D3_S12,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D3_S12,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D3_S12,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(A.D4_S12,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D4_S12,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D4_S12,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D4_S12,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(a.Dat1_S12,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat1_S12,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat1_S12,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat1_S12,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod4(a.Dat2_S12,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat2_S12,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat2_S12,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat2_S12,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod4_S12_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S12_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S12_RESULT; SET MOD4_S12_RES_TOT MOD4_S12_RES;
IF PARAMETER IN ("SO2_M12","SO2_M24","SO2_M36","SO2_M48"); RUN;

/*전북*/
%mod4(A.D1_S13,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D1_S13,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D1_S13,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D1_S13,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D2_S13,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D2_S13,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D2_S13,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D2_S13,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D3_S13,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D3_S13,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D3_S13,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D3_S13,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(A.D4_S13,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D4_S13,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D4_S13,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D4_S13,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(a.Dat1_S13,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat1_S13,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat1_S13,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat1_S13,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod4(a.Dat2_S13,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat2_S13,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat2_S13,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat2_S13,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod4_S13_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S13_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S13_RESULT; SET MOD4_S13_RES_TOT MOD4_S13_RES;
IF PARAMETER IN ("SO2_M12","SO2_M24","SO2_M36","SO2_M48"); RUN;

/*전남*/
%mod4(A.D1_S14,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D1_S14,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D1_S14,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D1_S14,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D2_S14,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D2_S14,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D2_S14,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D2_S14,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D3_S14,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D3_S14,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D3_S14,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D3_S14,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(A.D4_S14,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D4_S14,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D4_S14,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D4_S14,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(a.Dat1_S14,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat1_S14,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat1_S14,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat1_S14,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod4(a.Dat2_S14,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat2_S14,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat2_S14,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat2_S14,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod4_S14_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S14_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S14_RESULT; SET MOD4_S14_RES_TOT MOD4_S14_RES;
IF PARAMETER IN ("SO2_M12","SO2_M24","SO2_M36","SO2_M48"); RUN;

/*경북*/
%mod4(A.D1_S15,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D1_S15,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D1_S15,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D1_S15,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D2_S15,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D2_S15,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D2_S15,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D2_S15,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D3_S15,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D3_S15,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D3_S15,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D3_S15,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(A.D4_S15,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D4_S15,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D4_S15,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D4_S15,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(a.Dat1_S15,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat1_S15,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat1_S15,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat1_S15,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod4(a.Dat2_S15,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat2_S15,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat2_S15,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat2_S15,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod4_S15_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S15_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S15_RESULT; SET MOD4_S15_RES_TOT MOD4_S15_RES;
IF PARAMETER IN ("SO2_M12","SO2_M24","SO2_M36","SO2_M48"); RUN;

/*경남*/
%mod4(A.D1_S16,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D1_S16,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D1_S16,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D1_S16,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D2_S16,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D2_S16,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D2_S16,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D2_S16,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D3_S16,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D3_S16,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D3_S16,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D3_S16,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(A.D4_S16,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D4_S16,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D4_S16,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D4_S16,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(a.Dat1_S16,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat1_S16,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat1_S16,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat1_S16,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod4(a.Dat2_S16,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat2_S16,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat2_S16,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat2_S16,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod4_S16_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S16_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S16_RESULT; SET MOD4_S16_RES_TOT MOD4_S16_RES;
IF PARAMETER IN ("SO2_M12","SO2_M24","SO2_M36","SO2_M48"); RUN;

/*제주*/
%mod4(A.D1_S17,dat1_m_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D1_S17,dat1_m_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D1_S17,dat1_m_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D1_S17,dat1_m_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D2_S17,dat1_f_res1,event1,event1_time,SO2_M12,"SO2_M12");
%mod4(A.D2_S17,dat1_f_res2,event1,event1_time,SO2_M24,"SO2_M24");
%mod4(A.D2_S17,dat1_f_res3,event1,event1_time,SO2_M36,"SO2_M36");
%mod4(A.D2_S17,dat1_f_res4,event1,event1_time,SO2_M48,"SO2_M48");

%mod4(A.D3_S17,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D3_S17,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D3_S17,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D3_S17,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(A.D4_S17,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D4_S17,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D4_S17,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D4_S17,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(a.Dat1_S17,res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat1_S17,res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat1_S17,res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat1_S17,res4,event2,event2_time,SO2_M48,"SO2_M48");
%mod4(a.Dat2_S17,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat2_S17,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat2_S17,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat2_S17,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod4_S17_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S17_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S17_RESULT; SET MOD4_S17_RES_TOT MOD4_S17_RES;
IF PARAMETER IN ("SO2_M12","SO2_M24","SO2_M36","SO2_M48"); RUN;

/*********************************************************************************************************/
/*********************************************************************************************************/
/*서울*/
%mod4(A.D1_S01,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D1_S01,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D1_S01,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D1_S01,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D2_S01,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D2_S01,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D2_S01,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D2_S01,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D3_S01,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D3_S01,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D3_S01,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D3_S01,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(A.D4_S01,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D4_S01,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D4_S01,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D4_S01,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(a.Dat1_S01,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat1_S01,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat1_S01,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat1_S01,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod4(a.Dat2_S01,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat2_S01,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat2_S01,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat2_S01,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod4_S01_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S01_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S01_RESULT; SET MOD4_S01_RES_TOT MOD4_S01_RES;
IF PARAMETER IN ("NO2_M12","NO2_M24","NO2_M36","NO2_M48"); RUN;

/*부산*/
%mod4(A.D1_S02,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D1_S02,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D1_S02,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D1_S02,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D2_S02,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D2_S02,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D2_S02,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D2_S02,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D3_S02,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D3_S02,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D3_S02,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D3_S02,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(A.D4_S02,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D4_S02,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D4_S02,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D4_S02,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(a.Dat1_S02,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat1_S02,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat1_S02,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat1_S02,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod4(a.Dat2_S02,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat2_S02,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat2_S02,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat2_S02,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod4_S02_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S02_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S02_RESULT; SET MOD4_S02_RES_TOT MOD4_S02_RES;
IF PARAMETER IN ("NO2_M12","NO2_M24","NO2_M36","NO2_M48"); RUN;

/*대구*/
%mod4(A.D1_S03,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D1_S03,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D1_S03,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D1_S03,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D2_S03,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D2_S03,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D2_S03,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D2_S03,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D3_S03,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D3_S03,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D3_S03,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D3_S03,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(A.D4_S03,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D4_S03,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D4_S03,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D4_S03,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(a.Dat1_S03,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat1_S03,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat1_S03,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat1_S03,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod4(a.Dat2_S03,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat2_S03,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat2_S03,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat2_S03,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod4_S03_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S03_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S03_RESULT; SET MOD4_S03_RES_TOT MOD4_S03_RES;
IF PARAMETER IN ("NO2_M12","NO2_M24","NO2_M36","NO2_M48"); RUN;

/*인천*/
%mod4(A.D1_S04,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D1_S04,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D1_S04,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D1_S04,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D2_S04,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D2_S04,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D2_S04,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D2_S04,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D3_S04,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D3_S04,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D3_S04,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D3_S04,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(A.D4_S04,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D4_S04,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D4_S04,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D4_S04,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(a.Dat1_S04,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat1_S04,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat1_S04,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat1_S04,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod4(a.Dat2_S04,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat2_S04,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat2_S04,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat2_S04,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod4_S04_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S04_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S04_RESULT; SET MOD4_S04_RES_TOT MOD4_S04_RES;
IF PARAMETER IN ("NO2_M12","NO2_M24","NO2_M36","NO2_M48"); RUN;

/*광주*/
%mod4(A.D1_S05,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D1_S05,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D1_S05,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D1_S05,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D2_S05,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D2_S05,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D2_S05,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D2_S05,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D3_S05,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D3_S05,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D3_S05,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D3_S05,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(A.D4_S05,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D4_S05,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D4_S05,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D4_S05,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(a.Dat1_S05,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat1_S05,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat1_S05,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat1_S05,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod4(a.Dat2_S05,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat2_S05,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat2_S05,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat2_S05,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod4_S05_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S05_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S05_RESULT; SET MOD4_S05_RES_TOT MOD4_S05_RES;
IF PARAMETER IN ("NO2_M12","NO2_M24","NO2_M36","NO2_M48"); RUN;

/*대전*/
%mod4(A.D1_S06,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D1_S06,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D1_S06,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D1_S06,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D2_S06,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D2_S06,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D2_S06,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D2_S06,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D3_S06,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D3_S06,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D3_S06,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D3_S06,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(A.D4_S06,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D4_S06,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D4_S06,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D4_S06,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(a.Dat1_S06,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat1_S06,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat1_S06,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat1_S06,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod4(a.Dat2_S06,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat2_S06,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat2_S06,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat2_S06,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod4_S06_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S06_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S06_RESULT; SET MOD4_S06_RES_TOT MOD4_S06_RES;
IF PARAMETER IN ("NO2_M12","NO2_M24","NO2_M36","NO2_M48"); RUN;

/*울산*/
%mod4(A.D1_S07,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D1_S07,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D1_S07,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D1_S07,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D2_S07,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D2_S07,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D2_S07,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D2_S07,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D3_S07,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D3_S07,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D3_S07,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D3_S07,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(A.D4_S07,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D4_S07,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D4_S07,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D4_S07,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(a.Dat1_S07,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat1_S07,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat1_S07,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat1_S07,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod4(a.Dat2_S07,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat2_S07,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat2_S07,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat2_S07,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod4_S07_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S07_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S07_RESULT; SET MOD4_S07_RES_TOT MOD4_S07_RES;
IF PARAMETER IN ("NO2_M12","NO2_M24","NO2_M36","NO2_M48"); RUN;

/*세종*/
%mod4(A.D1_S08,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D1_S08,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D1_S08,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D1_S08,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D2_S08,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D2_S08,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D2_S08,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D2_S08,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D3_S08,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D3_S08,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D3_S08,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D3_S08,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(A.D4_S08,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D4_S08,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D4_S08,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D4_S08,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(a.Dat1_S08,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat1_S08,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat1_S08,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat1_S08,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod4(a.Dat2_S08,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat2_S08,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat2_S08,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat2_S08,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod4_S08_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S08_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S08_RESULT; SET MOD4_S08_RES_TOT MOD4_S08_RES;
IF PARAMETER IN ("NO2_M12","NO2_M24","NO2_M36","NO2_M48"); RUN;

/*경기*/
%mod4(A.D1_S09,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D1_S09,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D1_S09,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D1_S09,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D2_S09,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D2_S09,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D2_S09,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D2_S09,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D3_S09,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D3_S09,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D3_S09,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D3_S09,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(A.D4_S09,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D4_S09,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D4_S09,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D4_S09,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(a.Dat1_S09,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat1_S09,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat1_S09,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat1_S09,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod4(a.Dat2_S09,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat2_S09,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat2_S09,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat2_S09,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod4_S09_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S09_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S09_RESULT; SET MOD4_S09_RES_TOT MOD4_S09_RES;
IF PARAMETER IN ("NO2_M12","NO2_M24","NO2_M36","NO2_M48"); RUN;

/*강원*/
%mod4(A.D1_S10,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D1_S10,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D1_S10,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D1_S10,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D2_S10,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D2_S10,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D2_S10,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D2_S10,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D3_S10,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D3_S10,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D3_S10,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D3_S10,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(A.D4_S10,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D4_S10,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D4_S10,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D4_S10,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(a.Dat1_S10,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat1_S10,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat1_S10,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat1_S10,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod4(a.Dat2_S10,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat2_S10,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat2_S10,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat2_S10,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod4_S10_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S10_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S10_RESULT; SET MOD4_S10_RES_TOT MOD4_S10_RES;
IF PARAMETER IN ("NO2_M12","NO2_M24","NO2_M36","NO2_M48"); RUN;

/*충북*/
%mod4(A.D1_S11,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D1_S11,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D1_S11,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D1_S11,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D2_S11,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D2_S11,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D2_S11,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D2_S11,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D3_S11,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D3_S11,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D3_S11,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D3_S11,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(A.D4_S11,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D4_S11,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D4_S11,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D4_S11,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(a.Dat1_S11,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat1_S11,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat1_S11,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat1_S11,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod4(a.Dat2_S11,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat2_S11,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat2_S11,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat2_S11,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod4_S11_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S11_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S11_RESULT; SET MOD4_S11_RES_TOT MOD4_S11_RES;
IF PARAMETER IN ("NO2_M12","NO2_M24","NO2_M36","NO2_M48"); RUN;

/*충남*/
%mod4(A.D1_S12,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D1_S12,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D1_S12,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D1_S12,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D2_S12,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D2_S12,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D2_S12,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D2_S12,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D3_S12,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D3_S12,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D3_S12,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D3_S12,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(A.D4_S12,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D4_S12,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D4_S12,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D4_S12,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(a.Dat1_S12,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat1_S12,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat1_S12,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat1_S12,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod4(a.Dat2_S12,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat2_S12,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat2_S12,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat2_S12,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod4_S12_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S12_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S12_RESULT; SET MOD4_S12_RES_TOT MOD4_S12_RES;
IF PARAMETER IN ("NO2_M12","NO2_M24","NO2_M36","NO2_M48"); RUN;

/*전북*/
%mod4(A.D1_S13,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D1_S13,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D1_S13,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D1_S13,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D2_S13,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D2_S13,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D2_S13,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D2_S13,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D3_S13,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D3_S13,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D3_S13,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D3_S13,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(A.D4_S13,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D4_S13,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D4_S13,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D4_S13,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(a.Dat1_S13,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat1_S13,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat1_S13,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat1_S13,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod4(a.Dat2_S13,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat2_S13,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat2_S13,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat2_S13,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod4_S13_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S13_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S13_RESULT; SET MOD4_S13_RES_TOT MOD4_S13_RES;
IF PARAMETER IN ("NO2_M12","NO2_M24","NO2_M36","NO2_M48"); RUN;

/*전남*/
%mod4(A.D1_S14,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D1_S14,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D1_S14,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D1_S14,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D2_S14,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D2_S14,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D2_S14,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D2_S14,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D3_S14,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D3_S14,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D3_S14,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D3_S14,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(A.D4_S14,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D4_S14,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D4_S14,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D4_S14,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(a.Dat1_S14,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat1_S14,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat1_S14,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat1_S14,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod4(a.Dat2_S14,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat2_S14,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat2_S14,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat2_S14,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod4_S14_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S14_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S14_RESULT; SET MOD4_S14_RES_TOT MOD4_S14_RES;
IF PARAMETER IN ("NO2_M12","NO2_M24","NO2_M36","NO2_M48"); RUN;

/*경북*/
%mod4(A.D1_S15,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D1_S15,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D1_S15,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D1_S15,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D2_S15,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D2_S15,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D2_S15,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D2_S15,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D3_S15,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D3_S15,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D3_S15,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D3_S15,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(A.D4_S15,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D4_S15,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D4_S15,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D4_S15,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(a.Dat1_S15,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat1_S15,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat1_S15,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat1_S15,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod4(a.Dat2_S15,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat2_S15,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat2_S15,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat2_S15,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod4_S15_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S15_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S15_RESULT; SET MOD4_S15_RES_TOT MOD4_S15_RES;
IF PARAMETER IN ("NO2_M12","NO2_M24","NO2_M36","NO2_M48"); RUN;

/*경남*/
%mod4(A.D1_S16,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D1_S16,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D1_S16,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D1_S16,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D2_S16,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D2_S16,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D2_S16,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D2_S16,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D3_S16,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D3_S16,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D3_S16,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D3_S16,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(A.D4_S16,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D4_S16,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D4_S16,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D4_S16,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(a.Dat1_S16,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat1_S16,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat1_S16,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat1_S16,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod4(a.Dat2_S16,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat2_S16,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat2_S16,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat2_S16,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod4_S16_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S16_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S16_RESULT; SET MOD4_S16_RES_TOT MOD4_S16_RES;
IF PARAMETER IN ("NO2_M12","NO2_M24","NO2_M36","NO2_M48"); RUN;

/*제주*/
%mod4(A.D1_S17,dat1_m_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D1_S17,dat1_m_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D1_S17,dat1_m_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D1_S17,dat1_m_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D2_S17,dat1_f_res1,event1,event1_time,NO2_M12,"NO2_M12");
%mod4(A.D2_S17,dat1_f_res2,event1,event1_time,NO2_M24,"NO2_M24");
%mod4(A.D2_S17,dat1_f_res3,event1,event1_time,NO2_M36,"NO2_M36");
%mod4(A.D2_S17,dat1_f_res4,event1,event1_time,NO2_M48,"NO2_M48");

%mod4(A.D3_S17,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D3_S17,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D3_S17,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D3_S17,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(A.D4_S17,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D4_S17,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D4_S17,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D4_S17,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(a.Dat1_S17,res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat1_S17,res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat1_S17,res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat1_S17,res4,event2,event2_time,NO2_M48,"NO2_M48");
%mod4(a.Dat2_S17,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat2_S17,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat2_S17,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat2_S17,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod4_S17_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S17_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S17_RESULT; SET MOD4_S17_RES_TOT MOD4_S17_RES;
IF PARAMETER IN ("NO2_M12","NO2_M24","NO2_M36","NO2_M48"); RUN;

/*********************************************************************************************************/
/*********************************************************************************************************/
/*서울*/
%mod4(A.D1_S01,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D1_S01,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D1_S01,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D1_S01,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D2_S01,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D2_S01,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D2_S01,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D2_S01,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D3_S01,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D3_S01,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D3_S01,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D3_S01,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(A.D4_S01,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D4_S01,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D4_S01,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D4_S01,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(a.Dat1_S01,res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat1_S01,res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat1_S01,res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat1_S01,res4,event2,event2_time,O3_M48,"O3_M48");
%mod4(a.Dat2_S01,res5,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat2_S01,res6,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat2_S01,res7,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat2_S01,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod4_S01_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S01_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S01_RESULT; SET MOD4_S01_RES_TOT MOD4_S01_RES;
IF PARAMETER IN ("O3_M12","O3_M24","O3_M36","O3_M48"); RUN;

/*부산*/
%mod4(A.D1_S02,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D1_S02,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D1_S02,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D1_S02,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D2_S02,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D2_S02,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D2_S02,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D2_S02,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D3_S02,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D3_S02,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D3_S02,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D3_S02,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(A.D4_S02,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D4_S02,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D4_S02,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D4_S02,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(a.Dat1_S02,res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat1_S02,res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat1_S02,res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat1_S02,res4,event2,event2_time,O3_M48,"O3_M48");
%mod4(a.Dat2_S02,res5,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat2_S02,res6,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat2_S02,res7,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat2_S02,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod4_S02_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S02_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S02_RESULT; SET MOD4_S02_RES_TOT MOD4_S02_RES;
IF PARAMETER IN ("O3_M12","O3_M24","O3_M36","O3_M48"); RUN;

/*대구*/
%mod4(A.D1_S03,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D1_S03,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D1_S03,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D1_S03,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D2_S03,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D2_S03,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D2_S03,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D2_S03,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D3_S03,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D3_S03,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D3_S03,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D3_S03,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(A.D4_S03,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D4_S03,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D4_S03,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D4_S03,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(a.Dat1_S03,res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat1_S03,res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat1_S03,res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat1_S03,res4,event2,event2_time,O3_M48,"O3_M48");
%mod4(a.Dat2_S03,res5,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat2_S03,res6,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat2_S03,res7,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat2_S03,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod4_S03_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S03_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S03_RESULT; SET MOD4_S03_RES_TOT MOD4_S03_RES;
IF PARAMETER IN ("O3_M12","O3_M24","O3_M36","O3_M48"); RUN;

/*인천*/
%mod4(A.D1_S04,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D1_S04,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D1_S04,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D1_S04,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D2_S04,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D2_S04,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D2_S04,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D2_S04,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D3_S04,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D3_S04,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D3_S04,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D3_S04,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(A.D4_S04,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D4_S04,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D4_S04,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D4_S04,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(a.Dat1_S04,res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat1_S04,res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat1_S04,res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat1_S04,res4,event2,event2_time,O3_M48,"O3_M48");
%mod4(a.Dat2_S04,res5,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat2_S04,res6,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat2_S04,res7,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat2_S04,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod4_S04_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S04_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S04_RESULT; SET MOD4_S04_RES_TOT MOD4_S04_RES;
IF PARAMETER IN ("O3_M12","O3_M24","O3_M36","O3_M48"); RUN;

/*광주*/
%mod4(A.D1_S05,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D1_S05,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D1_S05,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D1_S05,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D2_S05,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D2_S05,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D2_S05,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D2_S05,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D3_S05,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D3_S05,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D3_S05,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D3_S05,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(A.D4_S05,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D4_S05,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D4_S05,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D4_S05,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(a.Dat1_S05,res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat1_S05,res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat1_S05,res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat1_S05,res4,event2,event2_time,O3_M48,"O3_M48");
%mod4(a.Dat2_S05,res5,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat2_S05,res6,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat2_S05,res7,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat2_S05,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod4_S05_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S05_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S05_RESULT; SET MOD4_S05_RES_TOT MOD4_S05_RES;
IF PARAMETER IN ("O3_M12","O3_M24","O3_M36","O3_M48"); RUN;

/*대전*/
%mod4(A.D1_S06,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D1_S06,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D1_S06,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D1_S06,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D2_S06,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D2_S06,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D2_S06,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D2_S06,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D3_S06,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D3_S06,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D3_S06,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D3_S06,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(A.D4_S06,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D4_S06,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D4_S06,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D4_S06,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(a.Dat1_S06,res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat1_S06,res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat1_S06,res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat1_S06,res4,event2,event2_time,O3_M48,"O3_M48");
%mod4(a.Dat2_S06,res5,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat2_S06,res6,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat2_S06,res7,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat2_S06,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod4_S06_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S06_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S06_RESULT; SET MOD4_S06_RES_TOT MOD4_S06_RES;
IF PARAMETER IN ("O3_M12","O3_M24","O3_M36","O3_M48"); RUN;

/*울산*/
%mod4(A.D1_S07,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D1_S07,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D1_S07,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D1_S07,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D2_S07,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D2_S07,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D2_S07,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D2_S07,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D3_S07,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D3_S07,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D3_S07,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D3_S07,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(A.D4_S07,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D4_S07,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D4_S07,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D4_S07,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(a.Dat1_S07,res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat1_S07,res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat1_S07,res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat1_S07,res4,event2,event2_time,O3_M48,"O3_M48");
%mod4(a.Dat2_S07,res5,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat2_S07,res6,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat2_S07,res7,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat2_S07,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod4_S07_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S07_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S07_RESULT; SET MOD4_S07_RES_TOT MOD4_S07_RES;
IF PARAMETER IN ("O3_M12","O3_M24","O3_M36","O3_M48"); RUN;

/*세종*/
%mod4(A.D1_S08,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D1_S08,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D1_S08,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D1_S08,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D2_S08,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D2_S08,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D2_S08,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D2_S08,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D3_S08,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D3_S08,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D3_S08,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D3_S08,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(A.D4_S08,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D4_S08,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D4_S08,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D4_S08,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(a.Dat1_S08,res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat1_S08,res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat1_S08,res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat1_S08,res4,event2,event2_time,O3_M48,"O3_M48");
%mod4(a.Dat2_S08,res5,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat2_S08,res6,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat2_S08,res7,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat2_S08,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod4_S08_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S08_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S08_RESULT; SET MOD4_S08_RES_TOT MOD4_S08_RES;
IF PARAMETER IN ("O3_M12","O3_M24","O3_M36","O3_M48"); RUN;

/*경기*/
%mod4(A.D1_S09,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D1_S09,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D1_S09,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D1_S09,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D2_S09,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D2_S09,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D2_S09,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D2_S09,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D3_S09,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D3_S09,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D3_S09,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D3_S09,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(A.D4_S09,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D4_S09,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D4_S09,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D4_S09,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(a.Dat1_S09,res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat1_S09,res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat1_S09,res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat1_S09,res4,event2,event2_time,O3_M48,"O3_M48");
%mod4(a.Dat2_S09,res5,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat2_S09,res6,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat2_S09,res7,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat2_S09,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod4_S09_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S09_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S09_RESULT; SET MOD4_S09_RES_TOT MOD4_S09_RES;
IF PARAMETER IN ("O3_M12","O3_M24","O3_M36","O3_M48"); RUN;

/*강원*/
%mod4(A.D1_S10,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D1_S10,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D1_S10,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D1_S10,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D2_S10,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D2_S10,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D2_S10,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D2_S10,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D3_S10,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D3_S10,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D3_S10,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D3_S10,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(A.D4_S10,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D4_S10,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D4_S10,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D4_S10,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(a.Dat1_S10,res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat1_S10,res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat1_S10,res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat1_S10,res4,event2,event2_time,O3_M48,"O3_M48");
%mod4(a.Dat2_S10,res5,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat2_S10,res6,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat2_S10,res7,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat2_S10,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod4_S10_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S10_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S10_RESULT; SET MOD4_S10_RES_TOT MOD4_S10_RES;
IF PARAMETER IN ("O3_M12","O3_M24","O3_M36","O3_M48"); RUN;

/*충북*/
%mod4(A.D1_S11,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D1_S11,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D1_S11,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D1_S11,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D2_S11,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D2_S11,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D2_S11,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D2_S11,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D3_S11,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D3_S11,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D3_S11,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D3_S11,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(A.D4_S11,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D4_S11,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D4_S11,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D4_S11,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(a.Dat1_S11,res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat1_S11,res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat1_S11,res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat1_S11,res4,event2,event2_time,O3_M48,"O3_M48");
%mod4(a.Dat2_S11,res5,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat2_S11,res6,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat2_S11,res7,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat2_S11,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod4_S11_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S11_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S11_RESULT; SET MOD4_S11_RES_TOT MOD4_S11_RES;
IF PARAMETER IN ("O3_M12","O3_M24","O3_M36","O3_M48"); RUN;

/*충남*/
%mod4(A.D1_S12,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D1_S12,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D1_S12,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D1_S12,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D2_S12,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D2_S12,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D2_S12,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D2_S12,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D3_S12,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D3_S12,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D3_S12,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D3_S12,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(A.D4_S12,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D4_S12,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D4_S12,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D4_S12,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(a.Dat1_S12,res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat1_S12,res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat1_S12,res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat1_S12,res4,event2,event2_time,O3_M48,"O3_M48");
%mod4(a.Dat2_S12,res5,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat2_S12,res6,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat2_S12,res7,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat2_S12,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod4_S12_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S12_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S12_RESULT; SET MOD4_S12_RES_TOT MOD4_S12_RES;
IF PARAMETER IN ("O3_M12","O3_M24","O3_M36","O3_M48"); RUN;

/*전북*/
%mod4(A.D1_S13,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D1_S13,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D1_S13,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D1_S13,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D2_S13,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D2_S13,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D2_S13,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D2_S13,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D3_S13,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D3_S13,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D3_S13,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D3_S13,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(A.D4_S13,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D4_S13,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D4_S13,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D4_S13,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(a.Dat1_S13,res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat1_S13,res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat1_S13,res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat1_S13,res4,event2,event2_time,O3_M48,"O3_M48");
%mod4(a.Dat2_S13,res5,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat2_S13,res6,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat2_S13,res7,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat2_S13,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod4_S13_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S13_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S13_RESULT; SET MOD4_S13_RES_TOT MOD4_S13_RES;
IF PARAMETER IN ("O3_M12","O3_M24","O3_M36","O3_M48"); RUN;

/*전남*/
%mod4(A.D1_S14,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D1_S14,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D1_S14,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D1_S14,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D2_S14,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D2_S14,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D2_S14,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D2_S14,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D3_S14,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D3_S14,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D3_S14,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D3_S14,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(A.D4_S14,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D4_S14,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D4_S14,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D4_S14,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(a.Dat1_S14,res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat1_S14,res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat1_S14,res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat1_S14,res4,event2,event2_time,O3_M48,"O3_M48");
%mod4(a.Dat2_S14,res5,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat2_S14,res6,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat2_S14,res7,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat2_S14,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod4_S14_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S14_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S14_RESULT; SET MOD4_S14_RES_TOT MOD4_S14_RES;
IF PARAMETER IN ("O3_M12","O3_M24","O3_M36","O3_M48"); RUN;

/*경북*/
%mod4(A.D1_S15,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D1_S15,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D1_S15,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D1_S15,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D2_S15,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D2_S15,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D2_S15,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D2_S15,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D3_S15,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D3_S15,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D3_S15,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D3_S15,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(A.D4_S15,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D4_S15,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D4_S15,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D4_S15,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(a.Dat1_S15,res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat1_S15,res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat1_S15,res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat1_S15,res4,event2,event2_time,O3_M48,"O3_M48");
%mod4(a.Dat2_S15,res5,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat2_S15,res6,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat2_S15,res7,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat2_S15,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod4_S15_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S15_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S15_RESULT; SET MOD4_S15_RES_TOT MOD4_S15_RES;
IF PARAMETER IN ("O3_M12","O3_M24","O3_M36","O3_M48"); RUN;

/*경남*/
%mod4(A.D1_S16,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D1_S16,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D1_S16,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D1_S16,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D2_S16,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D2_S16,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D2_S16,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D2_S16,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D3_S16,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D3_S16,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D3_S16,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D3_S16,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(A.D4_S16,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D4_S16,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D4_S16,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D4_S16,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(a.Dat1_S16,res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat1_S16,res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat1_S16,res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat1_S16,res4,event2,event2_time,O3_M48,"O3_M48");
%mod4(a.Dat2_S16,res5,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat2_S16,res6,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat2_S16,res7,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat2_S16,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod4_S16_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S16_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S16_RESULT; SET MOD4_S16_RES_TOT MOD4_S16_RES;
IF PARAMETER IN ("O3_M12","O3_M24","O3_M36","O3_M48"); RUN;

/*제주*/
%mod4(A.D1_S17,dat1_m_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D1_S17,dat1_m_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D1_S17,dat1_m_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D1_S17,dat1_m_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D2_S17,dat1_f_res1,event1,event1_time,O3_M12,"O3_M12");
%mod4(A.D2_S17,dat1_f_res2,event1,event1_time,O3_M24,"O3_M24");
%mod4(A.D2_S17,dat1_f_res3,event1,event1_time,O3_M36,"O3_M36");
%mod4(A.D2_S17,dat1_f_res4,event1,event1_time,O3_M48,"O3_M48");

%mod4(A.D3_S17,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D3_S17,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D3_S17,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D3_S17,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(A.D4_S17,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D4_S17,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D4_S17,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D4_S17,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(a.Dat1_S17,res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat1_S17,res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat1_S17,res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat1_S17,res4,event2,event2_time,O3_M48,"O3_M48");
%mod4(a.Dat2_S17,res5,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat2_S17,res6,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat2_S17,res7,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat2_S17,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod4_S17_RES_TOT; SET res1-res8; IF TOTAL^=".";  RUN;

DATA mod4_RES1_M; SET DAT1_M_RES1-DAT1_M_RES4;  RUN;
DATA mod4_RES1_F; SET DAT1_F_RES1-DAT1_F_RES4; RUN;
DATA mod4_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod4_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod4_S17_RES; SET mod4_RES1_M mod4_RES1_F mod4_RES2_M mod4_RES2_F; RUN;

DATA MOD4_S17_RESULT; SET MOD4_S17_RES_TOT MOD4_S17_RES;
IF PARAMETER IN ("O3_M12","O3_M24","O3_M36","O3_M48"); RUN;

/****************************************************************************************************************************/
PROC MEANS DATA=a.d3 N MEAN STD MIN P1 P5 P10 P25 P50 P75 P90 P95 MAX ; VAR EVENT2_TIME; CLASS EVENT2; RUN;
PROC MEANS DATA=a.d4 N MEAN STD MIN P1 P5 P10 P25 P50 P75 P90 P95 MAX ; VAR EVENT2_TIME; CLASS EVENT2; RUN;

data z1; set a.d3; FY=event2_time/12; run;
data z2; set a.d4; FY=event2_time/12; run;

/*person-month(PY), person-year (FY) 검토 */
proc sql; create table PY_boys as select suM(event2_time) as PY, sum(FY) AS FY from Z1 ; quit;
proc sql; create table Py_GIRLS as select sum(event2_time) as PY, sum(FY) AS FY from Z2; quit;

/*민감도 분석*/
/*추적관찰 기간 1년~3년 이내 제외후 분석*/
DATA A.D3_SEN1; SET A.D3; IF EVENT2_TIME>=12;RUN;
DATA A.D3_SEN2; SET A.D3; IF EVENT2_TIME>=24;RUN;
DATA A.D3_SEN3; SET A.D3; IF EVENT2_TIME>=36;RUN;

DATA A.D4_SEN1; SET A.D4; IF EVENT2_TIME>=12;RUN;
DATA A.D4_SEN2; SET A.D4; IF EVENT2_TIME>=24;RUN;
DATA A.D4_SEN3; SET A.D4; IF EVENT2_TIME>=36;RUN;

DATA A.Dat2_SEN1; SET A.Dat2; IF EVENT2_TIME>=12;RUN;
DATA A.Dat2_SEN2; SET A.Dat2; IF EVENT2_TIME>=24;RUN;
DATA A.Dat2_SEN3; SET A.Dat2; IF EVENT2_TIME>=36;RUN;

proc freq data=a.d3_sen1; tables event2; run;
proc freq data=a.d4_sen1; tables event2; run;

proc freq data=a.d3_sen2; tables event2; run;
proc freq data=a.d4_sen2; tables event2; run;

proc freq data=a.d3_sen3; tables event2; run;
proc freq data=a.d4_sen3; tables event2; run;

/*민감도 분석*/
%macro mod4(data,out,event,time,exp,exp_text);
proc phreg data=&data.; 
CLASS STD_YYYY SEX_TYPE  SES05 SIDO/ PARAM=REF REF=FIRST;
STRATA SIDO STD_YYYY SES05;
MODEL &time.*&event.(0)=&exp. SEX_TYPE   BW  MTEMP_M12;
ODS OUTPUT censoredsummary=re1; ODS OUTPUT Parameterestimates=re2; ODS OUTPUT Fitstatistics=re3; run;

data res ; set re2; if parameter in (&exp_text.); DROP LABEL; RUN;
PROC TRANSPOSE DATA=RE3 OUT=T_RE3; ID Criterion; VAR WithCovariates ; RUN;

DATA &out.; 
retain total event censored pctcens parameter estimate stderr probchisq hazardratio hr_lci hr_uci AIC SBC;
MERGE RE1 RE2 T_RE3; HR_LCI=EXP(Estimate-1.96*StdErr); HR_UCI=EXP(Estimate+1.96*StdErr); 
drop df chisq _name_ _label_;
RUN;
%mend;

/*추적관찰 기간 3년 미만 제외 */
%mod4(A.D3_sen3,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D3_sen3,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D3_sen3,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D3_sen3,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(A.D4_sen3,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D4_sen3,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D4_sen3,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D4_sen3,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(a.Dat2_sen3,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat2_sen3,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat2_sen3,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat2_sen3,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod7_RES_TOT; SET res5-res8;  IF TOTAL^=".";  RUN;

DATA mod7_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod7_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod7_RES; SET mod7_RES2_M mod7_RES2_F; RUN;
/*추적관찰 기간 3년 미만 제외 */
%mod4(A.D3_sen3,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D3_sen3,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D3_sen3,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D3_sen3,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(A.D4_sen3,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D4_sen3,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D4_sen3,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D4_sen3,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(a.Dat2_sen3,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat2_sen3,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat2_sen3,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat2_sen3,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod7_RES_TOT; SET res5-res8;  IF TOTAL^=".";  RUN;

DATA mod7_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod7_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod7_RES; SET mod7_RES2_M mod7_RES2_F; RUN;
/*추적관찰 기간 3년 미만 제외 */
%mod4(A.D3_sen3,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D3_sen3,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D3_sen3,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D3_sen3,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(A.D4_sen3,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D4_sen3,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D4_sen3,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D4_sen3,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(a.Dat2_sen3,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat2_sen3,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat2_sen3,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat2_sen3,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod7_RES_TOT; SET res5-res8;  IF TOTAL^=".";  RUN;

DATA mod7_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod7_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod7_RES; SET mod7_RES2_M mod7_RES2_F; RUN;
/*추적관찰 기간 3년 미만 제외 */
%mod4(A.D3_sen3,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D3_sen3,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D3_sen3,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D3_sen3,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(A.D4_sen3,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D4_sen3,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D4_sen3,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D4_sen3,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(a.Dat2_sen3,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat2_sen3,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat2_sen3,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat2_sen3,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod7_RES_TOT; SET res5-res8;  IF TOTAL^=".";  RUN;

DATA mod7_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod7_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod7_RES; SET mod7_RES2_M mod7_RES2_F; RUN;
/*추적관찰 기간 3년 미만 제외 */
%mod4(A.D3_sen3,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D3_sen3,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D3_sen3,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D3_sen3,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(A.D4_sen3,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D4_sen3,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D4_sen3,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D4_sen3,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(a.Dat2_sen3,res5,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat2_sen3,res6,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat2_sen3,res7,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat2_sen3,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod7_RES_TOT; SET res5-res8;  IF TOTAL^=".";  RUN;

DATA mod7_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod7_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod7_RES; SET mod7_RES2_M mod7_RES2_F; RUN;


/*추적관찰 기간 2년 미만 제외 */
%mod4(A.D3_sen2,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D3_sen2,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D3_sen2,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D3_sen2,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(A.D4_sen2,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D4_sen2,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D4_sen2,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D4_sen2,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(a.Dat2_sen2,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat2_sen2,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat2_sen2,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat2_sen2,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod7_RES_TOT; SET res5-res8;  IF TOTAL^=".";  RUN;

DATA mod7_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod7_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod7_RES; SET mod7_RES2_M mod7_RES2_F; RUN;
/*추적관찰 기간 2년 미만 제외 */
%mod4(A.D3_sen2,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D3_sen2,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D3_sen2,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D3_sen2,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(A.D4_sen2,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D4_sen2,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D4_sen2,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D4_sen2,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(a.Dat2_sen2,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat2_sen2,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat2_sen2,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat2_sen2,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod7_RES_TOT; SET res5-res8;  IF TOTAL^=".";  RUN;

DATA mod7_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod7_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod7_RES; SET mod7_RES2_M mod7_RES2_F; RUN;
/*추적관찰 기간 2년 미만 제외 */
%mod4(A.D3_sen2,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D3_sen2,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D3_sen2,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D3_sen2,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(A.D4_sen2,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D4_sen2,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D4_sen2,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D4_sen2,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(a.Dat2_sen2,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat2_sen2,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat2_sen2,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat2_sen2,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod7_RES_TOT; SET res5-res8;  IF TOTAL^=".";  RUN;

DATA mod7_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod7_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod7_RES; SET mod7_RES2_M mod7_RES2_F; RUN;
/*추적관찰 기간 2년 미만 제외 */
%mod4(A.D3_sen2,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D3_sen2,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D3_sen2,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D3_sen2,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(A.D4_sen2,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D4_sen2,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D4_sen2,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D4_sen2,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(a.Dat2_sen2,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat2_sen2,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat2_sen2,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat2_sen2,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod7_RES_TOT; SET res5-res8;  IF TOTAL^=".";  RUN;

DATA mod7_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod7_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod7_RES; SET mod7_RES2_M mod7_RES2_F; RUN;
/*추적관찰 기간 2년 미만 제외 */
%mod4(A.D3_sen2,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D3_sen2,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D3_sen2,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D3_sen2,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(A.D4_sen2,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D4_sen2,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D4_sen2,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D4_sen2,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(a.Dat2_sen2,res5,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat2_sen2,res6,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat2_sen2,res7,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat2_sen2,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod7_RES_TOT; SET res5-res8;  IF TOTAL^=".";  RUN;

DATA mod7_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod7_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod7_RES; SET mod7_RES2_M mod7_RES2_F; RUN;


/*추적관찰 기간 1년 미만 제외 */
%mod4(A.D3_sen1,dat2_m_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D3_sen1,dat2_m_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D3_sen1,dat2_m_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D3_sen1,dat2_m_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(A.D4_sen1,dat2_f_res1,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(A.D4_sen1,dat2_f_res2,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(A.D4_sen1,dat2_f_res3,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(A.D4_sen1,dat2_f_res4,event2,event2_time,PM25_M48,"PM25_M48");

%mod4(a.Dat2_sen1,res5,event2,event2_time,PM25_M12,"PM25_M12");
%mod4(a.dat2_sen1,res6,event2,event2_time,PM25_M24,"PM25_M24");
%mod4(a.dat2_sen1,res7,event2,event2_time,PM25_M36,"PM25_M36");
%mod4(a.dat2_sen1,res8,event2,event2_time,PM25_M48,"PM25_M48");
DATA mod7_RES_TOT; SET res5-res8;  IF TOTAL^=".";  RUN;

DATA mod7_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod7_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod7_RES; SET mod7_RES2_M mod7_RES2_F; RUN;
/*추적관찰 기간 1년 미만 제외 */
%mod4(A.D3_sen1,dat2_m_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D3_sen1,dat2_m_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D3_sen1,dat2_m_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D3_sen1,dat2_m_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(A.D4_sen1,dat2_f_res1,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(A.D4_sen1,dat2_f_res2,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(A.D4_sen1,dat2_f_res3,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(A.D4_sen1,dat2_f_res4,event2,event2_time,PM10_M48,"PM10_M48");

%mod4(a.Dat2_sen1,res5,event2,event2_time,PM10_M12,"PM10_M12");
%mod4(a.dat2_sen1,res6,event2,event2_time,PM10_M24,"PM10_M24");
%mod4(a.dat2_sen1,res7,event2,event2_time,PM10_M36,"PM10_M36");
%mod4(a.dat2_sen1,res8,event2,event2_time,PM10_M48,"PM10_M48");
DATA mod7_RES_TOT; SET res5-res8;  IF TOTAL^=".";  RUN;

DATA mod7_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod7_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod7_RES; SET mod7_RES2_M mod7_RES2_F; RUN;
/*추적관찰 기간 1년 미만 제외 */
%mod4(A.D3_sen1,dat2_m_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D3_sen1,dat2_m_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D3_sen1,dat2_m_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D3_sen1,dat2_m_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(A.D4_sen1,dat2_f_res1,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(A.D4_sen1,dat2_f_res2,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(A.D4_sen1,dat2_f_res3,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(A.D4_sen1,dat2_f_res4,event2,event2_time,SO2_M48,"SO2_M48");

%mod4(a.Dat2_sen1,res5,event2,event2_time,SO2_M12,"SO2_M12");
%mod4(a.dat2_sen1,res6,event2,event2_time,SO2_M24,"SO2_M24");
%mod4(a.dat2_sen1,res7,event2,event2_time,SO2_M36,"SO2_M36");
%mod4(a.dat2_sen1,res8,event2,event2_time,SO2_M48,"SO2_M48");
DATA mod7_RES_TOT; SET res5-res8;  IF TOTAL^=".";  RUN;

DATA mod7_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod7_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod7_RES; SET mod7_RES2_M mod7_RES2_F; RUN;
/*추적관찰 기간 1년 미만 제외 */
%mod4(A.D3_sen1,dat2_m_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D3_sen1,dat2_m_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D3_sen1,dat2_m_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D3_sen1,dat2_m_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(A.D4_sen1,dat2_f_res1,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(A.D4_sen1,dat2_f_res2,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(A.D4_sen1,dat2_f_res3,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(A.D4_sen1,dat2_f_res4,event2,event2_time,NO2_M48,"NO2_M48");

%mod4(a.Dat2_sen1,res5,event2,event2_time,NO2_M12,"NO2_M12");
%mod4(a.dat2_sen1,res6,event2,event2_time,NO2_M24,"NO2_M24");
%mod4(a.dat2_sen1,res7,event2,event2_time,NO2_M36,"NO2_M36");
%mod4(a.dat2_sen1,res8,event2,event2_time,NO2_M48,"NO2_M48");
DATA mod7_RES_TOT; SET res5-res8;  IF TOTAL^=".";  RUN;

DATA mod7_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod7_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod7_RES; SET mod7_RES2_M mod7_RES2_F; RUN;
/*추적관찰 기간 1년 미만 제외 */
%mod4(A.D3_sen1,dat2_m_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D3_sen1,dat2_m_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D3_sen1,dat2_m_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D3_sen1,dat2_m_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(A.D4_sen1,dat2_f_res1,event2,event2_time,O3_M12,"O3_M12");
%mod4(A.D4_sen1,dat2_f_res2,event2,event2_time,O3_M24,"O3_M24");
%mod4(A.D4_sen1,dat2_f_res3,event2,event2_time,O3_M36,"O3_M36");
%mod4(A.D4_sen1,dat2_f_res4,event2,event2_time,O3_M48,"O3_M48");

%mod4(a.Dat2_sen1,res5,event2,event2_time,O3_M12,"O3_M12");
%mod4(a.dat2_sen1,res6,event2,event2_time,O3_M24,"O3_M24");
%mod4(a.dat2_sen1,res7,event2,event2_time,O3_M36,"O3_M36");
%mod4(a.dat2_sen1,res8,event2,event2_time,O3_M48,"O3_M48");
DATA mod7_RES_TOT; SET res5-res8;  IF TOTAL^=".";  RUN;

DATA mod7_RES2_M; SET DAT2_M_RES1-DAT2_M_RES4; RUN;
DATA mod7_RES2_F; SET DAT2_F_RES1-DAT2_F_RES4; RUN;
DATA mod7_RES; SET mod7_RES2_M mod7_RES2_F; RUN;

proc means data=a.d3 mean std min p25 p50 p75 max ; var  pm25_m48 pm10_m48 so2_m48 no2_m48 o3_m48; run;
proc means data=a.d4 mean std min p25 p50 p75 max ; var  pm25_m48 pm10_m48 so2_m48 no2_m48 o3_m48; run;

DATA a.d3; set a.d3;
if PM25_M48 <24.29 then PM25_M48_C=1; ELSE IF 
PM25_M48 <26.60 then PM25_M48_C=2; else if
PM25_M48 <28.28 then PM25_M48_C=3; else PM25_M48_C=4;

if PM10_M48 <45.86 then PM10_M48_C=1; ELSE IF 
PM10_M48 <50.23 then PM10_M48_C=2; else if
PM10_M48 <53.20 then PM10_M48_C=3; else PM10_M48_C=4;

if SO2_M48 <4.12 then SO2_M48_C=1; ELSE IF 
SO2_M48 <5.09 then SO2_M48_C=2; else if
SO2_M48 <5.63 then SO2_M48_C=3; else SO2_M48_C=4;

if NO2_M48 <17.78 then NO2_M48_C=1; ELSE IF 
NO2_M48 <21.19 then NO2_M48_C=2; else if
NO2_M48 <31.90 then NO2_M48_C=3; else NO2_M48_C=4;

if O3_M48 <21.19 then O3_M48_C=1; ELSE IF 
O3_M48 <24.59 then O3_M48_C=2; else if
O3_M48 <27.32 then O3_M48_C=3; else O3_M48_C=4;
RUN;

DATA a.d4; set a.d4;
if PM25_M48 <24.29 then PM25_M48_C=1; ELSE IF 
PM25_M48 <26.64 then PM25_M48_C=2; else if
PM25_M48 <28.28 then PM25_M48_C=3; else  PM25_M48_C=4;

if PM10_M48 <45.88 then PM10_M48_C=1; ELSE IF 
PM10_M48 <50.23 then PM10_M48_C=2; else if
PM10_M48 <53.29 then PM10_M48_C=3; else PM10_M48_C=4;

if SO2_M48 <4.12 then SO2_M48_C=1; ELSE IF 
SO2_M48 <5.09 then SO2_M48_C=2; else if
SO2_M48 <5.63 then SO2_M48_C=3; else SO2_M48_C=4;

if NO2_M48 <17.78 then NO2_M48_C=1; ELSE IF 
NO2_M48 <22.25 then NO2_M48_C=2; else if
NO2_M48 <32.09 then NO2_M48_C=3; else NO2_M48_C=4;

if O3_M48 <21.19 then O3_M48_C=1; ELSE IF 
O3_M48 <24.59 then O3_M48_C=2; else if
O3_M48 <27.30 then O3_M48_C=3; else O3_M48_C=4;
RUN;


PROC FREQ DATA=A.D3; TABLES PM25_M48_C PM10_M48_C SO2_M48_C NO2_M48_C O3_M48_C; RUN;
PROC FREQ DATA=A.D4; TABLES PM25_M48_C PM10_M48_C SO2_M48_C NO2_M48_C O3_M48_C; RUN;


/*범주*/
%macro mod7(data,out,exp,exp_text);
proc phreg data=&data.; 
CLASS PM25_M48_C PM10_M48_C SO2_M48_C NO2_M48_C O3_M48_C STD_YYYY SEX_TYPE  SES05 SIDO/ PARAM=REF REF=FIRST;
STRATA SIDO STD_YYYY SES05;
MODEL event2_time*event2(0)=&exp. SEX_TYPE   BW  MTEMP_M12;
ODS OUTPUT censoredsummary=re1; ODS OUTPUT Parameterestimates=re2; ODS OUTPUT Fitstatistics=re3; run;

data res ; set re2; if parameter in (&exp_text.); DROP LABEL; RUN;
PROC TRANSPOSE DATA=RE3 OUT=T_RE3; ID Criterion; VAR WithCovariates ; RUN;

DATA &out.; 
retain total event censored pctcens parameter estimate stderr probchisq hazardratio hr_lci hr_uci AIC SBC;
MERGE RE1 RE2 T_RE3; HR_LCI=EXP(Estimate-1.96*StdErr); HR_UCI=EXP(Estimate+1.96*StdErr); 
drop df chisq _name_ _label_;
RUN;
%mend;

%mod7(A.D3,dat2_m_res1,PM25_M48_C,"PM25_M48_C");
%mod7(A.D3,dat2_m_res2,PM10_M48_C,"PM10_M48_C");
%mod7(A.D3,dat2_m_res3,SO2_M48_C,"SO2_M48_C");
%mod7(A.D3,dat2_m_res4,NO2_M48_C,"NO2_M48_C");
%mod7(A.D3,dat2_m_res5,O3_M48_C,"O3_M48_C");
%mod7(A.D4,dat2_f_res1,PM25_M48_C,"PM25_M48_C");
%mod7(A.D4,dat2_f_res2,PM10_M48_C,"PM10_M48_C");
%mod7(A.D4,dat2_f_res3,SO2_M48_C,"SO2_M48_C");
%mod7(A.D4,dat2_f_res4,NO2_M48_C,"NO2_M48_C");
%mod7(A.D4,dat2_f_res5,O3_M48_C,"O3_M48_C");


DATA mod7_RES2_M; SET DAT2_M_RES1-DAT2_M_RES5; RUN;
DATA mod7_RES2_F; SET DAT2_F_RES1-DAT2_F_RES5; RUN;
DATA mod7_RES; SET mod7_RES2_M mod7_RES2_F; RUN;

/********************************************************************************************************************************************/

/*영유아 검진1-7차 조회*/
PROC SQL; &CONNECT.;CREATE TABLE A.GQ1 AS SELECT EXMD_BZ_YYYY, INDI_DSCM_NO, HME_DT, I1Q_BTH_DATE, I1Q_BTH_WGHT
FROM CONNECTION TO X1 (SELECT * FROM NHISBDA.HMDV_I1Q_RST WHERE EXMD_BZ_YYYY>=2007); DISCONNECT FROM X1; QUIT;

PROC SQL; &CONNECT.;CREATE TABLE A.GQ1_REV AS SELECT * FROM CONNECTION TO X1 (SELECT * FROM NHISBDA.HMDV_I1Q_RST WHERE EXMD_BZ_YYYY>=2007); 
DISCONNECT FROM X1; QUIT;

data z; set a.gq1_rev; run;
